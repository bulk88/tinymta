!function(){"use strict";var d,k,N,E,S,j,w=window,O=location,m=document.documentElement,x=m.firstChild,A={},u=0,T=O.pathname,g=O.hash,q=O.origin,L=P(T),F={headers:{"accept-version":"3.0"}},z=[,[0,5],,[3,8],[2,7],[0,4],[0,4],[1,6],[,9],[]],s={},D=["//backend-unified.mylirr.org","//otp-mta-prod.camsys-apps.com","//collector-otp-prod.camsys-apps.com",["//tiles1.tinymta.us.to","//tiles2.tinymta.us.to"],"/rstop.htm","/rtrain.htm","/stop.htm","/status.htm","/tileMap.htm",["/bk.png","/zo.png","/zi.png","/ts.gif"]],I=["style","body","html","div",,"link",0],M=w.requestIdleCallback||(w.requestAnimationFrame?function(e){requestAnimationFrame(function(){requestAnimationFrame(e)})}:function(e){return setTimeout(e,40)});function B(){for(var e,t=0;t<I.length;t++)(e=I[t])[1]||(e[1]=e[0].cloneNode(0))}w.fetch||w.f||(f=1,x.appendChild(document.createElement("script")).src="/f.js");for(var e,t,n,o,a={body:document.body,style:x.getElementsByTagName("style")[0],y:w.y},r=[a,a.body,T+g,L],i=0;i<I.length;i++)t=(e=I[i])?document.createElement(e):t.cloneNode(0),I[i]=[t];if(I[6][0].rel="prefetch",(t=I[5][0]).rel="preconnect",t.crossOrigin="anonymous",B(),(n=x.querySelectorAll('link[rel="preconnect"]')).length){if(1<n.length){for(o=I[3][1],i=I[3][1]=0;i<n.length;i++)o.appendChild(n[i]);x.appendChild(o)}else o=n[0];k=D[z[L][0]]=a.pc=o}if((n=x.querySelectorAll('link[rel="prefetch"]')).length){if(1<n.length){for(o=I[4][1],i=I[4][1]=0;i<n.length;i++)o.appendChild(n[i]);x.appendChild(o)}else o=n[0];N=D[z[L][1]]=a.pf=o}function P(e){var t;switch(e){case"/tileMap.htm":t=8;break;case"/stations.htm":t=7;break;case"/mn/stations.htm":t=6;break;case"/li/stations.htm":t=5;break;case"/":t=4;break;case"/stop.htm":t=3;break;case"/status.htm":t=2;break;case"/rstop.htm":t=1;break;case"/rtrain.htm":t=0;break;default:t=9}return t}function l(e){var n,t,o,s,a,r,i,l="touchstart"===e.type;if("A"===(e="FONT"===(e=e.target).nodeName?e.parentNode:e).nodeName&&(l||!e.tmts)&&e.origin===q&&(n=e.hash,(g="/"==(g=e.pathname).charAt(0)?g:"/"+g)!==O.pathname)){if(10<=g.length&&g.lastIndexOf("/jsrdt.htm")===g.length-10&&(e.pathname=g=g.replace("/jsrdt.htm","/js/rt.htm")),(s=P(g))<4&&(n=n.slice(1),w.S={t:Date.now(),s:n,f:function(e){r?e(r):i=e}},fetch(3===s?"//otp-mta-prod.camsys-apps.com/otp/routers/default/nearby?timerange=1800&apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE&stops=MTASBWY:"+n.slice(0,3):2===s?"//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP":1===s?"//backend-unified.mylirr.org/arrivals/"+n:"//backend-unified.mylirr.org/locations/"+n+"?geometry=NONE",1<s?{}:F).then(function(e){var t,n;i?i(e):r=200==e.status?(e.json().then(function(e){t?t(e):n=e}),{status:200,json:function(){return{then:function(e){n?setTimeout(e,0,n):t=e}}}}):e}),2===s)&&(R=0,S=1,x.appendChild(document.createElement("script")).src="routes.js"),8===s&&(t=function(e,t){t?o.pr=t:(w.S=o={t:Date.now(),s:n,pt:s,pr:e.body},e.js(0,n))}),!(a=A[g])||a.pgh&&void 0===E){var p,h,c,d,m,f,u=g,g=s,y=t,v={},C=T,b=L;try{-1!=u.indexOf("/stations")&&(void 0===E?history.pushState.p1?(E=history.pushState.p1[0],delete history.pushState.p1,v.pgh=E=E||0):(history.pushState.p1=m=function(e){e?x.removeChild(d):(E=history.pushState.p1[0],v.pgh=E=E||0),d.onerror=0,delete history.pushState.p1,f()},(d=document.createElement("script")).onerror=m,d.src="1p.js",x.appendChild(d),f=1):v.pgh=E),(p=z[g])&&(h=p[0],(c=D[h])&&c.length&&(c=G(h,0)),k=J(k,v.pc=c),h=p[1],(c=D[h])&&c.length&&(c=G(h,1)),N=J(N,v.pf=c),M(B)),fetch(u,{},1).then(function(e){e.text().then(function(e){var t,n,o,s,a,r,i;-1!=(t=e.indexOf("<style>"))?(a=e.slice(t+=7,t=e.indexOf("</style>",t)),t+=8,s=0,":root{color-scheme:light dark}"!=a||(s=j)||(r=1),s||(s=I[0][1],I[0][1]=0,M(B),s.textContent=a,r&&(j=s)),v.style=s):t=0,-1!=(n=e.indexOf("<script>",t))&&(a=w.y,r=w.onpageshow,w.onpageshow=null,o=e.indexOf("<\/script>",n+8),Function(e.slice(n+8,o))(),(i=(s=v.js=onhashchange).body)&&delete s.body,v.y=w.y,v.pg=w.onpageshow,w.y=a,w.onpageshow=r,onhashchange=null,y)&&y(v),-1==e.indexOf("No javascript",t)&&(e=-1!=n?e.slice(t,n)+e.slice(o+9):e.slice(t),s=I[2][1],I[2][1]=0,M(B),s.innerHTML=e,v.body=s=s.lastElementChild,y&&y(0,s),i)&&i(s),f?f=function(){A[u]=v,Y(C,u,b)}:(A[u]=v,Y(C,u,b))})})}catch(e){}}else t&&t(a);e.tmts=l}}function Y(r,i,l){s[i]=1,M(function(){var e,t,n,o,s=q.length,a=A[r];if(e=a.pf)if("DIV"===e.nodeName){for(n=e.firstChild;n;){if(o=n.nextElementSibling,n.href.slice(s)==i){e.removeChild(n);break}n=o}e.firstChild||((t=e.parentNode)&&t.removeChild(e),delete a.pf,N===e&&(N=null),D[z[l][1]]=null)}else e.href.slice(s)==i&&((t=e.parentNode)&&t.removeChild(e),delete a.pf,N===e&&(N=null),D[z[l][1]]=null)})}function p(e,t){var n,o;return e&&s[t]?0:((o=(n=I[5+e])[1])?n[1]=0:o=n[0].cloneNode(0),e?".png"!=(n=t.slice(-4))&&".gif"!=n||(o.rel="preload",o.as="image"):t.indexOf("//tiles")||(o.crossOrigin=null),o.href=t,o)}function G(e,t){var n,o,s,a=D[e];if("string"==typeof a)s=p(t,a);else{for(s=I[3+t][1],n=I[3+t][1]=0;n<a.length;n++)(o=p(t,a[n]))&&s.appendChild(o);s.firstChild||(s=0)}return D[e]=s}function J(e,t){return e!==t&&(e&&t?x.replaceChild(t,e):(e&&x.removeChild(e),t&&x.appendChild(t))),t}M(B),(e=w.onpageshow)?a.pg=e:w.onpageshow=function(e,t){a.pg=t,w.onpageshow=t},a.pgh=w.onpagehide,(E=history.pushState.p1)&&(E=(E=E[0])||0,delete history.pushState.p1),A[T]=a,d=[r],history.state!==u&&history.replaceState(u,0,O.href),addEventListener("touchstart",l,{passive:!0}),addEventListener("mousedown",l,{passive:!0}),addEventListener("click",function(e){var t,n,o,s,a,r,i,l,p,h,c=e.target;"A"===(c="FONT"===c.nodeName?c.parentNode:c).nodeName&&c.origin===q&&(10<=(o="/"==(o=c.pathname).charAt(0)?o:"/"+o).length&&o.lastIndexOf("/jsrdt.htm")===o.length-10&&(c.pathname=o=o.replace("/jsrdt.htm","/js/rt.htm")),a=P(o),(t=A[o])?(s=c.hash,i=o===O.pathname&&s!=O.hash,(l=(p=(r=d[u])[0]).pgh)&&l({},T),2===a&&(S?S=0:(R=0,S=1,x.appendChild(document.createElement("script")).src="routes.js")),i||(m.removeChild(r[1]),J(p.style,t.style),k=J(k,t.pc),N=J(N,t.pf)),r=d[++u]=[],(p=w.S)&&p.pr&&(w.S=0,p.pt===a)&&p.s===s&&Date.now()-p.t<3e3&&(h=p.pr),8!=a&&(n=(n=w.T)&&n.GC)&&n(),d.length=u+1,h?n=h:(n=t.body)||(n=I[1][1],I[1][1]=0,M(B)),r[1]=i?n:m.appendChild(n),history.pushState(u,0,c.href),i||(e.preventDefault(),w.y=t.y,w.onpageshow=t.pg,w.onpagehide=t.pgh,(l=t.js)&&!h&&l(),T=o,g=s,8==(L=a)&&t.pf&&(Y(o,"/bk.png",8),Y(o,"/zo.png",8),Y(o,"/zi.png",8),Y(o,"/ts.gif",8))),r[0]=t,r[2]=o+s,r[3]=a):console.log("on click no cache spa ent"))}),onpopstate=function(e){var t,n,o,s,a,r,i=O.pathname,l=O.hash;null===(e=e.state)?console.log("spa leave 3 "+i):T==i&&g!=l?(g=l,console.log("spa leave 1 "+i)):e===u||e>=d.length?(console.log("spa leave 2 "+i),O.reload()):(o=(n=d[u])[0],a=(s=d[e])[3],r=s[0],(t=o.pgh)&&t({},T),T=i,g=l,m.removeChild(n[1]),J(o.style,r.style),k=J(k,r.pc),N=J(N,r.pf),u=e,L=a,m.appendChild(s[1]),w.y=r.y,onpageshow=t=r.pg,onpagehide=r.pgh,t&&t({persisted:1}))}}();