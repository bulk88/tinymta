<meta content=0 name=mobileoptimized><meta content=no-referrer name=referrer><link href="//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP"rel=preload as=fetch crossorigin><link href=routes.js rel=preload as=fetch crossorigin><link href=//collector-otp-prod.camsys-apps.com rel=dns-prefetch><link href=//collector-otp-prod.camsys-apps.com rel=preconnect>No javascript<script>var _,t="/routes.js",r="//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP",e="<a href=javascript:history.back()>Back</a> Refresh[<a href=javascript:a()>Fast</a> <a href=\"javascript:location.replace('status.htm')\">Slow</a>] <a href="+t+">RawR</a> <a href="+r+">RawA</a><br>",w,T;function a(){c(t),c(r,1),document.body.innerHTML=e}function A(t,r){r={4:"00933c",5:"00933c","5X":"00933c",6:"00933c","6X":"00a65c",A:"2850ad",C:"2850ad",E:"2850ad",G:"6cbe45",GS:"6d6e71",J:"963",Z:"963",L:"a7a9ac",7:"b933ad","7X":"b933ad",1:"ee352e",2:"ee352e",3:"ee352e",N:"fccc0a",Q:"fccc0a",R:"fccc0a",W:"fccc0a",B:"ff6319",D:"ff6319",F:"ff6319",FX:"ff6319",M:"ff6319"}[r||t];return r?"<font color="+r+">"+t+"</font>":t}function n(t){for(var e,a,n,o={},i=Math.round(Date.now()/1e3),r=0;r<t.length;r++){e=t[r],a=!1;try{e.alert["transit_realtime.mercury_alert"]&&e.alert.active_period&&(n=e.alert["transit_realtime.mercury_alert"].hasOwnProperty("display_before_active"),~e.id.indexOf("planned_work")&&!n?a=!1:e.alert.active_period.forEach(function(t){var r;t.start&&!a&&(r=t.start,n&&(r-=e.alert["transit_realtime.mercury_alert"].display_before_active),r<i&&(a=!0),t.end)&&i>t.end&&(a=!1)}))}catch(s){console.log(s)}a&&e.alert.informed_entity.forEach(function(t){var r;(r=t.route_id)&&(r=r.toLowerCase(),(t=(t=o[t.agency_id]=o[t.agency_id]||{})[r]=t[r]||[]).push(e))})}return o}function S(t){for(var r,e=!1,a=!1,n=0;n<t.length;n++){if("en-html"===(r=t[n]).language)return r.text;"en"===r.language?e=r.text:""===r.language&&(a=r.text)}return e||a||!1}function E(t){return"string"==typeof t&&!(t=t.replace(/(<p style="min-height:10px"><\/p>|<p><\/p>)+$/g,"")).indexOf("<p>")&&~t.indexOf("</p>",t.length-4)?t.slice(3,-4):t}function o(t){w="object"==typeof(t=t.contents||t)?t:eval("0,"+t),T&&s()}function i(t){T=n(("object"==typeof(t=t.contents||t)?t:this.JSON?JSON.parse(t):eval("0,"+t)).entity),w&&s()}function s(){function t(t,e,a){var n=[];return t.forEach(function(t){var r,i=(""+t[0]).toLowerCase(),s=a[t[3]||0];(r=(r=e[s])&&r[i])&&0<(r=r.map(function(t){var r=t.alert.informed_entity.find(function(t){return t.agency_id===s&&t.route_id.toLowerCase()==i?1:0}),e=(e=t.alert["transit_realtime.mercury_alert"])?e.alert_type:"No Status Summary",a=!!(a=t.alert.description_text)&&S(a.translation),n=!!(n=t.alert.header_text)&&S(n.translation),r=(o=-10,o=(r=(r=(r=r)["transit_realtime.mercury_entity_selector"])&&r.sort_order)?(o=r.split(":")[2])?+o:100:o),o=t.alert["transit_realtime.mercury_alert"].human_readable_active_period;return{statusSummary:e,statusDescription:a,statusTitle:n,priority:r,duration:o?S(o.translation):""}})).length&&(t[5]=r),n.push(t)}),n}function r(t){t.sort(function(t,r){return t[4]-r[4]})}function e(t,r){return"<hr>"+t+"<br>"+r.map(function(t){var r=t[5]&&t[5].length?t[5][0].statusSummary:"On or Close",e="On or Close"!=r;return"<hr>"+(e?"<details><summary>":"")+"<font color="+t[2]+">"+t[1]+"</font> "+r+(e?"</summary>"+t[5].map(function(t){return"<b>"+t.statusSummary+"</b><br>"+E(t.statusTitle)+(t.duration?"<br>"+t.duration:"")+"<br>"+(t.statusDescription?E(t.statusDescription):"")}).join("<hr>")+"</details>":"")}).join("")}for(var a,n,o,i,s,c,u,l=(new Date).toLocaleTimeString("en-US")+(_?" via JSONP":" via CORS")+"<br>",f=[],p=[],h=[],d=[],m=[],g=(o=d,i=m,t(w[2],T,["MTASBWY"]).forEach(function(t){(t[5]?o:i).push(t)}),r(o),r(i),s=p,c=h,t(w[1],T,["LI","MNR"]).forEach(function(t){(t[3]?s:c).push(t),t[5]&&t[5].sort(function(t,r){return r.priority-t.priority})}),u=f,t(w[0],T,["MTA NYCT","MTABC"]).forEach(function(t){t[5]&&(t[5].sort(function(t,r){return r.priority-t.priority}),u.push(t))}),function(t){for(var r,e,a,n={},o=[],i=0;i<t.length;i++)(r=t[i])[5].sort(function(t,r){return r.priority-t.priority}),((e=n[e=(a=r[5][0]).statusSummary.toLowerCase().replace(/\s/g,"-")]=n[e]||{status:a.statusSummary,priority:a.priority}).lines=e.lines||[]).push(r);for(e in n)o.push(n[e]);return o.sort(function(t,r){return r.priority-t.priority}),o}(d)),b=0;b<g.length;b++){var v=g[b];for(l+="<hr>"+v.status+"<br>",v=v.lines,n=0;n<v.length;n++)l=(l+="<details><summary>"+A("["+(a=v[n])[1]+"]",a[1])+"</summary>")+a[5].map(function(t){return"<b>"+t.statusSummary+"</b><br>"+E(t.statusTitle).replace(/\[(\w+)\]/g,A)+(t.duration?"<br>"+t.duration:"")+"<br>"+(t.statusDescription?E(t.statusDescription).replace(/\[(\w+)\]/g,A):"")}).join("<hr>")+"</details>"}if(m.length)for(l+="<hr>No Active Alerts<br>",b=0;b<m.length;b++)l+=A("["+(a=m[b][1])+"]",a)+" ";l=(l=(l+=e("Metro-North Railroad",p))+e("Long Island Rail Road",h))+e("Bus",f),document.body.innerHTML+=l,w=T=void 0}function c(t,r,e){var x=this.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");try{if(_)throw 0;x.open("GET",t,1);try{r&&(x.responseType="json")}catch(a){}x.onreadystatechange=function(){4==x.readyState&&(200==x.status?"withCredentials"in x||x.getResponseHeader("Date")?(r?i:o)(x.response||x.responseText):c(t,r,1):alert("error HTTP status "+x.status))},e&&x.setRequestHeader("if-modified-since",new Date(0)),x.send()}catch(n){(n=document.createElement("script")).src=r?"/api/alt?callback=i":"/api/rts?callback=o",1<(_=document.getElementsByTagName("head")[0]).childNodes.length&&_.removeChild(_.childNodes[1]),_.appendChild(n)}}a(),Array.prototype.find||(Array.prototype.find=function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");for(var r=Object(this),e=r.length>>>0,a=arguments[1],n=0;n<e;n++){var o=r[n];if(t.call(a,o,n,r))return o}}),Array.prototype.filter||(Array.prototype.filter=function(t){"use strict";if(null==this)throw new TypeError;var r,e,a,n,o=Object(this),i=o.length>>>0;if("function"!=typeof t)throw new TypeError;for(r=[],e=arguments[1],a=0;a<i;a++)a in o&&(n=o[a],t.call(e,n,a,o))&&r.push(n);return r}),Array.prototype.map||(Array.prototype.map=function(t,r){var e,a,n;if(null==this)throw new TypeError(" this is null or not defined");var o,i=Object(this),s=i.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(r&&(e=r),a=Array(s),n=0;n<s;)n in i&&(o=i[n],o=t.call(e,o,n,i),a[n]=o),n++;return a}),Array.prototype.forEach||(Array.prototype.forEach=function(t,r){"use strict";for(var e=0,a=this.length;e<a;++e)e in this&&t.call(r,this[e],e,this)}),Date.now||(Date.now=function u(){return(new Date).getTime()})</script>