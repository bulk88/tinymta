!function(){var h,j,b,w,k,E,e,c,m,V,Z,O=window,N=location,x=document,f=x.documentElement,S=f.firstChild,D={},d=0,A=N.pathname,u=N.hash,I=N.origin,T=M(A),G={headers:{"accept-version":"3.0"}},q=[,[0,5,12],[,,!Object.values],[3,8,4],[2,7,4],[0,4,2],[0,4,2],[1,6,2],[,9,!O.requestIdleCallback],[]],g={},F=["//backend-unified.mylirr.org","//otp-mta-prod.camsys-apps.com","//collector-otp-prod.camsys-apps.com",["//tiles1.tinymta.us.to","//tiles2.tinymta.us.to"],"/rstop.htm","/rtrain.htm","/stop.htm","/status.htm","/tileMap.htm",["/bk.png","/zo.png","/zi.png","/ts.gif"]],L=[["/f.js"],["/1p.js",function(){w=(w=history.pushState.p1[0])||null,delete history.pushState.p1}],["/fav.js"],["/dumb.js"]],z=["style","body","html","div",,"link",0],P=O.requestIdleCallback||(O.requestIdleCallback=O.requestAnimationFrame?function(e){requestAnimationFrame(function(){requestAnimationFrame(e)})}:function(e){return setTimeout(e,40)});function B(){for(var e,n=0;n<z.length;n++)(e=z[n])[1]||(e[1]=e[0].cloneNode(0))}O.fetch||O.f||(O.f=1,S.appendChild(x.createElement("script")).src="/f.js");var n,t,r,a,o,i={body:x.body,style:S.getElementsByTagName("style")[0],y:O.y},y=[i,i.body,A+u,T],v=I.length,s=O.applicationCache,l=function(){var e,n=navigator.userAgent,t=n.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(t[1]))return e=/\brv[ :]+(\d+)\.(\d+)/g.exec(n)||[],{name:"Explorer",major:parseInt(e[1]||""),minor:parseInt(e[2]||"")};if("Chrome"===t[1]){var r;if(null!=(e=n.match(/\b(OPR|Edge)\/(\d+)\.(\d+)/)))return{name:(r=e.slice(1).toString().split(","))[0].replace("OPR","Opera"),major:parseInt(r[1]),minor:parseInt(r[2])}}t=t[2]?[t[1],t[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=n.match(/version\/(\d+)\.(\d+)/i))&&(t.splice(1,1,e[1]),t[2]=e[2]);return{name:t[0],major:parseInt(t[1]),minor:parseInt(t[2])}}();for(("Chrome"==l.name&&8<=l.major||"Firefox"==l.name&&2<=l.major||"Opera"==l.name&&15<=l.major||"Explorer"==l.name&&11<=l.major)&&(e=1),s&&(s.onupdateready=function(){console.log("spa ac swap ",O.performance&&O.performance.now()||Date.now());var e=O.applicationCache;e.swapCache(),e.onupdateready=null},V=!e),("Chrome"==l.name&&50<=l.major||"Firefox"==l.name&&(56==l.major||85<=l.major)||"Opera"==l.name&&37<=l.major||"Safari"==l.name&&(11==l.major&&1<=l.minor||11<l.major))&&(c=1),("Chrome"==l.name&&46<=l.major||"Firefox"==l.name&&(40<=l.major&&l.major<=70||115<=l.major)||"Opera"==l.name&&33<=l.major||"Safari"==l.name&&(11==l.major&&1<=l.minor||11<l.major))&&(m=1),r=0;r<z.length;r++)t=(n=z[r])?x.createElement(n):t.cloneNode(0),z[r]=[t];if(z[6][0].rel="prefetch",e||s&&s.status||(z[6][0]=x.createElement("img")),t=z[5][0],m?(t.rel="preconnect",t.crossOrigin="anonymous"):(t.rel="dns-prefetch","/"==A&&((n=t.cloneNode(0)).href="//collector-otp-prod.camsys-apps.com",S.appendChild(n))),B(),(a=S.querySelectorAll('link[rel="preconnect"]')).length){if(1<a.length){for(o=z[3][1],r=z[3][1]=0;r<a.length;r++)o.appendChild(a[r]);S.appendChild(o)}else o=a[0];j=F[q[T][0]]=i.pc=o}if((a=S.querySelectorAll('link[rel="prefetch"]')).length){if(1<a.length){for(o=z[4][1],r=z[4][1]=0;r<a.length;r++)o.appendChild(a[r]);S.appendChild(o)}else o=a[0];b=F[q[T][1]]=i.pf=o}for(o={},r=0;r<L.length;r++)o[L[r][0]]=r+1;for(a=S.getElementsByTagName("script"),r=0;r<a.length;r++)(t=o[t=(t=a[r]).src.slice(v)])&&((n=L[--t][1])&&n(),L[t]=0);function M(e){var n;switch(e){case"/tileMap.htm":n=8;break;case"/stations.htm":n=7;break;case"/mn/stations.htm":n=6;break;case"/li/stations.htm":n=5;break;case"/":n=4;break;case"/stop.htm":n=3;break;case"/status.htm":n=2;break;case"/rstop.htm":n=1;break;case"/rtrain.htm":n=0;break;default:n=9}return n}function p(e){var t,n,r,a,o=e.target;if(!o.window&&"A"===(o="FONT"===o.nodeName?o.parentNode:o).nodeName&&o.href!=E&&(E=o.href,!o.href.indexOf(I))&&(t=o.hash,n=o.pathname,console.log("in pl",n),(n="/"==n.charAt(0)?n:"/"+n)!==N.pathname)){var i,s,l=M(n);if("focus"!=e.type?(l<4&&(t=t.slice(1),O.S={t:Date.now(),s:t,f:function(e){i?e(i):s=e}},fetch(3===l?"//otp-mta-prod.camsys-apps.com/otp/routers/default/nearby?timerange=1800&apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE&stops=MTASBWY:"+t.slice(0,3):2===l?"//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP":1===l?"//backend-unified.mylirr.org/arrivals/"+t:"//backend-unified.mylirr.org/locations/"+t+"?geometry=NONE",1<l?{}:G).then(function(e){var n,t;s?s(e):i=200==e.status?(e.json().then(function(e){n?n(e):t=e}),{status:200,json:function(){return{then:function(e){t?setTimeout(e,0,t):n=e}}}}):e}),2===l)&&(R=void 0,k=1,S.appendChild(x.createElement("script")).src="routes.js"),8===l&&(r=function(e,n){n?a.pr=n:(O.S=a={t:Date.now(),s:t,pt:l,pr:e.body},e.js(0,t))})):E="",!(o=D[n])||o.pgh&&void 0===w){if(0!==o){D[n]=0;var p,c,m,h,f,d,u=n,e=l,g=r,y={},v=A,C=T;try{if(p=q[e])for(m=p[2],c=0;m;c++)1&m&&L[c]&&(!function(n,t){var r=x.createElement("script");r.onerror=r.onload=function(e){"error"==e.type?S.removeChild(r):((e=L[n][1])&&e(),L[n]=0,r.onerror=r.onload=0),--t[0]||t[1]()},r.src=L[n][0],console.log("spa ld .js ",r.src,O.performance&&O.performance.now()||Date.now()),S.appendChild(r),t[0]++}(c,f=f||[0,function(){1!==d&&d(),d=0}]),d=1),m>>=1;console.log("pl f ",u,O.performance&&O.performance.now()||Date.now()),fetch(u,{},1).then(function(e){console.log("pl f 2 ",u,O.performance&&O.performance.now()||Date.now()),e.text().then(function(e){var n,t,r,a,o,i,s;console.log("pl f 3 ",u,O.performance&&O.performance.now()||Date.now()),-1!=(n=e.indexOf("<script async defer src="))?"/1p.js"==(a=e.slice(n+=24,n=e.indexOf(">",n)))&&(s=1):n=0,-1!=(n=e.indexOf("<style>",n))?(a=e.slice(n+=7,n=e.indexOf("</style>",n)),n+=8,r=0,":root{color-scheme:light dark}"!=a||(r=Z)||(o=1),r||(r=z[0][1],z[0][1]=0,P(B),r.textContent=a,o&&(Z=r)),y.style=r):n=0,-1!=(o=e.indexOf("<script>",n))&&(a=O.y,t=e.indexOf("<\/script>",o+8),Function(e.slice(o+8,t))(),(i=(r=y.js=onhashchange).body)&&delete r.body,y.y=O.y,O.y=a,onhashchange=null,g)&&g(y),-1==e.indexOf("No javascript",n)&&(e=-1!=o?e.slice(n,o)+e.slice(t+9):e.slice(n),r=z[2][1],z[2][1]=0,P(B),r.innerHTML=e,y.body=r=r.lastElementChild,g&&g(0,r),i)&&i(r),d?d=function(){s&&(y.pgh=w),D[u]=y,Y(v,u,C)}:(s&&(y.pgh=w),D[u]=y,Y(v,u,C))})}),p&&(c=p[0],(m=F[c])&&m.length&&(m=K(c,0)),j=J(j,y.pc=m),c=p[1],(m=F[c])&&m.length&&(m=K(c,1)),b=J(b,y.pf=m),P(B)),V&&3==e&&((h=x.createElement("iframe")).src="/stopac.htm",console.log("add stopac el ",O.performance&&O.performance.now()||Date.now()),S.appendChild(h))}catch(e){}}}else r&&r(o)}}function C(e){var n,t,r,a,o,i,s,l,p,c,m=e.target;E="","A"!==(m="FONT"===m.nodeName?m.parentNode:m).nodeName||m.href.indexOf(I)||(o=M(r="/"==(r=m.pathname).charAt(0)?r:"/"+r),(n=D[r])?(a=m.hash,s=r===N.pathname&&a!=N.hash,(l=(p=(i=h[d])[0]).pgh)&&l({},A),2===o&&(k?k=0:(R=void 0,k=1,S.appendChild(x.createElement("script")).src="routes.js")),s||(f.removeChild(i[1]),J(p.style,n.style),j=J(j,n.pc),b=J(b,n.pf)),i=h[++d]=[],(p=O.S)&&p.pr&&(O.S=0,p.pt===o)&&p.s===a&&Date.now()-p.t<3e3&&(c=p.pr),8!=o&&(t=O.T)&&t(),h.length=d+1,c?t=c:(t=n.body)||(t=z[1][1],z[1][1]=0,P(B)),i[1]=s?t:f.appendChild(t),history.pushState(d,0,m.href),s||(e.preventDefault(),O.y=n.y,O.onpageshow=n.pg,O.onpagehide=n.pgh,(l=n.js)&&!c&&l(),A=r,u=a,8==(T=o)&&n.pf&&(Y(r,"/bk.png",8),Y(r,"/zo.png",8),Y(r,"/zi.png",8),Y(r,"/ts.gif",8))),i[0]=n,i[2]=r+a,i[3]=o,console.log("on click have ent ",O.performance&&O.performance.now()||Date.now())):(console.log("on click no cache spa ent ",O.performance&&O.performance.now()||Date.now()),e.preventDefault()))}function Y(i,s,l){g[s]=1,P(function(){var e,n,t,r,a=I.length,o=D[i];if(e=o.pf)if("DIV"===e.nodeName){for(t=e.firstChild;t;){if(r=t.nextElementSibling,(t.href||t.src).slice(a)==s){e.removeChild(t);break}t=r}e.firstChild||((n=e.parentNode)&&n.removeChild(e),delete o.pf,b===e&&(b=null),F[q[l][1]]=null)}else(e.href||e.src).slice(a)==s&&((n=e.parentNode)&&n.removeChild(e),delete o.pf,b===e&&(b=null),F[q[l][1]]=null)})}function H(e,n){var t,r,a;if(e){if(g[n])return 0;if((a=".png"!=(t=n.slice(-4))&&".gif"!=t?a:1)&&!c)return(r=x.createElement("img")).src=n,r}return(r=(t=z[5+e])[1])?t[1]=0:r=t[0].cloneNode(0),e?a&&(r.rel="preload",r.as="image"):n.indexOf("//tiles")||(r.crossOrigin=null),"href"in r?r.href=n:r.src=n,r}function K(e,n){var t,r,a,o=F[e];if("string"==typeof o)a=H(n,o),n&&(a.onload=function(e){});else{for(a=z[3+n][1],t=z[3+n][1]=0;t<o.length;t++)(r=H(n,o[t]))&&a.appendChild(r);a.firstChild||(a=0)}return F[e]=a}function J(e,n){return e!==n&&(e&&n?S.replaceChild(n,e):(e&&S.removeChild(e),n&&S.appendChild(n))),n}P(B),i.pg=O.onpageshow,i.pgh=O.onpagehide,D[A]=i,h=[y],history.state!==d&&history.replaceState(d,0,N.href),addEventListener("touchstart",p,{passive:!0}),addEventListener("mousedown",p,{passive:!0}),addEventListener("focus",p,{passive:!0,capture:!0}),addEventListener("click",C),(onpopstate=function(e){var n,t,r,a,o,i,s=N.pathname,l=N.hash;null!==(e=e.state)&&(A==s&&u!=l?u=l:((n=(r=(t=h[d])[0]).pgh)&&n({},A),e===d||e>=h.length?(O.onpagehide=null,N.reload()):(o=(a=h[e])[3],i=a[0],A=s,u=l,f.removeChild(t[1]),J(r.style,i.style),j=J(j,i.pc),b=J(b,i.pf),d=e,T=o,f.appendChild(a[1]),O.y=i.y,O.onpageshow=n=i.pg,O.onpagehide=i.pgh,n&&n({persisted:1}))))}).p=[C,p]}();