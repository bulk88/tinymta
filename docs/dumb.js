!function(){if(history.pushState){var e,t,d,w,E,N,S,s,c,h=document.documentElement,T=h.firstChild,x={},m=0,A=location.pathname,u=location.hash,j=q(location.pathname),O=[,[0,5],,[3,8],[2,7],[0,4],[0,4],[1,6],[,9]],L=["//backend-unified.mylirr.org","//otp-mta-prod.camsys-apps.com","//collector-otp-prod.camsys-apps.com",["//tiles1.tinymta.us.to","//tiles2.tinymta.us.to"],"/rstop.htm","/rtrain.htm","/stop.htm","/status.htm","/tileMap.htm",["/mapTileBackground.png","/zoom_out.png","/zoom_in.png","/transparentTile.gif"]],M=document.createElement("style"),g=document.createElement("body");this.fetch||this.f||(f=1,T.appendChild(document.createElement("script")).src="/f.js");var n,o,a={body:document.body,style:T.getElementsByTagName("style")[0],y:y},i=[a,a.body,A+u,j],r=T.querySelectorAll('link[rel="preconnect"]');if(r.length){if(1<r.length){for(o=document.createElement("div"),n=0;n<r.length;n++)o.appendChild(r[n]);T.appendChild(o)}else o=r[0];o="DIV"===(w=L[O[j][0]]=a.pc=o).nodeName?w.firstChild:w,(s=o.cloneNode(0)).removeAttribute("href")}else alert("bug");if((r=T.querySelectorAll('link[rel="prefetch"]')).length){if(1<r.length){for(o=document.createElement("div"),n=0;n<r.length;n++)o.appendChild(r[n]);T.appendChild(o)}else o=r[0];o="DIV"===(w=L[O[j][1]]=a.pf=o).nodeName?w.firstChild:w,(c=o.cloneNode(0)).removeAttribute("href")}else alert("bug");function q(e){var t;switch(e){case"/tileMap.htm":t=8;break;case"/stations.htm":t=7;break;case"/mn/stations.htm":t=6;break;case"/li/stations.htm":t=5;break;case"/":t=4;break;case"/stop.htm":t=3;break;case"/status.htm":t=2;break;case"/rstop.htm":t=1;break;case"/rtrain.htm":t=0;break;default:return}return t}function l(e){var t,n,o,a,i,r,l="touchstart"===e.type;if("A"===(e="FONT"===(e=e.target).nodeName?e.parentNode:e).nodeName&&(l||!e.tmts)&&(t=e.hash,(g="/"==(g=e.pathname).charAt(0)?g:"/"+g)!==location.pathname)){if((r=q(g))<4&&(t=t.slice(1),window.S={t:Date.now(),s:t,f:function(e){a?e(a):i=e}},fetch(3===r?"//otp-mta-prod.camsys-apps.com/otp/routers/default/nearby?timerange=1800&apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE&stops=MTASBWY:"+t.slice(0,3):2===r?"//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP":1===r?"//backend-unified.mylirr.org/arrivals/"+t:"//backend-unified.mylirr.org/locations/"+t+"?geometry=NONE",1<r?{}:{headers:{"accept-version":"3.0"}}).then(function(e){i?i(e):a=e}),2===r)&&(R=0,T.appendChild(document.createElement("script")).src="routes.js"),8===r&&(n=function(e){window.S={t:Date.now(),s:t,pt:r,pr:e.body},e.js(e.body,t)}),!(o=x[g])||o.p1&&void 0===N){var s,c,p,d,h,m,f,u=g,g=r,C=n,v={},b=A,k=j;try{-1!=u.indexOf("/stations")&&(v.p1=m=1,void 0===N?(onpopstate.o=h=function(e,t){t?T.removeChild(d):N=e||0,d.onerror=0,onpopstate.o=0,f?f():f=1},T=document.documentElement.firstChild,(d=document.createElement("script")).onerror=function(){h(0,1)},d.src="1p.js",T.appendChild(d)):f=1),(s=O[g])&&(c=s[0],(p=L[c])&&p.length&&(p=I(c,0)),(v.pc=p)&&(w&&T.removeChild(w),w=T.appendChild(p)),c=s[1],(p=L[c])&&p.length&&(pFIdxToFree=c,p=I(c,1)),v.pf=p)&&(E&&T.removeChild(E),E=T.appendChild(p)),fetch(u,{},1).then(function(e){e.text().then(function(e){var t,n,o,a,i,r;-1!=(t=e.indexOf("<style>"))?(a=e.slice(t+="<style>".length,t=e.indexOf("</style>",t)),t+=8,o=0,":root{color-scheme:light dark}"!=a||(o=S)||(i=1),o||((o=M.cloneNode(0)).textContent=a,i&&(S=o)),v.style=o):t=0,-1!=(scriptStart=e.indexOf("<script>",t))&&(a=y,i=window.onpageshow,window.onpageshow=null,n=e.indexOf("<\/script>",scriptStart+"<script>".length),Function(e.slice(scriptStart+"<script>".length,n))(),(r=(o=v.js=onhashchange).body)&&delete o.body,v.y=y,v.pg=window.onpageshow,y=a,window.onpageshow=i,onhashchange=null),-1==e.indexOf("No javascript",t)&&(e=-1!=scriptStart?e.slice(t,scriptStart)+e.slice(n+"<\/script>".length):e.slice(t),(o=document.createElement("html")).innerHTML=e,v.body=o=o.lastElementChild,r&&r(o),"SCRIPT"==(e=o.lastElementChild).nodeName)&&o.removeChild(e),!m||f?(x[u]=v,C&&C(v),D(b,u,k)):f=function(){x[u]=v,C&&C(v),D(b,u,k)}})})}catch(e){}}else n&&n(o);e.tmts=l}}function D(r,l,s){(this.requestIdleCallback||this.requestAnimationFrame||function(e){setTimeout(e,40)})(function(){var e,t,n,o,a=location.origin.length,i=x[r];if(e=i.pf)if("DIV"===e.nodeName){for(n=e.firstChild;n;){if(o=n.nextElementSibling,n.href.slice(a)==l){e.removeChild(n);break}n=o}e.firstChild||((t=e.parentNode)&&t.removeChild(e),delete i.pf,E===e&&(E=null),L[O[s][1]]=null)}else e.href.slice(a)==l&&((t=e.parentNode)&&t.removeChild(e),delete i.pf,E===e&&(E=null),L[O[s][1]]=null)})}function I(e,t){var n,o,a,i,r,l=L[e];if("string"==typeof l)a=(t?c:s).cloneNode(0),".png"!=(r=l.slice(-4))&&".gif"!=r||(a.rel="preload",a.as="image"),a.href=l;else for(a=document.createElement("div"),n=0;n<l.length;n++)o=(t?c:s).cloneNode(0),".png"!=(r=(i=l[n]).slice(-4))&&".gif"!=r||(o.rel="preload",o.as="image"),o.href=i,a.appendChild(o);return L[e]=a}function p(e){+(e=[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,0,1,2,3,4,5,6,7,8,9,,,,,,,,2,,,3,,,4,,,5,,,6,,,7,,,,8,,,9,,,,,,,,,,2,,,3,,,4,,,5,,,6,,,7,,,,8,,,9][e.keyCode])===e&&(e=document.querySelector('[accesskey="'+e+'"]'))&&e.click()}for((el_fn=window.onpageshow)?a.pg=el_fn:window.onpageshow=function(e){a.pg=e,window.onpageshow=e},x[A]=a,d=[i],history.state!==m&&history.pushState(m,0,location.href),addEventListener("touchstart",l,{passive:!0}),addEventListener("mousedown",l,{passive:!0}),addEventListener("click",function(e){var t,n,o,a,i,r,l,s,c,p=e.target;if("A"===(p="FONT"===p.nodeName?p.parentNode:p).nodeName){switch(o="/"==(o=p.pathname).charAt(0)?o:"/"+o){case"/tileMap.htm":i=8;break;case"/stations.htm":i=7;break;case"/mn/stations.htm":i=6;break;case"/li/stations.htm":i=5;break;case"/":i=4;break;case"/stop.htm":i=3;break;case"/status.htm":i=2;break;case"/rstop.htm":i=1;break;case"/rtrain.htm":i=0;break;default:return}(t=x[o])?(a=p.hash,l=o===location.pathname&&a!=location.hash,(s=(r=d[m])[0]).p1&&N&&j!==i&&N({}),l||(h.removeChild(r[1]),(n=s.style)!==(s=t.style)&&(n&&T.removeChild(n),s)&&T.appendChild(s),w!==(s=t.pc)&&(w&&T.removeChild(w),w=s)&&T.appendChild(s),E!==(s=t.pf)&&(E&&T.removeChild(E),E=s)&&T.appendChild(s)),r=d[++m]=[],(c=(s=window.S)&&s.pr&&(window.S=0,s.pt===i)&&s.s===a&&Date.now()-s.t<3e3?s.pr:c)||(n=(n=this.T)&&n.GC)&&n(),d.length=m+1,c?r[1]=h.appendChild(c):t.body?r[1]=l?t.body:h.appendChild(t.body):r[1]=h.appendChild(g.cloneNode(0)),history.pushState(m,0,p.href),l||(e.preventDefault(),y=t.y,window.onpageshow=t.pg,(s=t.js)&&!c&&s(),A=o,u=a,8==(j=i)&&t.pf&&(D(o,"/mapTileBackground.png",8),D(o,"/zoom_out.png",8),D(o,"/zoom_in.png",8),D(o,"/transparentTile.gif",8))),r[0]=t,r[2]=o+a,r[3]=i):console.log("on click no cache spa ent")}}),onpopstate=function(e){var t,n,o,a,i=location.pathname,r=location.hash;null!==(e=e.state)&&(A==i&&u!=r?(u=r,console.log("spa leave 1")):e===m||e>=d.length?(console.log("spa leave 2"),location.reload()):(n=(t=d[m])[0],a=(o=d[e])[3],A=i,u=r,i=o[0],n.p1&&N&&j!==a&&N({}),h.removeChild(t[1]),(r=n.style)!==(t=i.style)&&(r&&T.removeChild(r),t)&&T.appendChild(t),w!==(t=i.pc)&&(w&&T.removeChild(w),w=t)&&T.appendChild(t),E!==(t=i.pf)&&(E&&T.removeChild(E),E=t)&&T.appendChild(t),m=e,j=a,h.appendChild(o[1]),y=i.y,onpageshow=r=i.pg,r&&r({persisted:1})))},addEventListener("keyup",p,0),addEventListener("keypress",p,0),e=T.firstChild;e;)"preconnect"===e.rel&&((t=document.createElement("link")).rel="dns-prefetch",t.href=e.href,T.appendChild(t)),e=e.nextElementSibling}this.ScriptEngineMajorVersion&&(ScriptEngineMajorVersion()<5||5===ScriptEngineMajorVersion()&&ScriptEngineMinorVersion()<5)&&(onload=function(){for(var e,t,n,o,a=document.links,i=a.length,r=0;r<i;r++)e=(t=a[r]).pathname,n?n===e&&(t.pathname=o):(t=e.length-8,"s"!==(o=e.charAt(t))&&"a"!==o||!~e.indexOf("s"===o?"stop":"atus",t)||(o=(n=e).slice(0,-4)+"ie50.htm",r--));onload=null})}();