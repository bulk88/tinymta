<meta content=0 name=mobileoptimized><meta content=no-referrer name=referrer><link href="//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP"rel=preload as=fetch crossorigin><link href=routes.js rel=preload as=fetch crossorigin><link href=//collector-otp-prod.camsys-apps.com rel=dns-prefetch><link href=//collector-otp-prod.camsys-apps.com rel=preconnect>No javascript<script>var _,t="/routes.js",e="//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP",r="<a href=javascript:history.back()>Back</a> Refresh[<a href=javascript:n()>Fast</a> <a href=\"javascript:location.replace('status_.htm')\">Slow</a>] <a href="+t+">RawR</a> <a href="+e+">RawA</a><br>",v,w;function n(){l(t),l(e,1),document.body.innerHTML=r}function b(t,e){e={1:"EE352E",2:"EE352E",3:"EE352E",4:"00933C",5:"00933C","5X":"00933C",6:"00933C","6X":"00A65C",7:"B933AD","7X":"B933AD",A:"2850AD",B:"FF6319",C:"2850AD",D:"FF6319",E:"2850AD",F:"FF6319",FX:"FF6319",G:"6CBE45",GS:"6D6E71",J:"996633",L:"A7A9AC",M:"FF6319",N:"FCCC0A",Q:"FCCC0A",R:"FCCC0A",W:"FCCC0A",Z:"996633"}[e||t];return e?"<font color="+e+">"+t+"</font>":t}function a(t){for(var r,n,a,i={},o=Math.round(Date.now()/1e3),e=0;e<t.length;e++){r=t[e],n=!1;try{r.alert["transit_realtime.mercury_alert"]&&r.alert.active_period&&(a=r.alert["transit_realtime.mercury_alert"].hasOwnProperty("display_before_active"),~r.id.indexOf("planned_work")&&!a?n=!1:r.alert.active_period.forEach(function(t){var e;t.start&&!n&&(e=t.start,a&&(e-=r.alert["transit_realtime.mercury_alert"].display_before_active),e<o&&(n=!0),t.end)&&o>t.end&&(n=!1)}))}catch(s){console.log(s)}n&&r.alert.informed_entity.forEach(function(t){var e;(e=t.route_id)&&(e=e.toLowerCase(),(t=(t=i[t.agency_id]=i[t.agency_id]||{})[e]=t[e]||[]).push(r))})}return i}function S(t){for(var e,r=!1,n=!1,a=0;a<t.length;a++){if("en-html"===(e=t[a]).language)return e.text;"en"===e.language?r=e.text:""===e.language&&(n=e.text)}return r||n||!1}function A(t){return"string"==typeof t&&!(t=t.replace(/(<p style="min-height:10px"><\/p>|<p><\/p>)+$/g,"")).indexOf("<p>")&&~t.indexOf("</p>",t.length-4)?t.slice(3,-4):t}function C(t){return t.originalStatus.alert["transit_realtime.mercury_alert"].human_readable_active_period}function E(t){return S(t.originalStatus.alert["transit_realtime.mercury_alert"].human_readable_active_period.translation)}function i(t){v="object"==typeof(t=t.contents||t)?t:eval("0,"+t),w&&s()}function o(t){w=a(("object"==typeof(t=t.contents||t)?t:this.JSON?JSON.parse(t):eval("0,"+t)).entity),v&&s()}function s(){function t(t,r,n){var a=[];return t.forEach(function(t){var e,f=(""+t[0]).toLowerCase(),h=n[t[3]||0];(e=(e=r[h])&&e[f])&&0<(e=e.map(function(t){var e,r,n,a,i,o=1,s=t.alert.informed_entity.find(function(t){return t.agency_id===h&&t.route_id.toLowerCase()==f?1:0}),l=(s.trip&&(o=s.trip.direction_id),u="No Status Summary",u=(l=t).alert["transit_realtime.mercury_alert"]?l.alert["transit_realtime.mercury_alert"].alert_type:u),u=!!(u=(u=t).alert.description_text)&&S(u.translation),c=!!(c=(c=t).alert.header_text)&&S(c.translation),s=(p=-10,p=(s=s)["transit_realtime.mercury_entity_selector"]&&s["transit_realtime.mercury_entity_selector"].sort_order?(p=s["transit_realtime.mercury_entity_selector"].sort_order.split(":"))[2]?+p[2]:100:p),p=(i=a=p=null,(e=t).alert.active_period&&(r=Math.round(Date.now()/1e3),n=!1,e.alert.active_period.forEach(function(t){t.start&&(r>t.start&&(n=t),t.end)&&r>t.end&&(n=!1)}),p=n.start?new Date(1e3*n.start).toISOString():null,a=n.end?new Date(1e3*n.end).toISOString():null),{startDate:p,endDate:a,creationDate:i=e.alert["transit_realtime.mercury_alert"]?new Date(1e3*e.alert["transit_realtime.mercury_alert"].created_at).toISOString():i});return Object.assign({id:t.id,statusSummary:l,statusDescription:u,statusTitle:c,priority:s,direction:o,originalStatus:t},p)})).length&&(t[5]=e),a.push(t)}),a}function e(t){t.sort(function(t,e){return t[4]-e[4]})}function r(t,e){var r="";return r=e.length?(r+="<hr>"+t+"<br>")+e.map(function(t){var e,r=t[5]&&t[5].length;return"<hr>"+(r?"<details><summary>":"")+"<font color="+t[2]+">"+t[1]+"</font> "+((e=t)[5]&&e[5].length?e[5][0].statusSummary:"On or Close")+(r?"</summary>"+t[5].map(function(t){return"<b>"+t.statusSummary+"</b><br>"+A(t.statusTitle)+(C(t)?"<br>"+E(t):"")+"<br>"+(t.statusDescription?A(t.statusDescription):"")}).join("<hr>")+"</details>":"")}).join(""):r}for(var n,a,i,o,s,l,u,c,p,f=(new Date).toLocaleTimeString("en-US")+(_?" via JSONP":" via CORS")+"<br>",h={mnrLines:[],subwayLines:[],longIslandLines:[],goodServiceLines:[],alertedBuses:[]},d=(u=h,c=t(v[2],w,["MTASBWY"]),i=u.subwayLines,o=u.goodServiceLines,(u.allSubwayLines=c).forEach(function(t){(t[5]?i:o).push(t)}),e(i),e(o),u=h,c=t(v[1],w,["LI","MNR"]),s=u.longIslandLines,l=u.mnrLines,c.forEach(function(t){(t[3]?l:s).push(t),t[5]&&t[5].sort(function(t,e){return e.priority-t.priority})}),u=h,c=t(v[0],w,["MTA NYCT","MTABC"]),p=u.alertedBuses,(u.busRoutes=c).forEach(function(t){t[5]&&(t[5].sort(function(t,e){return e.priority-t.priority}),p.push(t))}),function(t){for(var e,r,n,a={},i=[],o=0;o<t.length;o++)(e=t[o])[5].sort(function(t,e){return e.priority-t.priority}),((r=a[r=(n=e[5][0]).statusSummary.toLowerCase().replace(/\s/g,"-")]=a[r]||{status:n.statusSummary,priority:n.priority}).lines=r.lines||[]).push(e);for(r in a)i.push(a[r]);return i.sort(function(t,e){return e.priority-t.priority}),i}(h.subwayLines)),m=0;m<d.length;m++){var g=d[m];for(f+="<hr>"+g.status+"<br>",g=g.lines,a=0;a<g.length;a++)f=(f+="<details><summary>"+b("["+(n=g[a])[1]+"]",n[1])+"</summary>")+n[5].map(function(t){return"<b>"+t.statusSummary+"</b><br>"+A(t.statusTitle).replace(/\[(\w+)\]/g,b)+(C(t)?"<br>"+E(t):"")+"<br>"+(t.statusDescription?A(t.statusDescription).replace(/\[(\w+)\]/g,b):"")}).join("<hr>")+"</details>"}if((d=h.goodServiceLines).length)for(f+="<hr>No Active Alerts<br>",m=0;m<d.length;m++)f+=b("["+(n=d[m][1])+"]",n)+" ";f=(f=(f+=r("Metro-North Railroad",h.mnrLines))+r("Long Island Rail Road",h.longIslandLines))+r("Bus",h.alertedBuses),document.body.innerHTML+=f,v=w=void 0}function l(t,e,r){var x=this.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");try{if(_)throw 0;x.open("GET",t,1);try{e&&(x.responseType="json")}catch(n){}x.onreadystatechange=function(){4==x.readyState&&(200==x.status?"withCredentials"in x||x.getResponseHeader("Date")?(e?o:i)(x.response):l(t,e,1):alert("error HTTP status "+x.status))},r&&x.setRequestHeader("if-modified-since",new Date(0)),x.send()}catch(a){(a=document.createElement("script")).src=(e?"/api/alt":"/api/rts")+"?callback="+(e?"o":"i"),1<(_=document.getElementsByTagName("head")[0]).childNodes.length&&_.removeChild(_.childNodes[1]),_.appendChild(a)}}n(),"function"!=typeof Object.assign&&(Object.assign=function(t,e){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),n=1;n<arguments.length;n++){var a=arguments[n];if(null!=a)for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])}return r}),Array.prototype.find||(Array.prototype.find=function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=Object(this),r=e.length>>>0,n=arguments[1],a=0;a<r;a++){var i=e[a];if(t.call(n,i,a,e))return i}}),Array.prototype.filter||(Array.prototype.filter=function(t){"use strict";if(null==this)throw new TypeError;var e,r,n,a,i=Object(this),o=i.length>>>0;if("function"!=typeof t)throw new TypeError;for(e=[],r=arguments[1],n=0;n<o;n++)n in i&&(a=i[n],t.call(r,a,n,i))&&e.push(a);return e}),Array.prototype.map||(Array.prototype.map=function(t,e){var r,n,a;if(null==this)throw new TypeError(" this is null or not defined");var i,o=Object(this),s=o.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(e&&(r=e),n=Array(s),a=0;a<s;)a in o&&(i=o[a],i=t.call(r,i,a,o),n[a]=i),a++;return n}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){"use strict";for(var r=0,n=this.length;r<n;++r)r in this&&t.call(e,this[r],r,this)}),Date.now||(Date.now=function u(){return(new Date).getTime()}),Date.prototype.toISOString||(Date.prototype.toISOString=function(){var t=1+this.getMonth(),e=this.getDay();return this.getFullYear()+"-"+(t<10?"0"+t:t)+"-"+(e<10?"0"+e:e)})</script>