!function(){var h,b,k,w,j,E,N,O=window,x=location,f=document.documentElement,A=f.firstChild,D={},m=0,S=x.pathname,u=x.hash,I=x.origin,T=M(S),V={headers:{"accept-version":"3.0"}},q=[,[0,5,12],[,,!Object.values],[3,8,4],[2,7,4],[0,4,2],[0,4,2],[1,6,2],[,9,!O.requestIdleCallback],[]],r={},L=["//backend-unified.mylirr.org","//otp-mta-prod.camsys-apps.com","//collector-otp-prod.camsys-apps.com",["//tiles1.tinymta.us.to","//tiles2.tinymta.us.to"],"/rstop.htm","/rtrain.htm","/stop.htm","/status.htm","/tileMap.htm",["/bk.png","/zo.png","/zi.png","/ts.gif"]],F=[["/f.js"],["/1p.js",function(){w=(w=history.pushState.p1[0])||null,delete history.pushState.p1}],["/fav.js"],["/dumb.js"]],z=["style","body","html","div",,"link",0],P=O.requestIdleCallback||(O.requestIdleCallback=O.requestAnimationFrame?function(e){requestAnimationFrame(function(){requestAnimationFrame(e)})}:function(e){return setTimeout(e,40)});function B(){for(var e,n=0;n<z.length;n++)(e=z[n])[1]||(e[1]=e[0].cloneNode(0))}O.fetch||O.f||(O.f=1,A.appendChild(document.createElement("script")).src="/f.js");var e,n,t,o,a,i={body:document.body,style:A.getElementsByTagName("style")[0],y:O.y},p=[i,i.body,S+u,T],d=I.length,s=function(){var e,n=navigator.userAgent,t=n.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(t[1]))return e=/\brv[ :]+(\d+)\.(\d+)/g.exec(n)||[],{name:"Explorer",major:parseInt(e[1]||""),minor:parseInt(e[2]||"")};if("Chrome"===t[1]){var o;if(null!=(e=n.match(/\b(OPR|Edge)\/(\d+)\.(\d+)/)))return{name:(o=e.slice(1).toString().split(","))[0].replace("OPR","Opera"),major:parseInt(o[1]),minor:parseInt(o[2])}}t=t[2]?[t[1],t[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=n.match(/version\/(\d+)\.(\d+)/i))&&(t.splice(1,1,e[1]),t[2]=e[2]);return{name:t[0],major:parseInt(t[1]),minor:parseInt(t[2])}}();for((e=O.applicationCache)&&(e.onupdateready=function(){var e=O.applicationCache;e.swapCache(),e.onupdateready=null},("Chrome"==s.name&&8<=s.major||"Firefox"==s.name&&2<=s.major||"Opera"==s.name&&15<=s.major||"Explorer"==s.name&&11<=s.major)&&0,0),t=0;t<z.length;t++)n=(e=z[t])?document.createElement(e):n.cloneNode(0),z[t]=[n];if(z[6][0].rel="prefetch",(n=z[5][0]).rel="preconnect",n.crossOrigin="anonymous",B(),(o=A.querySelectorAll('link[rel="preconnect"]')).length){if(1<o.length){for(a=z[3][1],t=z[3][1]=0;t<o.length;t++)a.appendChild(o[t]);A.appendChild(a)}else a=o[0];b=L[q[T][0]]=i.pc=a}if((o=A.querySelectorAll('link[rel="prefetch"]')).length){if(1<o.length){for(a=z[4][1],t=z[4][1]=0;t<o.length;t++)a.appendChild(o[t]);A.appendChild(a)}else a=o[0];k=L[q[T][1]]=i.pf=a}for(a={},t=0;t<F.length;t++)a[F[t][0]]=t+1;for(o=A.getElementsByTagName("script"),t=0;t<o.length;t++)(n=a[n=(n=o[t]).src.slice(d)])&&((e=F[--n][1])&&e(),F[n]=0);function M(e){var n;switch(e){case"/tileMap.htm":n=8;break;case"/stations.htm":n=7;break;case"/mn/stations.htm":n=6;break;case"/li/stations.htm":n=5;break;case"/":n=4;break;case"/stop.htm":n=3;break;case"/status.htm":n=2;break;case"/rstop.htm":n=1;break;case"/rtrain.htm":n=0;break;default:n=9}return n}function l(e){var t,n,o,r,a=e.target;if(!a.window&&"A"===(a="FONT"===a.nodeName?a.parentNode:a).nodeName&&a.href!=E&&(E=a.href,!a.href.indexOf(I))&&(t=a.hash,n=a.pathname,console.log("in pl",n),(n="/"==n.charAt(0)?n:"/"+n)!==x.pathname)){var i,s,l=M(n);if("focus"!=e.type?(l<4&&(t=t.slice(1),O.S={t:Date.now(),s:t,f:function(e){i?e(i):s=e}},fetch(3===l?"//otp-mta-prod.camsys-apps.com/otp/routers/default/nearby?timerange=1800&apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE&stops=MTASBWY:"+t.slice(0,3):2===l?"//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP":1===l?"//backend-unified.mylirr.org/arrivals/"+t:"//backend-unified.mylirr.org/locations/"+t+"?geometry=NONE",1<l?{}:V).then(function(e){var n,t;s?s(e):i=200==e.status?(e.json().then(function(e){n?n(e):t=e}),{status:200,json:function(){return{then:function(e){t?setTimeout(e,0,t):n=e}}}}):e}),2===l)&&(R=void 0,j=1,A.appendChild(document.createElement("script")).src="routes.js"),8===l&&(o=function(e,n){n?r.pr=n:(O.S=r={t:Date.now(),s:t,pt:l,pr:e.body},e.js(0,t))})):E="",!(a=D[n])||a.pgh&&void 0===w){if(0!==a){D[n]=0;var c,p,d,h,f,m,u=n,e=l,g=o,y={},v=S,C=T;try{if(c=q[e])for(d=c[2],p=0;d;p++)1&d&&F[p]&&(!function(n,t){var o=document.createElement("script");o.onerror=o.onload=function(e){"error"==e.type?A.removeChild(o):((e=F[n][1])&&e(),F[n]=0,o.onerror=o.onload=0),--t[0]||t[1]()},o.src=F[n][0],console.log("spa ld .js ",o.src,O.performance&&O.performance.now()||Date.now()),A.appendChild(o),t[0]++}(p,f=f||[0,function(){1!==m&&m(),m=0}]),m=1),d>>=1;console.log("pl f ",u,O.performance&&O.performance.now()||Date.now()),fetch(u,{},1).then(function(e){console.log("pl f 2 ",u,O.performance&&O.performance.now()||Date.now()),e.text().then(function(e){var n,t,o,r,a,i,s;console.log("pl f 3 ",u,O.performance&&O.performance.now()||Date.now()),-1!=(n=e.indexOf("<script async defer src="))?"/1p.js"==(r=e.slice(n+=24,n=e.indexOf(">",n)))&&(s=1):n=0,-1!=(n=e.indexOf("<style>",n))?(r=e.slice(n+=7,n=e.indexOf("</style>",n)),n+=8,o=0,":root{color-scheme:light dark}"!=r||(o=N)||(a=1),o||(o=z[0][1],z[0][1]=0,P(B),o.textContent=r,a&&(N=o)),y.style=o):n=0,-1!=(a=e.indexOf("<script>",n))&&(r=O.y,t=e.indexOf("<\/script>",a+8),Function(e.slice(a+8,t))(),(i=(o=y.js=onhashchange).body)&&delete o.body,y.y=O.y,O.y=r,onhashchange=null,g)&&g(y),-1==e.indexOf("No javascript",n)&&(e=-1!=a?e.slice(n,a)+e.slice(t+9):e.slice(n),o=z[2][1],z[2][1]=0,P(B),o.innerHTML=e,y.body=o=o.lastElementChild,g&&g(0,o),i)&&i(o),m?m=function(){s&&(y.pgh=w),D[u]=y,Y(v,u,C)}:(s&&(y.pgh=w),D[u]=y,Y(v,u,C))})}),c&&(p=c[0],(d=L[p])&&d.length&&(d=Z(p,0)),b=J(b,y.pc=d),p=c[1],(d=L[p])&&d.length&&(d=Z(p,1)),k=J(k,y.pf=d),P(B)),(h=document.createElement("iframe")).src="stopac.htm",console.log("add stopac el ",O.performance&&O.performance.now()||Date.now()),A.appendChild(h)}catch(e){}}}else o&&o(a)}}function c(e){var n,t,o,r,a,i,s,l,c,p,d=e.target;E="","A"!==(d="FONT"===d.nodeName?d.parentNode:d).nodeName||d.href.indexOf(I)||(a=M(o="/"==(o=d.pathname).charAt(0)?o:"/"+o),(n=D[o])?(r=d.hash,s=o===x.pathname&&r!=x.hash,(l=(c=(i=h[m])[0]).pgh)&&l({},S),2===a&&(j?j=0:(R=void 0,j=1,A.appendChild(document.createElement("script")).src="routes.js")),s||(f.removeChild(i[1]),J(c.style,n.style),b=J(b,n.pc),k=J(k,n.pf)),i=h[++m]=[],(c=O.S)&&c.pr&&(O.S=0,c.pt===a)&&c.s===r&&Date.now()-c.t<3e3&&(p=c.pr),8!=a&&(t=O.T)&&t(),h.length=m+1,p?t=p:(t=n.body)||(t=z[1][1],z[1][1]=0,P(B)),i[1]=s?t:f.appendChild(t),history.pushState(m,0,d.href),s||(e.preventDefault(),O.y=n.y,O.onpageshow=n.pg,O.onpagehide=n.pgh,(l=n.js)&&!p&&l(),S=o,u=r,8==(T=a)&&n.pf&&(Y(o,"/bk.png",8),Y(o,"/zo.png",8),Y(o,"/zi.png",8),Y(o,"/ts.gif",8))),i[0]=n,i[2]=o+r,i[3]=a,console.log("on click have ent ",O.performance&&O.performance.now()||Date.now())):(console.log("on click no cache spa ent ",O.performance&&O.performance.now()||Date.now()),e.preventDefault()))}function Y(i,s,l){r[s]=1,P(function(){var e,n,t,o,r=I.length,a=D[i];if(e=a.pf)if("DIV"===e.nodeName){for(t=e.firstChild;t;){if(o=t.nextElementSibling,t.href.slice(r)==s){e.removeChild(t);break}t=o}e.firstChild||((n=e.parentNode)&&n.removeChild(e),delete a.pf,k===e&&(k=null),L[q[l][1]]=null)}else e.href.slice(r)==s&&((n=e.parentNode)&&n.removeChild(e),delete a.pf,k===e&&(k=null),L[q[l][1]]=null)})}function g(e,n){var t,o;return e&&r[n]?0:((o=(t=z[5+e])[1])?t[1]=0:o=t[0].cloneNode(0),e?".png"!=(t=n.slice(-4))&&".gif"!=t||(o.rel="preload",o.as="image"):n.indexOf("//tiles")||(o.crossOrigin=null),o.href=n,o)}function Z(e,n){var t,o,r,a=L[e];if("string"==typeof a)r=g(n,a),n&&(r.onload=function(e){});else{for(r=z[3+n][1],t=z[3+n][1]=0;t<a.length;t++)(o=g(n,a[t]))&&r.appendChild(o),n&&o&&(o.onload=function(e){});r.firstChild||(r=0)}return L[e]=r}function J(e,n){return e!==n&&(e&&n?A.replaceChild(n,e):(e&&A.removeChild(e),n&&A.appendChild(n))),n}P(B),i.pg=O.onpageshow,i.pgh=O.onpagehide,D[S]=i,h=[p],history.state!==m&&history.replaceState(m,0,x.href),addEventListener("touchstart",l,{passive:!0}),addEventListener("mousedown",l,{passive:!0}),addEventListener("focus",l,{passive:!0,capture:!0}),addEventListener("click",c),(onpopstate=function(e){var n,t,o,r,a,i,s=x.pathname,l=x.hash;null!==(e=e.state)&&(S==s&&u!=l?u=l:((n=(o=(t=h[m])[0]).pgh)&&n({},S),e===m||e>=h.length?(O.onpagehide=null,x.reload()):(a=(r=h[e])[3],i=r[0],S=s,u=l,f.removeChild(t[1]),J(o.style,i.style),b=J(b,i.pc),k=J(k,i.pf),m=e,T=a,f.appendChild(r[1]),O.y=i.y,O.onpageshow=n=i.pg,O.onpagehide=i.pgh,n&&n({persisted:1}))))}).p=[c,l]}();