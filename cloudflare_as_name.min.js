"use strict";let e,t=new TextEncoder;const a=new Int8Array([-119,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,0,70,0,0,0,76,8,6,0,0,0,-48,-75,-63,-30,0,0,1,104,73,68,65,84,120,1,-19,-37,65,110,-124,48,12,-123,97,106,-27,72,62,-109,15,-27,51,-7,78,109,119,44,80,71,93,-64,31,61,-12,-98,-60,122,-62,-121,-47,56,9,-7,-6,-2,-51,-31,92,18,38,48,-116,97,12,99,24,-61,24,-58,48,-94,89,7,-99,-50,-29,-33,-87,-39,6,115,-19,124,121,12,28,10,-128,1,48,120,-96,19,-122,7,-31,-127,120,24,30,4,1,10,30,-123,127,109,-7,-118,-31,81,-80,-22,9,73,20,96,76,33,-119,2,-116,45,-8,31,-42,-64,9,30,69,3,39,48,20,-79,-60,-21,81,58,-31,-65,107,53,-88,26,-127,-50,87,0,39,30,31,72,-115,-41,99,62,2,-119,85,-40,2,49,-10,-93,117,94,126,-113,-121,17,-81,-80,-72,-15,102,88,-84,-102,-13,2,96,-34,-97,78,-61,104,87,76,-89,-48,10,30,-113,115,94,68,-13,-40,-71,9,-90,-26,-2,-101,-24,68,119,9,-30,112,-128,21,-68,-102,-19,-13,40,87,-52,-11,-11,50,12,81,-115,113,56,16,76,13,-14,68,121,24,-3,-59,38,111,-72,121,18,-23,87,9,94,28,-29,97,-12,-77,4,43,2,-103,59,-59,-93,13,86,-89,-20,7,-113,127,84,-116,59,-32,-27,-10,95,5,-90,83,127,39,82,-79,49,-28,55,-11,107,94,-11,109,-34,18,-86,4,-66,98,-128,-101,-105,-101,120,-122,81,-18,-128,-87,81,68,1,96,20,113,48,24,21,-100,26,26,70,0,-89,-58,103,9,-98,122,88,-63,15,-122,65,1,96,4,112,106,68,-114,-2,117,-6,-124,-101,-49,68,106,124,28,4,-64,0,88,62,119,-19,125,37,-61,24,-58,48,-114,97,12,99,24,-61,-20,-122,113,126,0,35,123,-80,-59,19,19,36,-10,0,0,0,0,73,69,78,68,-82,66,96,-126]);var r={"0AR":"Ardsley-on-Hudson","0BC":"Beacon","0BK":"Breakneck Ridge","0CS":"Cold Spring","0CT":"Cortlandt","0DF":"Dobbs Ferry","0DV":"Spuyten Duyvil","0GA":"Garrison","0GD":"Glenwood","0GY":"Greystone","0HB":"Highbridge-Employees","0HL":"Harlem-125 St","0HM":"Croton-Harmon","0HS":"Hastings-on-Hudson","0IV":"Irvington","0LU":"Ludlow","0MB":"Marble Hill","0MH":"Morris Heights","0MN":"Manitou","0NM":"New Hamburg","0NY":"Grand Central","0OS":"Ossining","0PE":"Peekskill","0PM":"Philipse Manor","0PO":"Poughkeepsie","0RV":"Riverdale","0SB":"Scarborough","0TT":"Tarrytown","0UH":"University Heights","0YK":"Yonkers","0YS":"Yankees-E 153 St","1AT":"Appalachian Trail","1BG":"Botanical Garden","1BH":"Bedford Hills","1BR":"Southeast","1BW":"Brewster","1BX":"Bronxville","1CF":"Croton Falls","1CQ":"Chappaqua","1CW":"Crestwood","1DO":"Dover Plains","1FO":"Fordham","1FW":"Fleetwood","1GO":"Goldens Bridge","1HA":"Hartsdale","1HN":"Hawthorne","1KA":"Katonah","1MK":"Mt Kisco","1ML":"Melrose","1MP":"Mt Pleasant","1MW":"Mt Vernon West","1NW":"North White Plains","1PA":"Patterson","1PV":"Pleasantville","1PW":"Pawling","1PY":"Purdy's","1SC":"Scarsdale","1TK":"Tuckahoe","1TM":"Tenmile River","1TR":"Tremont","1VA":"Valhalla","1WA":"Wassaic","1WF":"Wakefield","1WG":"Williams Bridge","1WI":"Harlem Valley-Wingdale","1WN":"Woodlawn","1WP":"White Plains","2BP":"Bridgeport","2CC":"Cos Cob","2DA":"Darien","2EN":"East Norwalk","2FF":"Fairfield","2FM":"Fairfield Metro","2GF":"Green's Farms","2GN":"Greenwich","2HS":"Harrison","2LA":"Larchmont","2MA":"Mamaroneck","2ME":"Mt Vernon East","2MI":"Milford","2NH":"New Haven","2NO":"Noroton Heights","2NR":"New Rochelle","2OG":"Old Greenwich","2PC":"Port Chester","2PH":"Pelham","2RO":"Rowayton","2RS":"Riverside","2RY":"Rye","2SM":"Stamford","2SN":"South Norwalk","2SP":"Southport","2SR":"Stratford","2SS":"New Haven-State St","2WH":"West Haven","2WP":"Westport","3GB":"Glenbrook","3NC":"New Canaan","3SD":"Springdale","3TH":"Talmadge Hill","4BE":"Bethel","4BV":"Branchville","4CA":"Cannondale","4DN":"Danbury","4M7":"Merritt 7","4RD":"Redding","4WI":"Wilton","5AN":"Ansonia","5BF":"Beacon Falls","5DB":"Derby-Shelton","5NG":"Naugatuck","5SY":"Seymour","5WB":"Waterbury",ABT:"Albertson",ADL:"Auburndale",AGT:"Amagansett",ATL:"Atlantic Terminal",AVL:"Amityville",BDY:"Broadway",BHN:"Bridgehampton",BK:"Stony Brook",BMR:"Bellmore",BOL:"Bolands-Employees",BPG:"Bethpage",BPT:"Bellport",BRS:"Bellerose",BRT:"Belmont Park",BSD:"Bayside",BSR:"Bay Shore",BTA:"Babylon",BWD:"Brentwood",BWN:"Baldwin",CAV:"Centre Av",CHT:"Cedarhurst",CI:"Central Islip",CLP:"Country Life Press",CPG:"Copiague",CPL:"Carle Place",CSH:"Cold Spring Harbor",DGL:"Douglaston",DPK:"Deer Park",EHN:"East Hampton",EMT:"Elmont-UBS Arena",ENY:"East New York",ERY:"East Rockaway",EWN:"East Williston",FHL:"Forest Hills",FLS:"Flushing Main Street",FMD:"Farmingdale",FPK:"Floral Park",FPT:"Freeport",FRY:"Far Rockaway",GBN:"Gibson",GCT:"Grand Central",GCV:"Glen Cove",GCY:"Garden City",GHD:"Glen Head",GNK:"Great Neck",GPT:"Greenport",GRV:"Great River",GST:"Glen Street",GVL:"Greenvale",GWN:"Greenlawn",HBY:"Hampton Bays",HEM:"Hempstead",HGN:"Hempstead Gardens",HIL:"Hillside-Employees",HOL:"Hollis",HPA:"Hunterspoint Av",HUN:"Huntington",HVL:"Hicksville",HWT:"Hewlett",IPK:"Island Park",ISP:"Islip",IWD:"Inwood",JAM:"Jamaica",KGN:"Kew Gardens",KPK:"Kings Park",LBH:"Long Beach",LCE:"Lawrence",LHT:"Lindenhurst",LIC:"Long Island City",LMR:"Locust Manor",LNK:"Little Neck",LTN:"Laurelton",LVL:"Locust Valley",LVW:"Lakeview",LYN:"Lynbrook",MAK:"Mattituck",MAV:"Merillon Av",MFD:"Medford",MHL:"Murray Hill",MHT:"Manhasset",MIN:"Mineola",MPK:"Massapequa Park",MQA:"Massapequa",MRK:"Merrick",MSY:"Mastic-Shirley",MTK:"Montauk",MVN:"Malverne",NAV:"Nostrand Av",NBD:"Nassau Blvd",NHP:"New Hyde Park",NPT:"Northport",NYK:"Penn Station",OBY:"Oyster Bay",ODE:"Oceanside",ODL:"Oakdale",PDM:"Plandome",PGE:"Patchogue",PJN:"Port Jefferson",PLN:"Pinelawn",PWS:"Port Washington",QVG:"Queens Village",RHD:"Riverhead",RON:"Ronkonkoma",ROS:"Rosedale",RSN:"Roslyn",RVC:"Rockville Centre",SAB:"St. Albans",SCF:"Sea Cliff",SFD:"Seaford",SHD:"Southold",SHN:"Southampton",SJM:"St. James",SMR:"Stewart Manor",SPK:"Speonk",SSM:"Mets-Willets Point",STN:"Smithtown",SVL:"Sayville",SYT:"Syosset",VSM:"Valley Stream",WBY:"Westbury",WDD:"Woodside",WGH:"Wantagh",WHD:"West Hempstead",WHN:"Westhampton",WMR:"Woodmere",WWD:"Westwood",WYD:"Wyandanch",YPK:"Yaphank",_GC:"Grand Central"};function n(e,t){return new Response("document.body.appendChild(document.createTextNode("+JSON.stringify(e)+"))",{headers:{"content-type":"text/javascript","cache-control":"no-cache, no-transform",...t}})}function o(e,t){var a={1:"EE352E",2:"EE352E",3:"EE352E",4:"00933C",5:"00933C","5X":"00933C",6:"00933C","6X":"00A65C",7:"B933AD","7X":"B933AD",A:"2850AD",B:"FF6319",C:"2850AD",D:"FF6319",E:"2850AD",F:"FF6319",FX:"FF6319",G:"6CBE45",GS:"6D6E71",J:"996633",L:"A7A9AC",M:"FF6319",N:"FCCC0A",Q:"FCCC0A",R:"FCCC0A",W:"FCCC0A",Z:"996633"}[t||e];return a?"<font color="+a+">"+e+"</font>":e}function s(e,t){for(t in e=e.split(/[: T-]/))e[t]=parseFloat(e[t]);return"Min "+Math.floor(Math.abs((new Date(e[0],e[1]-1,e[2],e[3]||0,e[4]||0,e[5]||0,0)-new Date((new Date).toLocaleString("en-US",{timeZone:"America/New_York"})))/1e3)/60)}async function i(i,c){var u=new URL(i.url),d=u.pathname;if(console.log(d),"/favicon.ico"===d)return new Response(a,{headers:{"cache-control":"max-age=691200,no-transform","content-type":"image/vnd.microsoft.icon","x-v8st":e}});if(d.startsWith("/api/")){var h=fetch(("su/"===d.substr(5,3)?"http://otp-mta-prod.camsys-apps.com/otp/routers/default/nearby?timerange=1800&apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE&stops=MTASBWY:":"http://backend-unified.mylirr.org/arrivals/")+d.substring(8),{headers:{"accept-version":"1.5"}});d="/**/ typeof "+(d=(u.searchParams.get("callback")||"_xcallback").replace(/[^\[\]\w$.]/g,""))+" === 'function' && "+d+"({http_code:";var f=(h=await h).headers.get("content-type");return d+=h.status+",content_type:'"+f+"',contents:",h=await h.text(),new Response(d+("application/json"===f?h.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):JSON.stringify(h))+"});",{headers:{"content-type":"text/javascript","cache-control":"no-cache","x-content-type-options":"nosniff"}})}if(d.startsWith("/s/")){if(d=d.substr("/s/".length,3),/^\w+$/.test(d)){var g="http://otp-mta-prod.camsys-apps.com/otp/routers/default/nearby?timerange=1800&apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE&stops=MTASBWY:"+d,y=(h=fetch(g),"<meta content=0 name=mobileoptimized>[1][<a accesskey=1 href="+d+">Refresh</a>] <a href="+g+">Raw</a><br>"),w=[2,3,4,5,6,7,8,9,0];if(200==(h=await h).status){h=h.json();var S,N,C=0,b={};if((D=h=await h).length){for(A in(D=D[0]).alerts,D.groups)for(A in g=(S=D.groups[A]).headsign.replace("Downtown & Brooklyn","Downtown & Bklyn"),S.times)(N=S.times[A]).shortRouteName=S.route.shortName,N.timestamp>C&&(C=N.timestamp),(b[g]=b[g]||[]).push(N);for(A in b)b[A].sort((function(e,t){return e.departureFmt<t.departureFmt?-1:e.departureFmt>t.departureFmt?1:0}));for(A in y+=new Date(1e3*C).toLocaleTimeString("en-US",{timeZone:"America/New_York"})+" via CFW<br>CurSta:"+D.stop.name+"<br>",b)for(A in y+="<a accesskey="+(C=w.shift())+" name="+C+" href=#"+C+">"+A+"</a><br>",S=b[A])y+=s((N=S[A]).departureFmt)+"-"+o(N.shortRouteName)+"-"+N.tripHeadsign+(void 0===N.track?"-Tk?":"")+(N.realtime?"-":"-NRT-")+function(e){switch(e){case"SCHEDULED":return"SCH";case"UPDATED":return"UPD";case"CANCELED":return"CNX";case"ADDED":return"ADD";case"MODIFIED":return"MOD";default:return"UNK"}}(N.realtimeState)+((N=((N=N.departureDelay)<-43200?N+86400:N)/60|0)?(N>0?"-L":"-E")+Math.abs(N):"")+"<br>";for(y+="<br>Key: E2 (early 2 min) L3 (late 3 min)<br>NRT (not realtime)<br><br>",b="",(D=D.alerts||[]).sort((function(e,t){return e.effectiveStartDate<t.effectiveStartDate?-1:e.effectiveStartDate>t.effectiveStartDate?1:0})),A=0;A<D.length&&A<10;A++)(N=D[A]).alertType&&(S=(void 0===(C=w.shift())?N.alertType:"<a accesskey="+C+" href=#"+C+" name="+C+">"+N.alertType+"</a>")+"<br>"+(N.humanReadableActivePeriod||"Ongoing")+"<br>"+N.alertHeaderText.replace(/\[(\w+)\]/g,o)+(N.alertDescriptionText?"<br>"+N.alertDescriptionText.replace(/\[(\w+)\]/g,o):"")+"<br><br>",N.humanReadableActivePeriod?b+=S:y+=S);y+=b}else y="station not found";return new Response(y,{headers:{"content-type":"text/html; charset=utf-8","cache-control":"no-cache, no-store"}})}return h}}else if(d.startsWith("/li/s/")){if(d=d.substr("/li/s/".length,3),/^\w+$/.test(d)){g="http://backend-unified.mylirr.org/arrivals/"+d,h=fetch(g,{headers:{"accept-version":"1.5"}}),y="<meta content=0 name=mobileoptimized>[1][<a accesskey=1 href="+d+">Refresh</a>] <a href="+g+">Raw</a><br>"+(new Date).toLocaleTimeString("en-US",{timeZone:"America/New_York"})+" via CFW<br>CurSta:"+r[d]+"<br><a accesskey=2 name=2 href=#2>East</a><br>";var M="<a accesskey=3 name=3 href=#3>West</a><br>";if(200==(h=await h).status){var A,B,H,D=h.json();for(D=(await D).arrivals,A=0;A<D.length;A++)B=D[A],H=new Date(1e3*(H=B.time)).toLocaleTimeString("en-US",{timeZone:"America/New_York"}).replace(":00 "," ")+"-Min "+Math.ceil((H-new Date((new Date).toLocaleString())/1e3)/60)+"-Tk"+(B.track||"?")+"-<font color="+{11:"60269E",12:"4D5357",BY:"00985F",DN:"EE0034",FR:"6E3219",HA:"0039A6",HH:"006EC7",HM:"CE8E00",HU:"009B3A",LB:"FF6319",MK:"00B2A9",NC:"EE0034",NH:"EE0034",OB:"00AF3F",PJ:"006EC7",PW:"C60C30",RK:"A626AA",WB:"EE0034",WH:"00A1DE"}[B.branch]+">"+r[(H=B.stops)[H.length-1]]+"</font>"+("O"==B.peak_code?"":"-Pk")+"<br>","E"==B.direction?y+=H:M+=H;return y+=M,new Response(y,{headers:{"content-type":"text/html; charset=utf-8","cache-control":"no-cache, no-store"}})}return h}}else if("/routes.json"===d){var E=i.headers.get("if-none-match");return c.respondWith(new Response(E===m?"":p,{status:E===m?304:200,headers:{"content-type":"application/json",etag:m,"cache-control":"no-cache, no-store"}})),c.waitUntil(async function(e){var a,r,n,o,s,i=0,d=fetch("http://otp-mta-prod.camsys-apps.com/otp/routers/default/index/routes?apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE");if(200===(d=await d).status){for(d=d.json(),d=await d;i<d.length;i++)null===(r=d[i]).longName&&delete r.longName,null===r.shortName&&delete r.shortName,null===r.color&&delete r.color;d=l.buildServiceRoutes(d),d=JSON.stringify(d),n=await crypto.subtle.digest("MD5",t.encode(d)),n='W/"'+btoa(String.fromCharCode.apply(null,new Uint8Array(n)))+'"',console.log("o="+m+"n="+n),console.log("etag mismatch");try{a=GHAPISECRET}catch(r){(a=u.searchParams.get("key"))||console.log("GHAPI key is invalid="+a),a="Basic "+a}if(m=n,p=d,d=fetch("https://raw.githubusercontent.com/bulk88/tinymta/master/cloudflare_as_name.js",{cf:{cacheTtlByStatus:-1}}),o=fetch("https://raw.githubusercontent.com/bulk88/tinymta/master/cloudflare_as_name.min.js",{cf:{cacheTtlByStatus:-1}}),d=await d,o=await o,console.log("got old gh script"),200==d.status&&200==o.status){d=await d.text(),o=await o.text(),s=p.replace(/\x27/g,"\\'"),d=d.replace(/let (\w+)='[^']?',(\w+)='[^']?';$/,"let $1='"+n+"',$2='"+s+"';"),o=o.replace(/let (\w+)=(?:'[^']?'|"[^"]?"),(\w+)=(?:'[^']?'|"[^"]?");$/,"let $1='"+n+"',$2='"+s+"';");async function g(e,t){return S("GET",e,t)}async function y(e,t){return S("POST",e,t)}async function w(e,t){return S("PATCH",e,t)}async function S(e,t,r){var n=await fetch("https://api.github.com/"+t,{method:e,headers:{authorization:a,"user-agent":"tinymta_cfw"},...r&&{body:JSON.stringify(r)}});return n.status>=300?(console.log("failed status="+n.status+" ct="+n.headers.get("content-type")+" url="+t),n=await n.text(),console.log(n),n):await n.json()}var h={repository:"bulk88/tinymta"};let N={};var f={gitAuthor:{name:"RoutesBot",email:"bulk88@hotmail.com"}};async function C(e,t,a){let r;var n,o,s,i;f.gitAuthor&&(r={name:f.gitAuthor.name,email:f.gitAuthor.email,date:(n=new Date,o=-n.getTimezoneOffset(),s=o>=0?"+":"-",i=function(e){return(e<10?"0":"")+e},n.getFullYear()+"-"+i(n.getMonth()+1)+"-"+i(n.getDate())+"T"+i(n.getHours())+":"+i(n.getMinutes())+":"+i(n.getSeconds())+s+i(Math.floor(Math.abs(o)/60))+":"+i(Math.abs(o)%60))});const c={message:a,parents:[e],tree:t};return r&&(c.author=r),(await y(`repos/${h.repository}/git/commits`,c)).sha}async function b(e,t){const a={sha:t,force:!0};try{await w(`repos/${h.repository}/git/refs/heads/${e}`,a)}catch(e){if(422===e.statusCode)throw console.log(e+" Branch no longer exists - exiting"),new Error("repository-changed");throw e}}async function M(e){try{return(await g(`repos/${h.repository}/git/refs/heads/${e}`)).object.sha}catch(e){if(404===e.statusCode)throw new Error("repository-changed");if(409===e.statusCode)throw new Error("empty");throw e}}async function A(e){return(await g(`repos/${h.repository}/git/commits/${e}`)).tree.sha}async function B(e){const t={encoding:"base64",content:btoa(e)};return(await y(`repos/${h.repository}/git/blobs`,t)).sha}async function H(e,t){const a={base_tree:e,tree:[]};return t.forEach((e=>{a.tree.push({path:e.name,mode:"100644",type:"blob",sha:e.blob})})),(await y(`repos/${h.repository}/git/trees`,a)).sha}async function D(e,t,a,r=h.baseBranch){try{delete N[e];const o=[];for(const e of t){const t=B(e.contents);o.push({name:e.name,blob:t})}const s=await M(r),i=await A(s);for(var n=0;n<o.length;n++)o[n].blob=await o[n].blob;const c=await H(i,o),l=await C(s,c,a);return await b(e,l),"updated"}catch(e){if(404===e.statusCode)throw new Error("repository-changed");throw e}}console.log("will push commit"),c.waitUntil(D("master",[{name:"cloudflare_as_name.js",contents:d},{name:"cloudflare_as_name.min.js",contents:o}],"Routes Upd "+(new Date).toLocaleString("en-US",{timeZone:"America/New_York"}),"master"))}return!0}}()),null}var v=i?.cf||{asn:676},P=i?.headers?.get("cf-connecting-ip")||"0.0.0.0",R='W/"'+P+"."+v.asn+'"';if(i?.headers?.get("if-none-match")==R)return new Response(null,{status:304});var W="AS"+v.asn;W=String.fromCharCode(W.length)+W+"asncymrucom\0\0\0";h=fetch("https://"+(i?.cf?"1.1.1.1":"cloudflare-dns.com")+"/dns-query",{method:"post",body:"\0\0\0\0\0\0\0\0\0"+W,headers:{"content-type":"application/dns-message"}});var T=(W=(new TextEncoder).encode(W)).byteLength-4;h=await h;var k=await h.arrayBuffer(),L=new DataView(k);if(33152==(33664&L.getUint16(2))&&65537==L.getUint32(4)&&0==L.getUint32(8)){let e,t,a;for(t=1,e=0;e<W.byteLength;e++)if(W[e]!==L.getUint8(e+12)){t=0;break}if(t){let r;for(e+=12,192==(192&L.getUint8(e))?(r=-49153&L.getUint16(e),a=e+2):(r=e,a=e+T),t=1,e=0;e<T;e++)if(W[e]!==L.getUint8(e+r)){t=0;break}if(t&&1048577==L.getUint32(a)&&(a+=8,L.getUint16(a)+(a+=2)==L.byteLength&&L.getUint8(a)+(a+=1)==L.byteLength))return n("Your ISP: "+P+" | AS"+(new TextDecoder).decode(new Uint8Array(L.buffer,a)),{etag:R})}}return n("ERROR: raw data: "+(new TextDecoder).decode(new Uint8Array(k)),{})}async function c(e,t,a,r,n){}addEventListener("fetch",(t=>{e||(e=Date.now()),console.log("v8start "+e);try{t.respondWith(i(t.request,t).catch((e=>console.log("c"+e))))}catch(e){console.log(e+" "+e.stack+" "+e.columnNumber+e.fileName+e.lineNumber)}}));var l={};function u(e){for(var t,a,r,n=[],o=0;o<e.length;o++)if("SUBWAY"===(t=e[o]).mode&&!t.id.indexOf("MTA")){if(a=!1,"X"===(r=t.shortName).substr(r.length-1,r.length)){var s=r.substr(0,r.indexOf("X"));a=n.find((function(e){return"object"==typeof e&&e.name===s?1:0}))}if(a)a.containsExpress=!0;else{var i=t.id.split(":")[0],c=t.id.split(":")[1];n.push({agency:i,agencyId:i,name:c,mode:"SUBWAY",color:t.color,sortOrder:t.sortOrder,id:c})}}return n}function d(e){return e.filter((function(e){return"BUS"===e.mode&&!!~e.id.indexOf("MTA")})).map((function(e){var t="MTA New York City Transit"===e.agencyName?"MTA NYCT":"MTABC";return Object.assign({agency:t,inService:!0,isExpressBus:702===e.routeType,routeId:t+"_"+e.id.split(":")[1],route:e.shortName},e)}))}function h(e){for(var t,a,r=e.filter((function(e){return"RAIL"===e.mode&&!(e.id.indexOf("LI")&&e.id.indexOf("MNR"))})).concat([{id:"MNR:Wassaic",agency:"MNR",color:"0039A6",inService:!0,mode:"RAIL",longName:"Wassaic",routeId:"MNR_Wassaic",routeType:2}]).map((function(e){var t=e.id.indexOf("LI")?"MNR":"LI";return e.inService=!0,e.agency=t,e.agencyId=t,e.route=e.longName,e.routeId=e.routeId?e.routeId:e.id.replace(":","_"),e.mode="RAIL",e.shortName=e.longName,e})).sort((function(e,t){return e.longName<t.longName?-1:1})),n=[],o=[],s=0;s<r.length;s++)"MNR:3"===(e=r[s]).id&&(t=s),"MNR:2"===e.id&&(a=s),/^(MNR:4|MNR:5|MNR:6)$/.test(e.id)&&(n.push(e),r.splice(s,1),s--),~e.longName.indexOf("Wassaic")&&(o.push(e),r.splice(s,1),s--);return(r=r.slice(0,t+1).concat(n).concat(r.slice(t+1))).slice(0,a+1).concat(o).concat(r.slice(a+1))}l.buildServiceRoutes=function(e){return{busRoutes:d(e),railLines:h(e),subwayLines:u(e)}};let m="",p="";