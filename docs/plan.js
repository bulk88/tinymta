var r;onhashchange=function(e){var a,n,t,i=window.location.hash.substring(1);-1!=i.indexOf("$")&&(r?(a=r.split("$"),n=i.split("$"),t=new Date,t='http://tripplanner.mta.info/MyTrip/handler/CustomPlannerHandler.ashx?jsonpacket={"RequestDevicename":"IPHONEAPP","OriginInput":"'+escape(a[2])+'","DestinationInput":"'+escape(n[2])+'","Arrdep":"D","InputTime":"'+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+'","InputDate":"'+t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+'","Minimize":"T","Walkdist":"0.50","Mode":"F12RBC","LineStart":"","LineEnd":"","Accessible":"N","OriginCoordinates":"'+escape(r)+'","DestinationCoordinates":"'+escape(i)+'","LocationType":"","StartServiceType":"train","StartTrainType":"subway","StartBorough":"MN","EndServiceType":"train","EndTrainType":"subway","EndBorough":"MN","Walkincrease":"","Maxinitialwait":"","Maxtriptime":"","Maxtransfers":""}',location.replace(t)):r=i)},function(){var e=window.location.hash.substring(1);-1!=e.indexOf("$")&&(r=e),window.onload=function(){if(0<window.navigator.userAgent.indexOf("MSIE "))for(var e=0<=(t=document.location).pathname.indexOf("plan2.htm"),a=t.hash.substring(1),n=document.getElementsByTagName("a"),t=0;t<n.length;t++){var i=n[t];4<i.hash.length&&(e?(i.pathname=i.pathname.replace("/plan.htm","/planIE.htm"),i.hash=a+":::"+i.hash.substring(1)):i.pathname=i.pathname.replace("/plan.htm","/plan2.htm"))}}}();