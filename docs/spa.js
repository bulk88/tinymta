!function(){"use strict";var h,E,j,w,O,x,A=window,S=location,d=document.documentElement,T=d.firstChild,q={},m=0,L=S.pathname,u=S.hash,F=S.origin,z=G(L),D={headers:{"accept-version":"3.0"}},I=[,[0,5],,[3,8],[2,7],[0,4],[0,4],[1,6],[,9],[]],a={},M=["//backend-unified.mylirr.org","//otp-mta-prod.camsys-apps.com","//collector-otp-prod.camsys-apps.com",["//tiles1.tinymta.us.to","//tiles2.tinymta.us.to"],"/rstop.htm","/rtrain.htm","/stop.htm","/status.htm","/tileMap.htm",["/bk.png","/zo.png","/zi.png","/ts.gif"]],B=["style","body","html","div",,"link",0],P=A.requestIdleCallback||(A.requestAnimationFrame?function(e){requestAnimationFrame(function(){requestAnimationFrame(e)})}:function(e){return setTimeout(e,40)});function Y(){for(var e,t=0;t<B.length;t++)(e=B[t])[1]||(e[1]=e[0].cloneNode(0))}A.fetch||A.f||(f=1,T.appendChild(document.createElement("script")).src="/f.js");for(var e,t,n,o,s={body:document.body,style:T.getElementsByTagName("style")[0],y:A.y},r=[s,s.body,L+u,z],i=0;i<B.length;i++)t=(e=B[i])?document.createElement(e):t.cloneNode(0),B[i]=[t];if(B[6][0].rel="prefetch",(t=B[5][0]).rel="preconnect",t.crossOrigin="anonymous",Y(),(n=T.querySelectorAll('link[rel="preconnect"]')).length){if(1<n.length){for(o=B[3][1],i=B[3][1]=0;i<n.length;i++)o.appendChild(n[i]);T.appendChild(o)}else o=n[0];E=M[I[z][0]]=s.pc=o}if((n=T.querySelectorAll('link[rel="prefetch"]')).length){if(1<n.length){for(o=B[4][1],i=B[4][1]=0;i<n.length;i++)o.appendChild(n[i]);T.appendChild(o)}else o=n[0];j=M[I[z][1]]=s.pf=o}function G(e){var t;switch(e){case"/tileMap.htm":t=8;break;case"/stations.htm":t=7;break;case"/mn/stations.htm":t=6;break;case"/li/stations.htm":t=5;break;case"/":t=4;break;case"/stop.htm":t=3;break;case"/status.htm":t=2;break;case"/rstop.htm":t=1;break;case"/rtrain.htm":t=0;break;default:t=9}return t}function l(e){var n,t,o,a,s,r,i,l="touchstart"===e.type;if("A"===(e="FONT"===(e=e.target).nodeName?e.parentNode:e).nodeName&&(l||!e.tmts)&&e.origin===F&&(n=e.hash,(v="/"==(v=e.pathname).charAt(0)?v:"/"+v)!==S.pathname)){if(10<=v.length&&v.lastIndexOf("/jsrdt.htm")===v.length-10&&(e.pathname=v=v.replace("/jsrdt.htm","/js/rt.htm")),(a=G(v))<4&&(n=n.slice(1),A.S={t:Date.now(),s:n,f:function(e){r?e(r):i=e}},fetch(3===a?"//otp-mta-prod.camsys-apps.com/otp/routers/default/nearby?timerange=1800&apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE&stops=MTASBWY:"+n.slice(0,3):2===a?"//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP":1===a?"//backend-unified.mylirr.org/arrivals/"+n:"//backend-unified.mylirr.org/locations/"+n+"?geometry=NONE",1<a?{}:D).then(function(e){var t,n;i?i(e):r=200==e.status?(e.json().then(function(e){t?t(e):n=e}),{status:200,json:function(){return{then:function(e){n?setTimeout(e,0,n):t=e}}}}):e}),2===a)&&(R=0,O=1,T.appendChild(document.createElement("script")).src="routes.js"),8===a&&(t=function(e,t){t?o.pr=t:(A.S=o={t:Date.now(),s:n,pt:a,pr:e.body},e.js(0,n))}),!(s=q[v])||s.p1&&void 0===w){var p,c,h,d,m,f,u,g=v,v=a,C=t,b={},k=L,N=z;try{-1!=g.indexOf("/stations")&&(b.p1=f=1,void 0===w?(onpopstate.o=m=function(e,t){t?T.removeChild(d):w=e||0,d.onerror=0,onpopstate.o=0,u?u():u=1},(d=document.createElement("script")).onerror=function(){m(0,1)},d.src="1p.js",T.appendChild(d)):u=1),(p=I[v])&&(c=p[0],(h=M[c])&&h.length&&(h=Z(c,0)),E=H(E,b.pc=h),c=p[1],(h=M[c])&&h.length&&(h=Z(c,1)),j=H(j,b.pf=h),P(Y)),fetch(g,{},1).then(function(e){e.text().then(function(e){var t,n,o,a,s,r,i;-1!=(t=e.indexOf("<style>"))?(s=e.slice(t+=7,t=e.indexOf("</style>",t)),t+=8,a=0,":root{color-scheme:light dark}"!=s||(a=x)||(r=1),a||(a=B[0][1],B[0][1]=0,P(Y),a.textContent=s,r&&(x=a)),b.style=a):t=0,-1!=(n=e.indexOf("<script>",t))&&(s=y,r=A.onpageshow,A.onpageshow=null,o=e.indexOf("<\/script>",n+8),Function(e.slice(n+8,o))(),(i=(a=b.js=onhashchange).body)&&delete a.body,b.y=y,b.pg=A.onpageshow,y=s,A.onpageshow=r,onhashchange=null,C)&&C(b),-1==e.indexOf("No javascript",t)&&(e=-1!=n?e.slice(t,n)+e.slice(o+9):e.slice(t),a=B[2][1],B[2][1]=0,P(Y),a.innerHTML=e,b.body=a=a.lastElementChild,C&&C(0,a),i)&&i(a),!f||u?(q[g]=b,J(k,g,N)):u=function(){q[g]=b,J(k,g,N)}})})}catch(e){}}else t&&t(s);e.tmts=l}}function J(r,i,l){a[i]=1,P(function(){var e,t,n,o,a=F.length,s=q[r];if(e=s.pf)if("DIV"===e.nodeName){for(n=e.firstChild;n;){if(o=n.nextElementSibling,n.href.slice(a)==i){e.removeChild(n);break}n=o}e.firstChild||((t=e.parentNode)&&t.removeChild(e),delete s.pf,j===e&&(j=null),M[I[l][1]]=null)}else e.href.slice(a)==i&&((t=e.parentNode)&&t.removeChild(e),delete s.pf,j===e&&(j=null),M[I[l][1]]=null)})}function p(e,t){var n,o;return e&&a[t]?0:((o=(n=B[5+e])[1])?n[1]=0:o=n[0].cloneNode(0),e?".png"!=(n=t.slice(-4))&&".gif"!=n||(o.rel="preload",o.as="image"):t.indexOf("//tiles")||(o.crossOrigin=null),o.href=t,o)}function Z(e,t){var n,o,a,s=M[e];if("string"==typeof s)a=p(t,s);else{for(a=B[3+t][1],n=B[3+t][1]=0;n<s.length;n++)(o=p(t,s[n]))&&a.appendChild(o);a.firstChild||(a=0)}return M[e]=a}function H(e,t){return e!==t&&(e&&t?T.replaceChild(t,e):(e&&T.removeChild(e),t&&T.appendChild(t))),t}P(Y),(e=A.onpageshow)?s.pg=e:A.onpageshow=function(e,t){s.pg=t,A.onpageshow=t},q[L]=s,h=[r],history.state!==m&&history.replaceState(m,0,S.href),addEventListener("touchstart",l,{passive:!0}),addEventListener("mousedown",l,{passive:!0}),addEventListener("click",function(e){var t,n,o,a,s,r,i,l,p,c=e.target;"A"===(c="FONT"===c.nodeName?c.parentNode:c).nodeName&&c.origin===F&&(10<=(o="/"==(o=c.pathname).charAt(0)?o:"/"+o).length&&o.lastIndexOf("/jsrdt.htm")===o.length-10&&(c.pathname=o=o.replace("/jsrdt.htm","/js/rt.htm")),s=G(o),(t=q[o])?(a=c.hash,i=o===S.pathname&&a!=S.hash,(l=(r=h[m])[0]).p1&&w&&z!==s&&w({},L),2===s&&(O?O=0:(R=0,O=1,T.appendChild(document.createElement("script")).src="routes.js")),i||(d.removeChild(r[1]),H(l.style,t.style),E=H(E,t.pc),j=H(j,t.pf)),r=h[++m]=[],(l=A.S)&&l.pr&&(A.S=0,l.pt===s)&&l.s===a&&Date.now()-l.t<3e3&&(p=l.pr),8!=s&&(n=(n=A.T)&&n.GC)&&n(),h.length=m+1,p?n=p:(n=t.body)||(n=B[1][1],B[1][1]=0,P(Y)),r[1]=i?n:d.appendChild(n),history.pushState(m,0,c.href),i||(e.preventDefault(),y=t.y,A.onpageshow=t.pg,(l=t.js)&&!p&&l(),L=o,u=a,8==(z=s)&&t.pf&&(J(o,"/bk.png",8),J(o,"/zo.png",8),J(o,"/zi.png",8),J(o,"/ts.gif",8))),r[0]=t,r[2]=o+a,r[3]=s):console.log("on click no cache spa ent"))}),onpopstate=function(e){var t,n,o,a,s,r=S.pathname,i=S.hash;null===(e=e.state)?console.log("spa leave 3 "+r):L==r&&u!=i?(u=i,console.log("spa leave 1 "+r)):e===m||e>=h.length?(console.log("spa leave 2 "+r),S.reload()):(n=(t=h[m])[0],a=(o=h[e])[3],s=o[0],n.p1&&w&&z!==a&&w({},L),L=r,u=i,d.removeChild(t[1]),H(n.style,s.style),E=H(E,s.pc),j=H(j,s.pf),m=e,z=a,d.appendChild(o[1]),y=s.y,onpageshow=r=s.pg,r&&r({persisted:1}))}}();