<meta content=0 name=mobileoptimized><meta content=no-referrer name=referrer><link href="//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP"rel=preload crossorigin as=fetch><link href=//collector-otp-prod.camsys-apps.com rel=preconnect crossorigin><link href=//collector-otp-prod.camsys-apps.com rel=dns-prefetch><script async src=routes.js></script>No javascript<script>var S,e,R,E,t="//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP",r="<a href=javascript:history.back()>Back</a> Refresh[<a href=javascript:a()>Fast</a> <a href=\"javascript:location.replace('status.htm')\">Slow</a>] <a href="+t+">Raw</a><br>";function y(){fetch(t).then(function(e){200!=e.status?alert("error http status "+e.status):e.json().then(function(e,t){S=t,E=n(e.entity),R?o():R=o})}),document.body.innerHTML=r}function a(){for(var e,t=document.documentElement.firstChild.lastChild;t;t=t.previousSibling)if((e=t.src)&&e.lastIndexOf("routes.js")==e.length-9){(e=document.createElement("script")).src="routes.js",t.parentNode.replaceChild(e,t);break}y()}function M(e,t){var r={4:"00933c",5:"00933c","5X":"00933c",6:"00933c","6X":"00a65c",A:"2850ad",C:"2850ad",E:"2850ad",G:"6cbe45",GS:"6d6e71",J:"996633",Z:"996633",L:"a7a9ac",7:"b933ad","7X":"b933ad",1:"ee352e",2:"ee352e",3:"ee352e",N:"fccc0a",Q:"fccc0a",R:"fccc0a",W:"fccc0a",B:"ff6319",D:"ff6319",F:"ff6319",FX:"ff6319",M:"ff6319"}[t];return t="["+t+"]",r?"<font color="+r+">"+t+"</font>":t}function n(e){for(var t,r,a,n,o,i,c,s={},l=Math.round(Date.now()/1e3),u=0;u<e.length;u++){t=e[u],r=0;try{if((a=t.alert["transit_realtime.mercury_alert"])&&t.alert.active_period){var d="undefined"!=typeof a.display_before_active;if(~t.id.indexOf("planned_work")&&!d)r=0;else for(o=t.alert.active_period,n=0;n<o.length;n++)(i=o[n]).start&&!r&&(c=i.start,d&&(c-=a.display_before_active),c<l&&(r=1),i.end)&&l>i.end&&(r=0)}}catch(h){}if(r)for(o=t.alert.informed_entity,n=0;n<o.length;n++)(r=(i=o[n]).route_id)&&(r=r.toLowerCase(),(c=(c=s[i.agency_id]=s[i.agency_id]||{})[r]=c[r]||[]).push(t))}return s}function O(e){var t,r,a,n,o;if(e)for(o=(e=e.translation).length;a=e[--o];){if(n=a.text,"en-html"===(a=a.language))return n;"en"===a?t=n:r=n}return t||r||""}function A(e){return e?e.replace(/(\xE2\x80\u0152)|(<p style="min-height:10px"><\/p>)|(^<p>)|((<p><\/p>|<\/p>)+$)/g,"").replace(/\[(\w+)\]/g,M):""}function o(){function i(e,t){return t[1]-e[1]}function e(e,s,l){return e.forEach(function(e){var t,r,a,n,o,i=(""+e[0]).toLowerCase(),c=l[e[2]||0];if(t=(t=s[c])&&t[i]){for(r=0;r<t.length;r++)n=(a=t[r]).alert.informed_entity.find(function(e){return e.agency_id===c&&e.route_id.toLowerCase()==i?1:0}),t[r]=[(o=a.alert["transit_realtime.mercury_alert"])?o.alert_type:"No Status Summary",(o=-10,o=(n=(n=(n=n)["transit_realtime.mercury_entity_selector"])&&n.sort_order)?(o=n.split(":")[2])?+o:100:o),O(a.alert.header_text),O(a.alert.description_text),O(a.alert["transit_realtime.mercury_alert"].human_readable_active_period)];e[4]=t}}),e}function t(e){e.sort(function(e,t){return e[1]-t[1]})}function r(e,t){for(var r,a,n=0;n<t.length;n++){var o=t[n],i=o[4]?o[4][0][0]:"On or Close",c="On or Close"!=i,s="";if(c){for(s=o[4],a=0;a<s.length;a++)r=s[a],s[a]="<b>"+r[0]+"</b><br>"+A(r[2])+(r[4]?"<br>"+r[4]:"")+"<br>"+A(r[3]);s=s.join("<hr>")}t[n]="<hr>"+(c?"<details><summary>":"")+"<font color="+o[1]+">"+(o[3]||("+"==(a=o[0].indexOf("BX")?o[0]:"Bx"+o[0].slice(2)).slice(-1)?a.slice(0,-1)+"-SBS":a))+"</font> "+i+(c?"</summary>"+s+"</details>":"")}return"<hr>"+e+"<br>"+t.join("")}for(var a,n,o,c,s,l,u,d,h,m,p=(new Date).toLocaleTimeString("en-US")+(S?" via JSONP":" via CORS")+"<br>",_=[],b=[],g=[],v=[],C=[],j=(l=v,u=C,e(R[2],E,["MTASBWY"]).forEach(function(e){(e[4]?l:u).push(e)}),t(l),t(u),d=b,h=g,e(R[1],E,["LI","MNR"]).forEach(function(e){(e[2]?d:h).push(e),e[4]&&e[4].sort(i)}),m=_,e(R[0],E,["MTA NYCT","MTABC"]).forEach(function(e){e[4]&&(e[4].sort(i),m.push(e))}),function(e){for(var t,r,a,n={},o=0;o<e.length;o++)(t=e[o])[4].sort(i),(r=n[r=(a=t[4][0])[0]]=n[r]||[r,a[1],[]])[2].push(t);return Object.values(n).sort(i)}(v)),L=0;L<j.length;L++)for(p+="<hr>"+(a=j[L])[0]+"<br>",a=a[2],o=0;o<a.length;o++){for(p+="<details><summary>"+M(0,(n=a[o])[0])+"</summary>",n=n[4],c=0;c<n.length;c++)s=n[c],n[c]="<b>"+s[0]+"</b><br>"+A(s[2])+(s[4]?"<br>"+s[4]:"")+"<br>"+A(s[3]);p=p+n.join("<hr>")+"</details>"}if(C.length)for(p+="<hr>No Active Alerts<br>",L=0;L<C.length;L++)p+=M(0,C[L][0])+" ";p=(p=(p+=r("Metro-North Railroad",b))+r("Long Island Rail Road",g))+r("Bus",_),document.body.innerHTML+=p,R=E=0}Object.values?y():document.documentElement.firstChild.appendChild(document.createElement("script")).src="f.js"</script>