<meta content=0 name=mobileoptimized><meta content=no-referrer name=referrer><link href="//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP"rel=preload as=fetch crossorigin><link href=routes.js rel=preload as=fetch crossorigin><link href=//collector-otp-prod.camsys-apps.com rel=dns-prefetch><link href=//collector-otp-prod.camsys-apps.com rel=preconnect>No javascript<script>var A,t="/routes.js",r="//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP",e="<a href=javascript:history.back()>Back</a> Refresh[<a href=javascript:n()>Fast</a> <a href=\"javascript:location.replace('status.htm')\">Slow</a>] <a href="+t+">RawR</a> <a href="+r+">RawA</a><br>",w,b;function n(){u(t),u(r,1),document.body.innerHTML=e}function C(t,r){r={1:"EE352E",2:"EE352E",3:"EE352E",4:"00933C",5:"00933C","5X":"00933C",6:"00933C","6X":"00A65C",7:"B933AD","7X":"B933AD",A:"2850AD",B:"FF6319",C:"2850AD",D:"FF6319",E:"2850AD",F:"FF6319",FX:"FF6319",G:"6CBE45",GS:"6D6E71",J:"996633",L:"A7A9AC",M:"FF6319",N:"FCCC0A",Q:"FCCC0A",R:"FCCC0A",W:"FCCC0A",Z:"996633"}[r||t];return r?"<font color="+r+">"+t+"</font>":t}function a(t){for(var e,n,a,i={},o=Math.round(Date.now()/1e3),r=0;r<t.length;r++){e=t[r],n=!1;try{e.alert["transit_realtime.mercury_alert"]&&e.alert.active_period&&(a=e.alert["transit_realtime.mercury_alert"].hasOwnProperty("display_before_active"),~e.id.indexOf("planned_work")&&!a?n=!1:e.alert.active_period.forEach(function(t){var r;t.start&&!n&&(r=t.start,a&&(r-=e.alert["transit_realtime.mercury_alert"].display_before_active),r<o&&(n=!0),t.end)&&o>t.end&&(n=!1)}))}catch(s){console.log(s)}n&&e.alert.informed_entity.forEach(function(t){var r;(r=t.route_id)&&(r=r.toLowerCase(),(t=(t=i[t.agency_id]=i[t.agency_id]||{})[r]=t[r]||[]).push(e))})}return i}function E(t){for(var r,e=!1,n=!1,a=0;a<t.length;a++){if("en-html"===(r=t[a]).language)return r.text;"en"===r.language?e=r.text:""===r.language&&(n=r.text)}return e||n||!1}function S(t){return"string"==typeof t&&!(t=t.replace(/(<p style="min-height:10px"><\/p>|<p><\/p>)+$/g,"")).indexOf("<p>")&&~t.indexOf("</p>",t.length-4)?t.slice(3,-4):t}function T(t){return t.originalStatus.alert["transit_realtime.mercury_alert"].human_readable_active_period}function D(t){return E(t.originalStatus.alert["transit_realtime.mercury_alert"].human_readable_active_period.translation)}function i(t){w="object"==typeof(t=t.contents||t)?t:eval("0,"+t),b&&s()}function o(t){b=a(("object"==typeof(t=t.contents||t)?t:this.JSON?JSON.parse(t):eval("0,"+t)).entity),w&&s()}function s(){function t(t,e,n){var a=[];return t.forEach(function(t){var r,s=(""+t[0]).toLowerCase(),u=n[t[3]||0];(r=(r=e[u])&&r[s])&&0<(r=r.map(function(t){var r,e=1,n=t.alert.informed_entity.find(function(t){return t.agency_id===u&&t.route_id.toLowerCase()==s?1:0}),a=(n.trip&&(e=n.trip.direction_id),i="No Status Summary",i=(a=(a=t).alert["transit_realtime.mercury_alert"])?a.alert_type:i),i=!!(i=(i=t).alert.description_text)&&E(i.translation),o=!!(o=(o=t).alert.header_text)&&E(o.translation),n=(r=-10,r=(n=(n=(n=n)["transit_realtime.mercury_entity_selector"])&&n.sort_order)?(r=n.split(":")[2])?+r:100:r);return{id:t.id,statusSummary:a,statusDescription:i,statusTitle:o,priority:n,direction:e,originalStatus:t}})).length&&(t[5]=r),a.push(t)}),a}function r(t){t.sort(function(t,r){return t[4]-r[4]})}function e(t,r){var e="";return e=r.length?(e+="<hr>"+t+"<br>")+r.map(function(t){var r,e=t[5]&&t[5].length;return"<hr>"+(e?"<details><summary>":"")+"<font color="+t[2]+">"+t[1]+"</font> "+((r=t)[5]&&r[5].length?r[5][0].statusSummary:"On or Close")+(e?"</summary>"+t[5].map(function(t){return"<b>"+t.statusSummary+"</b><br>"+S(t.statusTitle)+(T(t)?"<br>"+D(t):"")+"<br>"+(t.statusDescription?S(t.statusDescription):"")}).join("<hr>")+"</details>":"")}).join(""):e}for(var n,a,i,o,s,u,c,l=(new Date).toLocaleTimeString("en-US")+(A?" via JSONP":" via CORS")+"<br>",p=[],f=[],h=[],d=[],m=[],g=(i=d,o=m,t(w[2],b,["MTASBWY"]).forEach(function(t){(t[5]?i:o).push(t)}),r(i),r(o),s=f,u=h,t(w[1],b,["LI","MNR"]).forEach(function(t){(t[3]?s:u).push(t),t[5]&&t[5].sort(function(t,r){return r.priority-t.priority})}),c=p,t(w[0],b,["MTA NYCT","MTABC"]).forEach(function(t){t[5]&&(t[5].sort(function(t,r){return r.priority-t.priority}),c.push(t))}),function(t){for(var r,e,n,a={},i=[],o=0;o<t.length;o++)(r=t[o])[5].sort(function(t,r){return r.priority-t.priority}),((e=a[e=(n=r[5][0]).statusSummary.toLowerCase().replace(/\s/g,"-")]=a[e]||{status:n.statusSummary,priority:n.priority}).lines=e.lines||[]).push(r);for(e in a)i.push(a[e]);return i.sort(function(t,r){return r.priority-t.priority}),i}(d)),_=0;_<g.length;_++){var v=g[_];for(l+="<hr>"+v.status+"<br>",v=v.lines,a=0;a<v.length;a++)l=(l+="<details><summary>"+C("["+(n=v[a])[1]+"]",n[1])+"</summary>")+n[5].map(function(t){return"<b>"+t.statusSummary+"</b><br>"+S(t.statusTitle).replace(/\[(\w+)\]/g,C)+(T(t)?"<br>"+D(t):"")+"<br>"+(t.statusDescription?S(t.statusDescription).replace(/\[(\w+)\]/g,C):"")}).join("<hr>")+"</details>"}if((g=m).length)for(l+="<hr>No Active Alerts<br>",_=0;_<g.length;_++)l+=C("["+(n=g[_][1])+"]",n)+" ";l=(l=(l+=e("Metro-North Railroad",f))+e("Long Island Rail Road",h))+e("Bus",p),document.body.innerHTML+=l,w=b=void 0}function u(t,r,e){var x=this.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");try{if(A)throw 0;x.open("GET",t,1);try{r&&(x.responseType="json")}catch(n){}x.onreadystatechange=function(){4==x.readyState&&(200==x.status?"withCredentials"in x||x.getResponseHeader("Date")?(r?o:i)(x.response):u(t,r,1):alert("error HTTP status "+x.status))},e&&x.setRequestHeader("if-modified-since",new Date(0)),x.send()}catch(a){(a=document.createElement("script")).src=(r?"/api/alt":"/api/rts")+"?callback="+(r?"o":"i"),1<(A=document.getElementsByTagName("head")[0]).childNodes.length&&A.removeChild(A.childNodes[1]),A.appendChild(a)}}n(),Array.prototype.find||(Array.prototype.find=function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");for(var r=Object(this),e=r.length>>>0,n=arguments[1],a=0;a<e;a++){var i=r[a];if(t.call(n,i,a,r))return i}}),Array.prototype.filter||(Array.prototype.filter=function(t){"use strict";if(null==this)throw new TypeError;var r,e,n,a,i=Object(this),o=i.length>>>0;if("function"!=typeof t)throw new TypeError;for(r=[],e=arguments[1],n=0;n<o;n++)n in i&&(a=i[n],t.call(e,a,n,i))&&r.push(a);return r}),Array.prototype.map||(Array.prototype.map=function(t,r){var e,n,a;if(null==this)throw new TypeError(" this is null or not defined");var i,o=Object(this),s=o.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(r&&(e=r),n=Array(s),a=0;a<s;)a in o&&(i=o[a],i=t.call(e,i,a,o),n[a]=i),a++;return n}),Array.prototype.forEach||(Array.prototype.forEach=function(t,r){"use strict";for(var e=0,n=this.length;e<n;++e)e in this&&t.call(r,this[e],e,this)}),Date.now||(Date.now=function c(){return(new Date).getTime()}),Date.prototype.toISOString||(Date.prototype.toISOString=function(){var t=1+this.getMonth(),r=this.getDay();return this.getFullYear()+"-"+(t<10?"0"+t:t)+"-"+(r<10?"0"+r:r)})</script>