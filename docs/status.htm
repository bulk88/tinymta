<meta content=0 name=mobileoptimized><meta content=no-referrer name=referrer><link href="//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP"rel=preload as=fetch crossorigin><link href=routes.js rel=preload as=fetch crossorigin><link href=//collector-otp-prod.camsys-apps.com rel=dns-prefetch><link href=//collector-otp-prod.camsys-apps.com rel=preconnect>No javascript<script>var S,t="/routes.js",r="//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP",e="<a href=javascript:history.back()>Back</a> Refresh[<a href=javascript:y()>Fast</a> <a href=\"javascript:location.replace('status_.htm')\">Slow</a>] <a href="+t+">RawR</a> <a href="+r+">RawA</a><br>",E,L;function y(){fetch(r,{},"alt").then(function(t){200!=t.status?alert("error http status "+t.status):t.json().then(o)}),fetch(t,{},"rts",1).then(function(t){200!=t.status?alert("error http status "+t.status):t.text().then(n)}),document.body.innerHTML=e}function T(t,r){r={4:"00933c",5:"00933c","5X":"00933c",6:"00933c","6X":"00a65c",A:"2850ad",C:"2850ad",E:"2850ad",G:"6cbe45",GS:"6d6e71",J:"996633",Z:"996633",L:"a7a9ac",7:"b933ad","7X":"b933ad",1:"ee352e",2:"ee352e",3:"ee352e",N:"fccc0a",Q:"fccc0a",R:"fccc0a",W:"fccc0a",B:"ff6319",D:"ff6319",F:"ff6319",FX:"ff6319",M:"ff6319"}[r||t];return r?"<font color="+r+">"+t+"</font>":t}function a(t){for(var r,e,a,n,o,i,s,c={},u=Math.round(Date.now()/1e3),l=0;l<t.length;l++){r=t[l],e=!1;try{if((a=r.alert["transit_realtime.mercury_alert"])&&r.alert.active_period){var f=a.hasOwnProperty("display_before_active");if(~r.id.indexOf("planned_work")&&!f)e=!1;else for(o=r.alert.active_period,n=0;n<o.length;n++)(i=o[n]).start&&!e&&(s=i.start,f&&(s-=a.display_before_active),s<u&&(e=!0),i.end)&&u>i.end&&(e=!1)}}catch(p){console.log(p)}if(e)for(o=r.alert.informed_entity,n=0;n<o.length;n++)(e=(i=o[n]).route_id)&&(e=e.toLowerCase(),(s=(s=c[i.agency_id]=c[i.agency_id]||{})[e]=s[e]||[]).push(r))}return c}function j(t){for(var r,e=!1,a=!1,n=0;n<t.length;n++){if("en-html"===(r=t[n]).language)return r.text;"en"===r.language?e=r.text:""===r.language&&(a=r.text)}return e||a||!1}function A(t){return t.replace(/(<p style="min-height:10px"><\/p>)|(^<p>)|((<p><\/p>|<\/p>)+$)/g,"")}function n(t,r){S=r,E="object"==typeof t?t:eval("0,"+t),L&&i()}function o(t,r){S=r,L=a(t.entity),E&&i()}function i(){function t(t,u,l){return t.forEach(function(t){var r,e,a,n,o,i,s=(""+t[0]).toLowerCase(),c=l[t[2]||0];if(r=(r=u[c])&&r[s]){for(e=0;e<r.length;e++)n=(o=r[e]).alert.informed_entity.find(function(t){return t.agency_id===c&&t.route_id.toLowerCase()==s?1:0}),a=(a=o.alert["transit_realtime.mercury_alert"].human_readable_active_period)?j(a.translation):"",r[e]={statusSummary:(i=o.alert["transit_realtime.mercury_alert"])?i.alert_type:"No Status Summary",statusDescription:!!(i=o.alert.description_text)&&j(i.translation),statusTitle:!!(i=o.alert.header_text)&&j(i.translation),priority:(o=-10,o=(i=(i=(i=n)["transit_realtime.mercury_entity_selector"])&&i.sort_order)?(o=i.split(":")[2])?+o:100:o),duration:a};t[4]=r}}),t}function r(t){t.sort(function(t,r){return t[1]-r[1]})}function e(t,r){for(var e,a,n=0;n<r.length;n++){var o=r[n],i=o[4]&&o[4].length?o[4][0].statusSummary:"On or Close",s="On or Close"!=i,c="";if(s){for(c=o[4],a=0;a<c.length;a++)e=c[a],c[a]="<b>"+e.statusSummary+"</b><br>"+A(e.statusTitle)+(e.duration?"<br>"+e.duration:"")+"<br>"+(e.statusDescription?A(e.statusDescription):"");c=c.join("<hr>")}r[n]="<hr>"+(s?"<details><summary>":"")+"<font color="+o[1]+">"+(o[3]||("B"==(o[0][0]||"")&&"X"==(o[0][1]||"")?"Bx"+o[0].substr(2):o[0]))+"</font> "+i+(s?"</summary>"+c+"</details>":"")}return"<hr>"+t+"<br>"+r.join("")}for(var a,n,o,i,s,c,u,l,f,p,h=(new Date).toLocaleTimeString("en-US")+(S?" via JSONP":" via CORS")+"<br>",d=[],m=[],g=[],_=[],b=[],v=(c=_,u=b,t(E[2],L,["MTASBWY"]).forEach(function(t){(t[4]?c:u).push(t)}),r(c),r(u),l=m,f=g,t(E[1],L,["LI","MNR"]).forEach(function(t){(t[2]?l:f).push(t),t[4]&&t[4].sort(function(t,r){return r.priority-t.priority})}),p=d,t(E[0],L,["MTA NYCT","MTABC"]).forEach(function(t){t[4]&&(t[4].sort(function(t,r){return r.priority-t.priority}),p.push(t))}),function(t){for(var r,e,a,n={},o=[],i=0;i<t.length;i++)(r=t[i])[4].sort(function(t,r){return r.priority-t.priority}),((e=n[e=(a=r[4][0]).statusSummary.toLowerCase().replace(/\s/g,"-")]=n[e]||{status:a.statusSummary,priority:a.priority}).lines=e.lines||[]).push(r);for(e in n)o.push(n[e]);return o.sort(function(t,r){return r.priority-t.priority}),o}(_)),w=0;w<v.length;w++)for(h+="<hr>"+(a=v[w]).status+"<br>",a=a.lines,o=0;o<a.length;o++){for(h+="<details><summary>"+T("["+(n=a[o])[0]+"]",n[0])+"</summary>",n=n[4],i=0;i<n.length;i++)s=n[i],n[i]="<b>"+s.statusSummary+"</b><br>"+A(s.statusTitle).replace(/\[(\w+)\]/g,T)+(s.duration?"<br>"+s.duration:"")+"<br>"+(s.statusDescription?A(s.statusDescription).replace(/\[(\w+)\]/g,T):"");h=h+n.join("<hr>")+"</details>"}if(b.length)for(h+="<hr>No Active Alerts<br>",w=0;w<b.length;w++)h+=T("["+(n=b[w][0])+"]",n)+" ";h=(h=(h+=e("Metro-North Railroad",m))+e("Long Island Rail Road",g))+e("Bus",d),document.body.innerHTML+=h,E=L=void 0}this.fetch?y():(scriptElem=document.createElement("script"),scriptElem.src="f.js",document.documentElement.firstChild.appendChild(scriptElem)),Array.prototype.find||(Array.prototype.find=function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");for(var r=Object(this),e=r.length>>>0,a=arguments[1],n=0;n<e;n++){var o=r[n];if(t.call(a,o,n,r))return o}})</script>