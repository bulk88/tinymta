var t;onhashchange=function(a){var e,n=location.hash.substring(1);-1!=n.indexOf("$")&&(t?(e=new Date,location.replace('http://tripplanner.mta.info/MyTrip/handler/CustomPlannerHandler.ashx?jsonpacket={"RequestDevicename":"IPHONEAPP","OriginInput":"'+t.split("$")[2]+'","DestinationInput":"'+n.split("$")[2]+'","Arrdep":"D","InputTime":"'+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+'","InputDate":"'+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+'","Minimize":"T","Walkdist":"0.50","Mode":"F12RBC","LineStart":"","LineEnd":"","Accessible":"N","OriginCoordinates":"'+escape(t)+'","DestinationCoordinates":"'+escape(n)+'","LocationType":"","StartServiceType":"train","StartTrainType":"subway","StartBorough":"MN","EndServiceType":"train","EndTrainType":"subway","EndBorough":"MN","Walkincrease":"","Maxinitialwait":"","Maxtriptime":"","Maxtransfers":""}')):t=n)},function(){var a=location.hash.substring(1);-1!=a.indexOf("$")&&(t=a),onload=function(){if(!("onhashchange"in window&&(void 0===docmode||7<docmode)))for(var a=0<=(t=document.location).pathname.indexOf("plan2.htm"),e=t.hash.substring(1),n=document.getElementsByTagName("a"),t=0;t<n.length;t++){var i=n[t];4<i.hash.length&&(a?(i.pathname=i.pathname.replace("plan.htm","planIE.htm"),i.hash=e+":::"+i.hash.substring(1)):i.pathname=i.pathname.replace("plan.htm","plan2.htm"))}}}();