<html>
<head>
<link rel="dns-prefetch" href="//tiles1.tinymta.us.to">
<link rel="preconnect" href="//tiles1.tinymta.us.to">
<link rel="dns-prefetch" href="//tiles2.tinymta.us.to">
<link rel="preconnect" href="//tiles2.tinymta.us.to">
<title>The Weekender</title>
</head>
<script language="javascript" type="text/javascript">

// Neighborhood Map Dimensions
/* removed/inlined
var mapImgDimensions = {
Manhattan: "5000,17408",
B1: "1500,1500",
B2: "1500,1500",
B3: "1500,1500",
B4: "1500,1500",
B5: "1500,1500",
B6: "1500,1500",
B7: "1500,1500",
B8: "1500,1500",
B9: "1500,1500",
B10: "1500,1500",
B11: "1500,1500",
B12: "1500,1500",
B14: "1500,1500",
B15: "1500,1500",
B16: "1500,1500",
B17: "1500,1500",
B18: "1500,1500",
B19: "1500,1500",
B13: "1500,1500",
BX1: "1500,1500",
BX2: "1500,1500",
BX3: "1500,1500",
BX4: "1500,1500",
BX5: "1500,1500",
BX6: "1500,1500",
BX7: "1500,1500",
BX8: "1500,1500",
BX9: "1500,1500",
BX10: "1500,1500",
Q1: "1500,1500",
Q2: "1500,1500",
Q3: "1500,1500",
Q4: "1500,1500",
Q5: "1500,1500",
Q6: "1500,1500",
Q7: "1500,1500",
Q8: "1500,1500",
Q9: "1500,1500",
Q10: "1500,1500",
Q11: "1500,1500",
Q12: "1500,1500",
S1: "1500,1500"
};
*/


var tilePath
var initialX
var initialY
var mapWidth
var mapHeight
var tileDirectory
var mapDrag = false

var centerPixX
var centerPixY
var startXY
var xDownStart = [];
var yDownStart = [];
var alertTimer;

//set the initial map settings
var zoomLevel = 2
/* 2021 factor out
var defaultCenterX
var defaultCenterY
*/

var aStyle = new Array()
var aElement = new Array()

function centerOnStation(stationLocInfo) {
var stationLoc = "%T5W8&&Nr)%H*[k%M9H^$q*,b$CVK1%D/hQ$'Ha9%Ijah%C.J=&O=$7%OQ]'%j1T=%?$ap-F0ST%1<bf&2AmP&h-,G##'09#5G0P$(9ww$lM:`%q]d,$)91D$fsXH#7uZn%Vd[i&Ohj@'3rYb#YRjt$D[+N%G:N(&5w==&+qS-$5^[d%#pS_#f-am#bU97$LpNP%<E?U#ge9Z%r]%i&)>b7#i*P(#w8At$bl4=%c/G)&Q?j3$FK4V%ao%e&b3X%&69ZM$q//M$+B@/&^?mh#i)R9%&Iku&Rf[%#n9P*$K[/k$-t(l%H+&+%=]g?#S+Dl%Z.TD$GdTv$XSUI%c3CS$6v5l&8j_:$Ut2w%ec#^&k3nU#S,@-$-q>s%H'1F$k_KQ%vU?+%_9@T'7kdT#F7&'&WfQ1%Q),6'#.-h%EJRw'0)-h#GM5Y$JB.O&fH_.%maRf$LXwd#To/j#l0wU%l`u9$+?/b&Y-[l$0#9w$r_=6&&1sX#=3SZ'+n@d$coZL$[C,J$)MVP%l5VX%(NG^$f8L&&e#f*$k^bu%3l@e#f.s9%i-+S%'woS%A?>*#RV<b&G'.G#wiSs$qZD^%qrP6&M9NP&7S8B&VTf@%s^#A$c[<P&%tX'%>7mW$FM%:$,ZmH#4ouH&cLpN$&J/X&.O@<$g))b#rGan#rA+.$H$(_$8ejp$=uX^%YDLJ%4o+U&(e8I'>NI`$neC.'3r1k%lbf9$WP_^'3taf%L`^b&#[_f&T9-)&:+7o&pB6'%`>@j$RV1L#f.uo'4Iv3$qos2$6w3C#?cC/'$I7H&3f@>%79vp%;*f`&ZD%G$Yib8$-p6Q%V8&o$T]-.#Do[o&hY90%@<e:#kfJX&b1YO%mOv6$*(,'$m8Dh'3pVZ&IV*K';fAs&H=vi%TtG2$R+DA%M5&A#TE[#%#mn_&IYZ=%M7b`#0uBa$3(^R%+VD)&DI88#1Pka'3q09&VPI/%p+^R$rFNf$=HoH&uP[g&2@RS%Oehl$fcsq#r,_I#+')?')U@X%'adl&)=_&$4CT:#9:/D%_?;,%*BO6',/G1%mKw6$wR+r$GcVr#+'P1&b1Z+&Amg;&h[Nd$fKOU%u>1Z#Qf)(&-1@K%0cw(&Jo_U%2*Ei&[`[_H`0/)9Y@=)8T[tU4HGY`69LQL2l'*e0X+at+j)R8&8l'3*$$_[(N+>Q.M4?j:i.kL<feFe>;b[j?^q*t/Y-eVA4k2V&pH2t%AY<Q12rYjBDZ=32_0B]4_`i86]_*80p]k$CS0ooE<Jh)FuVD3HQvu`JIN&=L5DW$8AkAo:wDD3<@DL8>7pQj?N0Z=A8cD89^RZeE@A8VD<44LEg-X3H]XgLIe[bQJY%BBKT.veLMtdGDm<toG2_S=Mm8meO>$D[21uX8D31]GE^+,.J[X@3L?cq=Msa1BG0/(.HXKh=2u1M34o:6=6ff;o8H@4L9B0w.OSwfGPa3sQIZ(FGG*vW.QODp8Rc(M.Q(Y,jT-AIQCTM^.J_ONjU:S/oDnXgoS%?*[T2PAeU1OS8S<U6BUt`8[Tua1QS%?kBQ'Al[L8&meU6^o`Hi=WoIc.EQJY)]oVN7q`OL:AVV1hf)SnwkQMV'BLG$QptO/k@[Q3#*[TmwDLRh998E9tV8Nk$+$OpJBQCW,q)RXcIV6j_U`8MR@)9T<IB:o_mo<JgX[>B>^8@)&roAirQ3MI.UGBoD+$LA,oLP*w+8Nv[jGPO1t8LA/%[Os+9jQ<+u[)fo@V+].+G'Iq*),uuHV%RAk>%)$pC&3YVa$XROp&C0k%$'K.u$@'%V%=0ka%vPu:%%/J?%b/%g$Y*b%%ZrE)&MeTO#w><k#m8R-$RjeJ$BSi%$Ah'k$8$OD%9?Q)$*)Ip&Vi^5&OVQT$$E3H$IQ;?&3Xds&@i(Y&[_pD$*'SH&a0:3$*(L*&.NS5%nk_5&H<ig&@S2+&7Pr?%`,6L%$V$0%Hl`N'*m:'%/b$i&_Sqf&)=3@&q[s&&1(OE%HRd<%LI'n$g&r4$-rDT$]bw1%k]N]%0%TN$MKif$Mwv+%,tl$$gOPo$^LmF#ffG;$T]r:$-Fn$$Q@L$$CpH3%4t*7#'rR0%m7dI#WcX-%KEaL$Pj6_%twG(%UK4r&IWG6%A>_(%1(-`%/O(u%%u]h%KYSL%AShc%9j1'%Vgv-&8mKs$6ft;$[Z^V%+nH[%2mZS%$qg<$o)L1$c3=v$S1aL$@=@h#f`&l#HhZ0#6a,;#m#+w&c1*]&]L?;&Vd`=&PT4+&=uu,&,/qs&#XQo&lJGn%g(Ih%fa@;%H>I%";
  //5 printable bytes holds 1 32 bit station bitfield
  if((stationLocInfo = (stationLocInfo|0) * 5) < stationLoc.length) {
  var xCoor_value = 0;
    for (var yCoor_i = 0; yCoor_i < 5; yCoor_i++) {
    tileDirectory = stationLoc.charCodeAt(stationLocInfo+yCoor_i);
    // Accumulate value in base 85
    xCoor_value = xCoor_value * 85 + ((tileDirectory == 102 ? 92 : tileDirectory) - 35);
  }
        tileDirectory = (xCoor_value % 44 /*scaledir*/) + 1
        tileDirectory = tileDirectory < 11 ? "BX"+tileDirectory : tileDirectory < 30 ? "B"+(tileDirectory-10) : tileDirectory == 30 ? "Manhattan" : tileDirectory == 43 ? "S1" : "Q"+(tileDirectory-30);
        yCoor_i = ((((xCoor_value/(44 /*scaledir*/ * 3607 /*scalex*/) % 16942 /*scaley*/)) + 19)/*shifty*/*zoomLevel)|0
        //VARIABLE REUSE watch X Y order
        xCoor_value = (((xCoor_value/44 /*scaledir*/ % 3607 /*scalex*/) + 69) /*shiftx*/*zoomLevel)|0
        if (xCoor_value < 315)
            xCoor_value = 315;
        if (yCoor_i < 315)
            yCoor_i = 315;

        if (zoomLevel == 1) {
            if (tileDirectory != "Manhattan") {
                if (xCoor_value > 1185)
                    xCoor_value = 1185;
                if (yCoor_i > 1185)
                    yCoor_i = 1185;
            }
            else {
                if (xCoor_value > 4685)
                    xCoor_value = 4685;
                if (yCoor_i > 17093)
                    yCoor_i = 17093;
            }
        }
        if (zoomLevel == 2) {
            if (tileDirectory != "Manhattan") {
                if (xCoor_value > 2685)
                    xCoor_value = 2685;
                if (yCoor_i > 2685)
                    yCoor_i = 2685;
            }
            else {
                if (xCoor_value > 9685)
                    xCoor_value = 9685;
                if (yCoor_i > 34501)
                    yCoor_i = 34501;
            }
        }
// prev var mapArgs = mapImgDimensions[tileDirectory].split(",")
        mapWidth = tileDirectory == "Manhattan" ? 5000 : 1500
        mapHeight = tileDirectory == "Manhattan" ? 17408 : 1500
//function setTilePath(d)
//{
    //tilePath = "http://wd1.mtahq.org/neighborhoodMaps/" + d + "/"
    //tilePath = "http://web.mta.info/neighborhoodMaps/" + tileDirectory + "/"
    //tilePath = "http://10.8.86.78/WeekenderVer2/neighborhoodMaps/" + d + "/"

    tilePath = "neighborhoodMaps/" + tileDirectory + "/"

//}
//old function recenterMap(x,y)
        initialX = xCoor_value
        initialY = yCoor_i
        loadNewMap()
    }
}
/* 2021 factor out
function recenterMap(x,y)
{
    initialX = x
    initialY = y
    loadNewMap() 
}
*/

function loadNewMap()
{
hideImageTiles() 
centerPixX = initialX
centerPixY = initialY
loadMap()
}

/* 2021 factor out
function showImageTiles()
{
 for(var k=0; k<25; k++)
 {
 aStyle[k].visibility = "visible"
 }
}
*/

function hideImageTiles()
{
 for(var k=0; k<25; k++)
 {
 aStyle[k].visibility = "hidden"
 }
}

function getCurrentCenter()
{
  //formerly 12 == document.getElementById("a22");
  var arr  = aElement[12].className.split("_");
  var style = aStyle[12];
  return [(arr[0]*256)+(315-parseInt(style.left)), (arr[1]*256)+(315-parseInt(style.top))];
}

/* unused 2021 factor out
function getCenterRow()
{
 var row
 var row0pos
 var row1pos
 var row2pos
 var row3pos
 var row4pos

 row0pos = parseInt(aStyle[2].top)+325
 row1pos = parseInt(aStyle[7].top)+325
 row2pos = parseInt(aStyle[12].top)+325
 row3pos = parseInt(aStyle[17].top)+325
 row4pos = parseInt(aStyle[22].top)+325

 if(row0pos > 512 && row0pos < 769)
 {
  row = "0"
 }
 if(row1pos > 512 && row1pos < 769)
 {
  row = "1"
 }
 if(row2pos > 512 && row2pos < 769)
 {
  row = "2"
 }
 if(row3pos > 512 && row3pos < 769)
 {
  row = "3"
 }
 if(row4pos > 512 && row4pos < 769)
 {
  row = "4"
 }

return row
}
*/

/* unused 2021 factor out
function getCenterCol()
{
 var col
 var col0pos
 var col1pos
 var col2pos
 var col3pos
 var col4pos

 col0pos = parseInt(aStyle[10].left)+325
 col1pos = parseInt(aStyle[11].left)+325
 col2pos = parseInt(aStyle[12].left)+325
 col3pos = parseInt(aStyle[13].left)+325
 col4pos = parseInt(aStyle[14].left)+325


 if(col0pos > 512 && col0pos < 769)
 {
  col = "0"
 }
 if(col1pos > 512 && col1pos < 769)
 {
  col = "1"
 }
 if(col2pos > 512 && col2pos < 769)
 {
  col = "2"
 }
 if(col3pos > 512 && col3pos < 769)
 {
  col = "3"
 }

 if(col4pos > 512 && col4pos < 769)
 {
  col = "4"
 }

 return col
}
*/


function getRemainderPix(totalPix)
{
 return totalPix%256
}

function getNumberOfTiles(totalPix)
{
 var remainderPix = totalPix%256
 var tilesCount = (totalPix - remainderPix)/256
 return tilesCount
}

function loadMap()
{
 hideImageTiles()

//function getCenterTile(pY,pX)
//{
 // old name numberOfRow
 var nameX = getNumberOfTiles(centerPixX)
 //old name numberOfColumns
 var nameY = getNumberOfTiles(centerPixY)
//}
 //resetTileCells(128 - getRemainderPix(centerPixY), 128 - getRemainderPix(centerPixX))
//}
  var topShift = 128 - getRemainderPix(centerPixY)
  var leftShift = 128 - getRemainderPix(centerPixX)

//function resetTileCells(topShift,leftShift)
//{
 var k
 //image tile load order
 var s0 = [12,7,17,11,13,6,8,16,18,0,1,2,3,4,5,9,10,14,15,19,20,21,22,23,24];
 var k_adj
 var oldCenterTileSrc
 //var newCenterTileSrc //redundants

 nameX = [nameX-2, nameX-1, nameX, nameX+1, nameX+2]
 nameY = [nameY-2, nameY-1, nameY, nameY+1, nameY+2]

 //old 12 == document.getElementById("a22")
 oldCenterTileSrc = aElement[12].src;

//prefer loading center tiles over outer or hidden tiles, domain sharding is other idea
  for(k=0; k<25; k++) {
   k_adj = s0[k];
   setImgSrc(aElement[k_adj], nameX[k_adj%5], nameY[(k_adj/5)|0]);
  }

 aStyle[0].left = aStyle[5].left = aStyle[10].left = aStyle[15].left = aStyle[20].left = aStyle[0].top = aStyle[1].top = aStyle[2].top = aStyle[3].top = aStyle[4].top = "-325px"
 aStyle[1].left = aStyle[6].left = aStyle[11].left = aStyle[16].left = aStyle[21].left = aStyle[5].top = aStyle[6].top = aStyle[7].top = aStyle[8].top = aStyle[9].top = "-69px"
 aStyle[2].left = aStyle[7].left = aStyle[12].left = aStyle[17].left = aStyle[22].left = aStyle[10].top = aStyle[11].top = aStyle[12].top = aStyle[13].top = aStyle[14].top = "187px"
 aStyle[3].left = aStyle[8].left = aStyle[13].left = aStyle[18].left = aStyle[23].left = aStyle[15].top = aStyle[16].top = aStyle[17].top = aStyle[18].top = aStyle[19].top = "443px"
 aStyle[4].left = aStyle[9].left = aStyle[14].left = aStyle[19].left = aStyle[24].left = aStyle[20].top = aStyle[21].top = aStyle[22].top = aStyle[23].top = aStyle[24].top = "699px"

 for(k=0; k<25; k++)
 {
   s0 = aStyle[k]
   s0.top = (parseInt(s0.top) + topShift) + "px"
   s0.left = (parseInt(s0.left) + leftShift) + "px"
 }
 
 //old 12 == document.getElementById("a22")
 //newCenterTileSrc = aElement[12].src
 if(oldCenterTileSrc.toLowerCase() == aElement[12].src.toLowerCase())
 {
//old function showImageTiles()
    for(k=0; k<25; k++)
    {
      aStyle[k].visibility = "visible"
    }
 }
}

/* unused 2021 factor out
function initLoad()
{
  loadMap()
}
*/

function setImgSrc(elem, x, y) {
  var shard = (x*y) % 3;
  elem.src = (shard == 1 ? "//tiles1.tinymta.us.to/" : shard ? "//tiles2.tinymta.us.to/" :
/*STARTINSERTPATH*/
  "../docs/"
/*ENDINSERTPATH*/
  ) + tilePath + (zoomLevel+14) + "_" + (elem.className = x + "_" + y) + ".png"
}

//this must be before the img tags before for IE5 or else exception fires
//IE 5 calls showImage syncronously if tile is disk cached before rest of
//root doc is parsed
function showImage(e)
{
e.style.visibility = "visible"
}

</script>

<!--
unused 2021 factor out body tag attr

 -->
<body onmousedown="hideCustomAlert()"
style="width:630px; height:630px; margin:0px; padding:0px; overflow:hidden;">

<!-- id="mapApplication" -->
<div style="display:inline; position:absolute; top:0px; left:0px; width:630px; height:630px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on">
<!-- id="mapContainer"  -->
 <div style="position:absolute; top:0px; left:0px; width:630px; height:630px; overflow:hidden; cursor:move; background-image:url(mapTileBackground.png); -moz-user-select: none; -webkit-user-select: none;" unselectable="on">
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:-325px; left:-325px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none; border-style: dotted;border-color: Fuchsia" unselectable="on"/>
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:-325px; left:-69px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: double;border-color: Fuchsia" unselectable="on"/>
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:-325px; left:187px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: dashed;border-color: Fuchsia" unselectable="on"/>
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:-325px; left:443px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: groove;border-color: Fuchsia" unselectable="on"/>
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:-325px; left:699px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: solid;border-color: Fuchsia" unselectable="on"/>


 <img onload="showImage(this)" style="z-index:0; position:absolute; top:-69px; left:-325px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: dotted;border-color: lime" unselectable="on"/>
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:-69px; left:-69px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: double;border-color: lime" unselectable="on"/>
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:-69px; left:187px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: dashed;border-color: lime" unselectable="on"/>
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:-69px; left:443px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: groove;border-color: lime" unselectable="on"/>
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:-69px; left:699px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: solid;border-color: lime" unselectable="on"/>


 <img onload="showImage(this)" style="z-index:0; position:absolute; top:187px; left:-325px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: dotted;border-color: cyan" unselectable="on"/>
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:187px; left:-69px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: double;border-color: cyan" unselectable="on"/>
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:187px; left:187px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: dashed;border-color: cyan" unselectable="on"/>
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:187px; left:443px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: groove;border-color: cyan" unselectable="on"/>
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:187px; left:699px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: solid;border-color: cyan" unselectable="on"/>

 <img onload="showImage(this)" style="z-index:0; position:absolute; top:443px; left:-325px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: dotted;border-color: yellow" unselectable="on"/>
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:443px; left:-69px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: double;border-color: yellow" unselectable="on"/>
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:443px; left:187px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: dashed;border-color: yellow" unselectable="on"/>
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:443px; left:443px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: groove;border-color: yellow" unselectable="on"/>
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:443px; left:699px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: solid;border-color: yellow" unselectable="on"/>


 <img onload="showImage(this)" style="z-index:0; position:absolute; top:699px; left:-325px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: dotted;border-color: red" unselectable="on"/>
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:699px; left:-69px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: double;border-color: red" unselectable="on"/>
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:699px; left:187px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: dashed;border-color: red" unselectable="on"/>
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:699px; left:443px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: groove;border-color: red" unselectable="on"/>
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:699px; left:699px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;border-style: solid;border-color: red" unselectable="on"/>


 <div style="display:inline; position:absolute; top:0px; left:0px; width:630px; height:630px; background-image:url(transparentTile.gif); -moz-user-select: none; -webkit-user-select: none;" onmousedown="mapmousedown(event)" onmousemove="mapmousemove(event)" onmouseup="mapmouseup()" onmouseout="mapmouseup()" ontouchstart="mapmousedown(event)" ontouchmove="mapmousemove(event)" ontouchend="mapmouseup()" ontouchcancel="mapmouseup()"><div></div></div>
 <img src="zoom_out.png" style="display:inline;cursor:pointer; position:relative; top:2%; left:2%; height:30px; width:26px;" border="0" onmouseover="menuImageOver(this)" onmouseout="menuImageOut(this)" onclick="zoom(-1)">
 <img src="zoom_in.png" style="display:inline;cursor:pointer; position:relative; top:2%; left:4%; height:30px; width:26px;" border="0" onmouseover="menuImageOver(this)" onmouseout="menuImageOut(this)" onclick="zoom(1)">

<div id="customAlert" style="display:none; position:absolute; top:240px; left:165px; width:300px; background-color:black; color:white; font-family:arial; font-family:arial; font-weight:bold; font-size:18px; border:solid silver 3px; text-align:center; padding-top:50px; padding-bottom:50px;">
<div></div>
 </div>
</div>


</body>
<script language="javascript" type="text/javascript">
(function(){
//OLD function initializeDocumentObjects() {
 //last 2 image elems in this array are zoom buttons, ignore them
 var imgarr = document.getElementsByTagName('img'), i=0;
 for(; i<25; i++)
 {
 aStyle[i] = (aElement[i] = imgarr[i]).style;
 }

 /* 2021 factor out
 centerPixX = defaultCenterX
 centerPixY = defaultCenterY
 */
//END initializeDocumentObjects

(onhashchange =
//OLD function loadFromQueryString() {
// browser cache friendly hash argument
function () {
  var stationLoc = window.location.hash.substring(1), gy, ft;
  if(!stationLoc) {
    if (gy = window.location.search) {
      gy = gy.substring(1).split("&");
      for (i = 0; i < gy.length; i++) {
        ft = gy[i].split("=");
        if (ft[0] == "staID") {
          stationLoc = ft[1];
          break;
        }
      }
    }
  }
  centerOnStation(stationLoc);
}
)();

parent.neighborhoodMapLoaded = true;
})();
</script>
<script>
function showCustomAlert(text)
{
var element = document.getElementById("customAlert");
element.innerHTML = text
element.style.display = "inline"
clearTimeout(alertTimer)
alertTimer = setTimeout(hideCustomAlert,3000)
}

function hideCustomAlert()
{
clearTimeout(alertTimer)
document.getElementById("customAlert").style.display = "none"
}

function menuImageOver(elem) {
    elem.src = elem.src.replace('.png','_over.png');
}
function menuImageOut(elem) {
    elem.src = elem.src.replace('_over.png', '.png');
}

function zoom(i)
{
  hideCustomAlert()
  var currentCenter = getCurrentCenter();
  var currentCenterX = currentCenter[0]
  var currentCenterY = currentCenter[1]
  var newCenterX
  var newCenterY
 if(i == -1)
 {
 if(zoomLevel > 1 /* minZoom */)
 {
  hideImageTiles()
  zoomLevel = zoomLevel - 1
  newCenterX = parseInt(currentCenterX/2)
  newCenterY = parseInt(currentCenterY/2)
  }
  else
  {
     return showCustomAlert("This is the lowest zoom level")
  }
 }
 if(i == 1)
 {
 if(zoomLevel < 2 /* maxZoom */)
 {
  hideImageTiles()
  zoomLevel = zoomLevel + 1
  newCenterX = currentCenterX*2
  newCenterY = currentCenterY*2
 }
 else
 {
  return showCustomAlert("This is the highest zoom level")
 }
 }
 centerPixX = newCenterX
 centerPixY = newCenterY
 loadMap()
}

function getPosition(e) {
    e = e || window.event;
    var cursor = {};
    if (e.targetTouches) {
        cursor.x = Math.round(e.targetTouches[0].pageX)
        cursor.y = Math.round(e.targetTouches[0].pageY)
        e.preventDefault()
    }
    else if (e.pageX || e.pageY) {
        cursor.x = e.pageX;
        cursor.y = e.pageY;
    } 
    else {
        var de = document.documentElement;
        var b = document.body;
        cursor.x = e.clientX + 
            (de.scrollLeft || b.scrollLeft) - (de.clientLeft || 0);
        cursor.y = e.clientY + 
            (de.scrollTop || b.scrollTop) - (de.clientTop || 0);
    }
    return cursor;
}

function mapmousedown(i /*element really*/) {

  hideCustomAlert()
  mapDrag = true
  startXY = getPosition(i)
  for(i=0; i < 25; i++)
  xDownStart[i] = parseInt(aStyle[i].left);
  for(i=0; i < 25; i++)
  yDownStart[i] = parseInt(aStyle[i].top);
}

function mapmousemove(i /*element really*/) {
    if(!mapDrag)
    {
    return;
    }

    i = getPosition(i)
    var curX = i.x - startXY.x
    var curY = i.y - startXY.y

    var curCenterX = centerPixX  - curX
    var curCenterY = centerPixY  - curY
    var maxX = (mapWidth*zoomLevel)-315
    var maxY = (mapHeight*zoomLevel)-315

    if((curCenterX > 315 && curCenterX < maxX) || (centerPixX < 315 && curX < 0) || (centerPixX > maxX && curX > 0))
    {
      for(i=0; i < 25; i++)
        aStyle[i].left = (xDownStart[i] + curX) + "px"
    }

    if((curCenterY > 315 && curCenterY < maxY) || (centerPixY < 315 && curY < 0) || (centerPixY > maxY && curY > 0))
    {
      for(i=0; i < 25; i++)
        aStyle[i].top = (yDownStart[i] + curY) + "px"
    }

}

function mapmouseup()
{

  var arr = getCurrentCenter();
  var x
  var y
  var styleObj
  var elem
  var i=0
  mapDrag = false
  centerPixX = arr[0]
  centerPixY = arr[1]
  for(; i < aStyle.length; i++)
 {
  styleObj = aStyle[i]
  elem = aElement[i]
  arr = elem.className.split("_");
  //cast to number "5"+"5" goes wrong
  x = arr[0]*1
  y = arr[1]*1
  if(parseInt(styleObj.left) > 630)
  {
  x = x-5
  y = y
  styleObj.left = (parseInt(styleObj.left)-1280) + "px"
  styleObj.visibility = "hidden"
  }

  else if(parseInt(styleObj.left)*(-1) > 256)
  {
  x = x+5
  y = y
  styleObj.left = (parseInt(styleObj.left)+1280) + "px"
  styleObj.visibility = "hidden"
  }

  if(parseInt(styleObj.top) > 630)
  {
  x = x
  y = y-5
  styleObj.top = (parseInt(styleObj.top)-1280) + "px"
  styleObj.visibility = "hidden"
  }

  else if(parseInt(styleObj.top)*(-1) > 256)
  {
  x = x
  y = y+5
  styleObj.top = (parseInt(styleObj.top)+1280) + "px"
  styleObj.visibility = "hidden"
  }
  if(styleObj.visibility == "hidden")
  {
    setImgSrc(elem, x, y);
  }
 }

}

</script>
</html>
