!function(){"use strict";var d,v,b,C,k,N,E,j=window,O=location,m=document.documentElement,w=m.firstChild,x={},u=0,A=O.pathname,g=O.hash,S=O.origin,T=I(A),Y={headers:{"accept-version":"3.0"}},q=[,[0,5,12],[,,!Object.values],[3,8,4],[2,7,4],[0,4,2],[0,4,2],[1,6,2],[,9,!j.requestIdleCallback],[]],r={},L=["//backend-unified.mylirr.org","//otp-mta-prod.camsys-apps.com","//collector-otp-prod.camsys-apps.com",["//tiles1.tinymta.us.to","//tiles2.tinymta.us.to"],"/rstop.htm","/rtrain.htm","/stop.htm","/status.htm","/tileMap.htm",["/bk.png","/zo.png","/zi.png","/ts.gif"]],F=[["/f.js"],["/1p.js",function(){C=(C=history.pushState.p1[0])||0,delete history.pushState.p1}],["/fav.js"],["/dumb.js"]],z=["style","body","html","div",,"link",0],D=j.requestIdleCallback||(j.requestAnimationFrame?function(e){requestAnimationFrame(function(){requestAnimationFrame(e)})}:function(e){return setTimeout(e,40)});function B(){for(var e,t=0;t<z.length;t++)(e=z[t])[1]||(e[1]=e[0].cloneNode(0))}j.fetch||j.f||(f=1,w.appendChild(document.createElement("script")).src="/f.js");for(var e,t,n,o,a={body:document.body,style:w.getElementsByTagName("style")[0],y:j.y},p=[a,a.body,A+g,T],h=S.length,s=0;s<z.length;s++)t=(e=z[s])?document.createElement(e):t.cloneNode(0),z[s]=[t];if(z[6][0].rel="prefetch",(t=z[5][0]).rel="preconnect",t.crossOrigin="anonymous",B(),(n=w.querySelectorAll('link[rel="preconnect"]')).length){if(1<n.length){for(o=z[3][1],s=z[3][1]=0;s<n.length;s++)o.appendChild(n[s]);w.appendChild(o)}else o=n[0];v=L[q[T][0]]=a.pc=o}if((n=w.querySelectorAll('link[rel="prefetch"]')).length){if(1<n.length){for(o=z[4][1],s=z[4][1]=0;s<n.length;s++)o.appendChild(n[s]);w.appendChild(o)}else o=n[0];b=L[q[T][1]]=a.pf=o}for(o={},s=0;s<F.length;s++)o[F[s][0]]=s+1;for(n=w.getElementsByTagName("script"),s=0;s<n.length;s++)(t=o[t=(t=n[s]).src.slice(h)])&&((e=F[--t][1])&&e(),F[t]=0);function I(e){var t;switch(e){case"/tileMap.htm":t=8;break;case"/stations.htm":t=7;break;case"/mn/stations.htm":t=6;break;case"/li/stations.htm":t=5;break;case"/":t=4;break;case"/stop.htm":t=3;break;case"/status.htm":t=2;break;case"/rstop.htm":t=1;break;case"/rtrain.htm":t=0;break;default:t=9}return t}function i(e){var t,n,o;if("A"===(e="FONT"===(e=e.target).nodeName?e.parentNode:e).nodeName&&e.href!=N&&(N=e.href,e.origin===S)){var r,a,s,i=e.hash,e=e.pathname;if((e="/"==e.charAt(0)?e:"/"+e)!==O.pathname)if((s=I(e))<4&&(i=i.slice(1),j.S={t:Date.now(),s:i,f:function(e){r?e(r):a=e}},fetch(3===s?"//otp-mta-prod.camsys-apps.com/otp/routers/default/nearby?timerange=1800&apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE&stops=MTASBWY:"+i.slice(0,3):2===s?"//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP":1===s?"//backend-unified.mylirr.org/arrivals/"+i:"//backend-unified.mylirr.org/locations/"+i+"?geometry=NONE",1<s?{}:Y).then(function(e){var t,n;a?a(e):r=200==e.status?(e.json().then(function(e){t?t(e):n=e}),{status:200,json:function(){return{then:function(e){n?setTimeout(e,0,n):t=e}}}}):e}),2===s)&&(R=0,k=1,w.appendChild(document.createElement("script")).src="routes.js"),8===s&&(t=function(e,t){t?n.pr=t:(j.S=n={t:Date.now(),s:i,pt:s,pr:e.body},e.js(0,i))}),!(o=x[e])||o.pgh&&void 0===C){var l,c,p,h,d,f=e,e=s,m=t,u={},g=A,y=T;try{if(l=q[e])for(p=l[2],c=0;p;c++)1&p&&F[c]&&(!function(t,n){var o=document.createElement("script");o.onerror=o.onload=function(e){"error"==e.type?w.removeChild(o):((e=F[t][1])&&e(),F[t]=0,o.onerror=o.onload=0),--n[0]||n[1]()},o.src=F[t][0],w.appendChild(o),n[0]++}(c,h=h||[0,function(){1!==d&&d(),d=0}]),d=1),p>>=1;fetch(f,{},1).then(function(e){e.text().then(function(e){var t,n,o,r,a,s,i;-1!=(t=e.indexOf("<script async defer src="))?"/1p.js"==(r=e.slice(t+=24,t=e.indexOf(">",t)))&&(i=1):t=0,-1!=(t=e.indexOf("<style>",t))?(r=e.slice(t+=7,t=e.indexOf("</style>",t)),t+=8,o=0,":root{color-scheme:light dark}"!=r||(o=E)||(a=1),o||(o=z[0][1],z[0][1]=0,D(B),o.textContent=r,a&&(E=o)),u.style=o):t=0,-1!=(a=e.indexOf("<script>",t))&&(r=j.y,n=e.indexOf("<\/script>",a+8),Function(e.slice(a+8,n))(),(s=(o=u.js=onhashchange).body)&&delete o.body,u.y=j.y,j.y=r,onhashchange=null,m)&&m(u),-1==e.indexOf("No javascript",t)&&(e=-1!=a?e.slice(t,a)+e.slice(n+9):e.slice(t),o=z[2][1],z[2][1]=0,D(B),o.innerHTML=e,u.body=o=o.lastElementChild,m&&m(0,o),s)&&s(o),d?d=function(){i&&(u.pgh=C),x[f]=u,M(g,f,y)}:(i&&(u.pgh=C),x[f]=u,M(g,f,y))})}),l&&(c=l[0],(p=L[c])&&p.length&&(p=G(c,0)),v=P(v,u.pc=p),c=l[1],(p=L[c])&&p.length&&(p=G(c,1)),b=P(b,u.pf=p),D(B))}catch(e){}}else t&&t(o)}}function l(e){console.log(e);var t,n,o,r,a,s,i,l,c,p,h=e.target;N="","A"===(h="FONT"===h.nodeName?h.parentNode:h).nodeName&&h.origin===S&&(a=I(o="/"==(o=h.pathname).charAt(0)?o:"/"+o),(t=x[o])?(r=h.hash,i=o===O.pathname&&r!=O.hash,(l=(c=(s=d[u])[0]).pgh)&&l({},A),2===a&&(k?k=0:(R=0,k=1,w.appendChild(document.createElement("script")).src="routes.js")),i||(m.removeChild(s[1]),P(c.style,t.style),v=P(v,t.pc),b=P(b,t.pf)),s=d[++u]=[],(c=j.S)&&c.pr&&(j.S=0,c.pt===a)&&c.s===r&&Date.now()-c.t<3e3&&(p=c.pr),8!=a&&(n=(n=j.T)&&n.GC)&&n(),d.length=u+1,p?n=p:(n=t.body)||(n=z[1][1],z[1][1]=0,D(B)),s[1]=i?n:m.appendChild(n),history.pushState(u,0,h.href),i||(e.preventDefault(),j.y=t.y,j.onpageshow=t.pg,j.onpagehide=t.pgh,(l=t.js)&&!p&&l(),A=o,g=r,8==(T=a)&&t.pf&&(M(o,"/bk.png",8),M(o,"/zo.png",8),M(o,"/zi.png",8),M(o,"/ts.gif",8))),s[0]=t,s[2]=o+r,s[3]=a,console.log("on click have ent ",performance.now())):console.log("on click no cache spa ent ",performance.now()))}function M(s,i,l){r[i]=1,D(function(){var e,t,n,o,r=S.length,a=x[s];if(e=a.pf)if("DIV"===e.nodeName){for(n=e.firstChild;n;){if(o=n.nextElementSibling,n.href.slice(r)==i){e.removeChild(n);break}n=o}e.firstChild||((t=e.parentNode)&&t.removeChild(e),delete a.pf,b===e&&(b=null),L[q[l][1]]=null)}else e.href.slice(r)==i&&((t=e.parentNode)&&t.removeChild(e),delete a.pf,b===e&&(b=null),L[q[l][1]]=null)})}function c(e,t){var n,o;return e&&r[t]?0:((o=(n=z[5+e])[1])?n[1]=0:o=n[0].cloneNode(0),e?".png"!=(n=t.slice(-4))&&".gif"!=n||(o.rel="preload",o.as="image"):t.indexOf("//tiles")||(o.crossOrigin=null),o.href=t,o)}function G(e,t){var n,o,r,a=L[e];if("string"==typeof a)r=c(t,a);else{for(r=z[3+t][1],n=z[3+t][1]=0;n<a.length;n++)(o=c(t,a[n]))&&r.appendChild(o);r.firstChild||(r=0)}return L[e]=r}function P(e,t){return e!==t&&(e&&t?w.replaceChild(t,e):(e&&w.removeChild(e),t&&w.appendChild(t))),t}D(B),a.pg=j.onpageshow,a.pgh=j.onpagehide,x[A]=a,d=[p],history.state!==u&&history.replaceState(u,0,O.href),addEventListener("touchstart",i,{passive:!0}),addEventListener("mousedown",i,{passive:!0}),addEventListener("click",l),(onpopstate=function(e){var t,n,o,r,a,s,i=O.pathname,l=O.hash;null===(e=e.state)?console.log("spa leave 3 "+i):A==i&&g!=l?(g=l,console.log("spa leave 1 "+i)):((t=(o=(n=d[u])[0]).pgh)&&t({},A),e===u||e>=d.length?(console.log("spa leave 2 "+i,location.pathname,A,performance.now()),onpagehide=0,O.reload()):(a=(r=d[e])[3],s=r[0],A=i,g=l,m.removeChild(n[1]),P(o.style,s.style),v=P(v,s.pc),b=P(b,s.pf),u=e,T=a,m.appendChild(r[1]),j.y=s.y,onpageshow=t=s.pg,onpagehide=s.pgh,t&&t({persisted:1})))}).p=[l,i]}();