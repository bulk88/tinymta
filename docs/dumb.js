!function(){if(history.pushState){var e,t,m,u,g,v,k,r=document.documentElement,C=r.firstChild,b={},w=0,E=location.pathname,N=location.hash,S=4,x=[,[0,5],,[3,8],[2,7],[0,4],[0,4],[1,6]],O=["//backend-unified.mylirr.org","//otp-mta-prod.camsys-apps.com","//collector-otp-prod.camsys-apps.com","//tiles1.tinymta.us.to","/rstop.htm","/rtrain.htm","/stop.htm","/status.htm","/tileMap.htm"],j=document.createElement("style"),A=document.createElement("body");function n(e){var t,n,o,a,s,i="touchstart"===e.type;if("A"===(e="FONT"===(e=e.target).nodeName?e.parentNode:e).nodeName&&(i||!e.tmts)&&(o=e.hash,(t=e.pathname)!==location.pathname)){switch(t){case"/tileMap.htm":n=8;break;case"/stations.htm":n=7;break;case"/mn/stations.htm":n=6;break;case"/li/stations.htm":n=5;break;case"/":n=4;break;case"/stop.htm":n=3;break;case"/status.htm":n=2;break;case"/rstop.htm":n=1;break;case"/rtrain.htm":n=0;break;default:return}if(n<4&&(o=o.slice(1),window.S={t:Date.now(),s:o,f:function(e){a?e(a):s=e}},console.log("s"+Date.now()),fetch(3===n?"//otp-mta-prod.camsys-apps.com/otp/routers/default/nearby?timerange=1800&apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE&stops=MTASBWY:"+o.slice(0,3):2===n?"//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP":1===n?"//backend-unified.mylirr.org/arrivals/"+o:"//backend-unified.mylirr.org/locations/"+o+"?geometry=NONE",1<n?{}:{headers:{"accept-version":"3.0"}}).then(function(e){s?s(e):a=e}),2===n)&&(R=0,C.appendChild(document.createElement("script")).src="routes.js"),!(o=b[t])||o.p1&&void 0===u){var r,c,l,h,p,d=t,m=n;try{-1!=d.indexOf("/stations")&&(l=1,void 0===u?(onpopstate.o=c=function(e,t){t?p.removeChild(r):u=e||0,r.onerror=0,onpopstate.o=0,h?h():h=1},p=document.documentElement.firstChild,(r=document.createElement("script")).onerror=function(){c(0,1)},r.src="1p.js",p.appendChild(r)):h=1),fetch(d,{},1).then(function(e){e.text().then(function(e){var t,n,o,a,s,i={p1:l};(s=x[m])&&(t=s[0],(a=O[t]).length&&((o=v.cloneNode(0)).href=a,a=O[t]=o),i.pc=a,t=s[1],(a=O[t]).length&&((o=k.cloneNode(0)).href=a,a=O[t]=o),i.pf=a),-1!=(t=e.indexOf("<style>"))?(a=e.slice(t+="<style>".length,t=e.indexOf("</style>",t)),t+=8,o=0,":root{color-scheme:light dark}"!=a||(o=g)||(s=1),o||((o=j.cloneNode(0)).textContent=a,s&&(g=o)),i.style=o):t=0,-1!=(scriptStart=e.indexOf("<script>",t))&&(a=y,s=window.onpageshow,window.onpageshow=null,n=e.indexOf("<\/script>",scriptStart+"<script>".length),Function(e.slice(scriptStart+"<script>".length,n))(),i.js=onhashchange,i.y=y,i.pg=window.onpageshow,y=a,window.onpageshow=s,onhashchange=null),-1==e.indexOf("No javascript",t)&&(e=-1!=scriptStart?e.slice(t,scriptStart)+e.slice(n+"<\/script>".length):e.slice(t),(o=document.createElement("html")).innerHTML=e,i.body=o=o.lastElementChild,"SCRIPT"==(e=o.lastElementChild).nodeName)&&o.removeChild(e),!l||h?(b[d]=i,L(d)):h=function(){b[d]=i,L(d)}})})}catch(e){}}e.tmts=i}}function L(s){(this.requestIdleCallback||this.requestAnimationFrame||function(e){setTimeout(e,40)})(function(){var e,t,n,o,a=s.length;for(e in b)(n=(t=b[e]).pf)&&(o=n.href).lastIndexOf(s)===o.length-a&&((o=n.parentNode)&&o.removeChild(n),delete t.pf)})}function o(e){+(e=[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,0,1,2,3,4,5,6,7,8,9,,,,,,,,2,,,3,,,4,,,5,,,6,,,7,,,,8,,,9,,,,,,,,,,2,,,3,,,4,,,5,,,6,,,7,,,,8,,,9][e.keyCode])===e&&(e=document.querySelector('[accesskey="'+e+'"]'))&&e.click()}for(this.fetch||this.f||(f=1,C.appendChild(document.createElement("script")).src="/f.js"),a=C.querySelector('link[rel="preconnect"]'),s={body:document.body,style:C.getElementsByTagName("style")[0],y:y,pc:a},i=[s,s.body,E+N,S],(v=a.cloneNode(0)).removeAttribute("href"),(k=C.querySelector('link[rel="prefetch"]').cloneNode(0)).removeAttribute("href"),(a=window.onpageshow)?s.pg=a:window.onpageshow=function(e){s.pg=e,window.onpageshow=e},b[E]=s,m=[i],history.state!==w&&history.pushState(w,0,location.href),addEventListener("touchstart",n,{passive:!0}),addEventListener("mousedown",n,{passive:!0}),addEventListener("click",function(e){var t,n,o,a,s,i,r,c,l,h=document.documentElement,p=h.firstChild,d=e.target;if("A"===(d="FONT"===d.nodeName?d.parentNode:d).nodeName){switch(a=d.pathname){case"/tileMap.htm":i=8;break;case"/stations.htm":i=7;break;case"/mn/stations.htm":i=6;break;case"/li/stations.htm":i=5;break;case"/":i=4;break;case"/stop.htm":i=3;break;case"/status.htm":i=2;break;case"/rstop.htm":i=1;break;case"/rtrain.htm":i=0;break;default:return}(t=b[a])?(s=d.hash,c=a===location.pathname&&s!=location.hash,(l=(r=m[w])[0]).p1&&u&&S!==i&&u({}),c||(h.removeChild(r[1]),(n=l.style)!==(o=t.style)&&(n&&p.removeChild(n),o)&&p.appendChild(o),(n=l.pc)!==(o=t.pc)&&(n&&p.removeChild(n),o)&&p.appendChild(o),(n=l.pf)!==(o=t.pf)&&(n&&p.removeChild(n),o)&&p.appendChild(o)),r=m[++w]=[],m.length=w+1,t.body?r[1]=c?t.body:h.appendChild(t.body):r[1]=h.appendChild(A.cloneNode(0)),history.pushState(w,0,d.href),c||(e.preventDefault(),y=t.y,window.onpageshow=t.pg,(l=t.js)&&l(),E=a,N=s,S=i),r[0]=t,r[2]=a+s,r[3]=i):console.log("on click no cache spa ent")}}),onpopstate=function(e){var t,n,o,a,s,i;null!==(e=e.state)&&(E==location.pathname&&N!=location.hash?(E=location.pathname,N=location.hash,console.log("spa leave 1")):e===w||e>=m.length?(console.log("spa leave 2"),location.reload()):(o=(n=m[w])[0],s=(a=m[e])[3],E=location.pathname,N=location.hash,i=a[0],o.p1&&u&&S!==s&&u({}),r.removeChild(n[1]),(n=o.style)!==(t=i.style)&&(n&&C.removeChild(n),t)&&C.appendChild(t),(n=o.pc)!==(t=i.pc)&&(n&&C.removeChild(n),t)&&C.appendChild(t),(n=o.pf)!==(t=i.pf)&&(n&&C.removeChild(n),t)&&C.appendChild(t),w=e,S=s,r.appendChild(a[1]),y=i.y,onpageshow=n=i.pg,n&&n({persisted:1})))},addEventListener("keyup",o,0),addEventListener("keypress",o,0),e=C.firstChild;e;)"preconnect"===e.rel&&((t=document.createElement("link")).rel="dns-prefetch",t.href=e.href,C.appendChild(t)),e=e.nextElementSibling}var a,s,i;this.ScriptEngineMajorVersion&&(ScriptEngineMajorVersion()<5||5===ScriptEngineMajorVersion()&&ScriptEngineMinorVersion()<5)&&(onload=function(){for(var e,t,n,o,a=document.links,s=a.length,i=0;i<s;i++)e=(t=a[i]).pathname,n?n===e&&(t.pathname=o):(t=e.length-8,"s"!==(o=e.charAt(t))&&"a"!==o||!~e.indexOf("s"===o?"stop":"atus",t)||(o=(n=e).slice(0,-4)+"ie50.htm",i--));onload=null})}();