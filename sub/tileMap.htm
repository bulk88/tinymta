<html>
<head>
  <link href="//tiles1.tinymta.us.to" rel="dns-prefetch">
  <link href="//tiles1.tinymta.us.to" rel="preconnect">
  <link href="//tiles2.tinymta.us.to" rel="dns-prefetch">
  <link href="//tiles2.tinymta.us.to" rel="preconnect">
  <!-- biggest most visible to least -->
  <link rel="preload" href="mapTileBackground.png" as="image">
  <link rel="preload" href="zoom_out.png" as="image">
  <link rel="preload" href="zoom_in.png" as="image">
  <link rel="preload" href="transparentTile.gif" as="image">
  <meta name="mobileoptimized" content="0">
  <meta name="referrer" content="no-referrer">
  <title>The Weekender</title>
  <style>:root{color-scheme:light dark}
    .tl {
      visibility:hidden;z-index:0; position:absolute; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;
    }
  </style>
</head>
<body style="width:630px; height:630px; margin:0px; padding:0px; overflow:hidden;">
<!-- keep this comment for IE aka pfNextElementSibling -->

  <!-- id="mapApplication" -->
  <div style="display:inline; position:absolute; top:0px; left:0px; width:630px; height:630px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on">
    <!-- id="mapContainer"  -->
    <div style="position:absolute; top:0px; left:0px; width:630px; height:630px; overflow:hidden; cursor:move; background-image:url(mapTileBackground.png); -moz-user-select: none; -webkit-user-select: none;" unselectable="on">
      <img class="tl" unselectable="on"/>
      <!-- border-style: dotted;border-color: Fuchsia -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: double;border-color: Fuchsia -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: dashed;border-color: Fuchsia -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: groove;border-color: Fuchsia -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: solid;border-color: Fuchsia -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: dotted;border-color: lime -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: double;border-color: lime -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: dashed;border-color: lime -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: groove;border-color: lime -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: solid;border-color: lime -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: dotted;border-color: cyan -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: double;border-color: cyan -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: dashed;border-color: cyan -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: groove;border-color: cyan -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: solid;border-color: cyan -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: dotted;border-color: yellow -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: double;border-color: yellow -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: dashed;border-color: yellow -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: groove;border-color: yellow -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: solid;border-color: yellow -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: dotted;border-color: red -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: double;border-color: red -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: dashed;border-color: red -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: groove;border-color: red -->
      <img class="tl" unselectable="on"/>
      <!-- border-style: solid;border-color: red -->
      <div style="display:inline; position:absolute; top:0px; left:0px; width:630px; height:630px; -moz-user-select: none; -webkit-user-select: none; background-image:url(transparentTile.gif);"></div>
      <img style="cursor:pointer; position:relative; top:2%; left:2%; height:30px; width:26px;" border="0" src="zoom_out.png" id="zo">
      <!-- skip id="zi" for zoom in to save code bytes -->
      <img style="cursor:pointer; position:relative; top:2%; left:4%; height:30px; width:26px;" border="0" src="zoom_in.png">
      <!-- rmved id="customAlert", not needed anymore -->
<!-- WARING DO NOT REMOVE THE LITTERAL UTF8 NBSP IN THIS DIV -->
      <div style="display:none; position:absolute; width:300px; background-color:black; color:white; font-family:arial; font-family:arial; font-weight:bold; font-size:18px; border:solid silver 3px; text-align:center; padding-top:50px; padding-bottom:50px;">
Â 
      </div>
    </div>
  </div>
</body>
<script>
// Neighborhood Map Dimensions
/* removed/inlined
var mapImgDimensions = {
Manhattan: "5000,17408",
B1: "1500,1500",
B2: "1500,1500",
B3: "1500,1500",
B4: "1500,1500",
B5: "1500,1500",
B6: "1500,1500",
B7: "1500,1500",
B8: "1500,1500",
B9: "1500,1500",
B10: "1500,1500",
B11: "1500,1500",
B12: "1500,1500",
B14: "1500,1500",
B15: "1500,1500",
B16: "1500,1500",
B17: "1500,1500",
B18: "1500,1500",
B19: "1500,1500",
B13: "1500,1500",
BX1: "1500,1500",
BX2: "1500,1500",
BX3: "1500,1500",
BX4: "1500,1500",
BX5: "1500,1500",
BX6: "1500,1500",
BX7: "1500,1500",
BX8: "1500,1500",
BX9: "1500,1500",
BX10: "1500,1500",
Q1: "1500,1500",
Q2: "1500,1500",
Q3: "1500,1500",
Q4: "1500,1500",
Q5: "1500,1500",
Q6: "1500,1500",
Q7: "1500,1500",
Q8: "1500,1500",
Q9: "1500,1500",
Q10: "1500,1500",
Q11: "1500,1500",
Q12: "1500,1500",
S1: "1500,1500"
};
 */

var tilePath;
var mapWidth;
var mapHeight;
var maxX;
var maxY;
var tileDirectory;
var tilesNotHidden;
var mapDrag;

var centerPixX;
var centerPixY;
var startXY;
var xDownStart = [];
var yDownStart = [];

//set the initial map settings
var zoomLevel = 2;
/* 2021 factor out
var defaultCenterX
var defaultCenterY
 */

var aStyle = new Array();
var aElement = new Array();

var _exports = { /*GC:0 prop GC (free unused tiles) is not mangled*/
};
//image tile load order
var tileSrcSetOrderArr = [12, 7, 17, 11, 13, 6, 8, 16, 18, 0, 1, 2, 3, 4, 5, 9, 10, 14, 15, 19, 20, 21, 22, 23, 24];

var _window = window;
var rAF =
  _window.requestAnimationFrame ||
  _window.mozRequestAnimationFrame ||
  _window.webkitRequestAnimationFrame ||
  _window.oRequestAnimationFrame ||
  _window.msRequestAnimationFrame || function (callback) {
    setTimeout(callback, 33)
  };

//.SEMV() is IE only FN all vers
var pfIECopyEvt = _window.ScriptEngineMajorVersion && function(evt) {
  return {targetTouches: evt.targetTouches, pageX: evt.pageX, pageY: evt.pageY, clientX: evt.clientX, clientY: evt.clientY};
};

//nvr changes in SPA mode
var htmlEl = document.documentElement;

//arg stationLocInfo is mandatory "#123" type str from ".hash" (undef/null not allowed)
function onNewURL(body, stationLocInfo) {
  var isManhattan;
  var yCoor_i = 0;
  var xCoor_value = 0;
  var stationLoc = "'V7Y:((Pt+'J,]m'O;J`&s,.d&EXM3'F1jS&)Jc;'Klcj'E0L?(Q?&9'QS_)'l3V?'A&cr/H2UV'3>dh(4CoR(j/.I%%)2;%7I2R&*;yy&nO<b's_f.&+;3F&^uZJ%9w{p'Xf]k(QjlB)5t[d%[Tlv&F]-P'I<P*(7y??(-sU/&7`]f'%rUa%^/co%dW;9&NrPR'>GAW%ig;{'t_'k(+@d9%k,R*%y:Cv&dn6?'e1I+(SAl5&HM6X'cq'g(d5Z'(8;{O&s11O&-DB1(`Aoj%k+T;'(Kmw(T^]'%p;R,&M]1m&/v*n'J-(-'?_iA%U-Fn'{0VF&IfVx&ZUWK'e5EU&8x7n(:la<&Wv4y'ge%`(m5pW%U.B/&/s@u'J)3H&maMS'xWA-'a;BV)9mfV%H9()(YhS3'S+.8)%0/j'GLTy)2+/j%IO7[&LD0Q(^Ja0'ocTh&NZyf%Vq1l%n2yW'nbw;&-A1d([/]n&2%;y&ta?8((3uZ%?5U{)-pBf&eq{N&]E.L&+OXR'n7XZ'*PI`&h:N((g%^,&m`dw'5nBg%^0u;'k/-U')yqU'CA@-%TX>d(I)0I%ykUu&s{F`'stR8(O;PR(9U:D(XVhB'u`%C&e]>R('vZ)'@9oY&HO'<&.{oJ%6qwJ(eNrP&(L1Z(0QB>&i++d%tIcp%tC-0&J&*a&:glr&?wZ`'[FNL'6q-W(*g:K)@PKb&pgE0)5t3m'nd^;&YRa`)5vch'Nb`d(%]ah(V;/+(<-9q(rD8)'b@Bl&TX3N%^0wq)6Kx5&squ4&8y5E%AeE1)&K9J(5^B@'9;xr'=,hb({F'I&[kd:&/r8S'X:(q&V_/0%Fq]q(j[;2'B>g<%m^LZ(d3[Q'oQx8&,*.)&o:Fj)5rX{(KX,M)=^Cu(J?xk'VvI4&T-FC'O7(C%VG]%'%opa(K[{?'O9db%2wDc&5*`T'-XF+(FK::%3Rmc)5s2;(XRK1'r-`T&tHPh&?JqJ(wR]i(4BTU'Qgjn&heus%t.aK%-)+A)+WBZ')cfn(+?a(&6EV<%;<1F'aA=.',DQ8).1I3'oMy8&yT-t&IeXt%-)R3(d3{-(Coi=(j]Pf&^MQW'w@3{%Sh+*(/3BM'2ey*(LqaW'4,Gk(]b]aJb21+;[B?+:V]vW6JI[b8;NSN4n),g2Z-cv-l+T:(:n)5,&&a]*P-@S0O6Al<k0mN>^gHg@=d]lA`s,v1[/gXC6m4X(rJ4v'C[>S34t[lDF{?54a2D_6abk:8_a,:2r_m&EU2qqG>Lj+HwXF5JSxwbLKP(?N7FY&:CmCq<yFF5>BFN:@9rSlAP2{?C:eF:;`T{gGBC:XF>66NGi/Z5J_ZiNKg]dSL['DDMV0xgNOvfIFo>vqI4aU?Oo:ogQ@&F]43wZ:F53_IG`-.0L]ZB5NAes?Ouc3DI21*0JZMj?4w3O56q<8?8hh=q:JB6N;D2y0QUy^IRc5uSK{*HII,xY0SQFr:Te*O0S*[.lV/CKSEVO`0LaQPlW<U1qFpZiqU'A,]V4RCgW3QU:U>W8DWvb:]Vwc3SU'AmDS)Cn]N:(ogW8`qbJk?YqKe0GSL[+_qXP9sbQN<CXX3j^+UpymSOX)DNI&SrvQ1mB]S5%,]VoyFNTj;;:G;vX:Pm&-&QrLDSEY.s+TZeKX8laWb:OTB+;V>KD<qaoq>LiZ]@D@`:B+(tqCktS5OK0WIDqF-&NC.qNR,y-:Px]lIRQ3v:NC1']Qu-;lS>-w]+hqBX-_0-I)Ks,+.wwJX'TCm@'+&rE(5[Xc&ZTQr(E2m'&)M0w&B)'X'?2mc'xRw<''1LA'd1'i&[,d''{tG+(OgVQ%y@>m%o:T/&TlgL&DUk'&Cj)m&:&QF';AS+&,+Kr(Xk`7(QXSV&&G5J&KS=A(5Zfu(Bk*[(]arF&,)UJ(c2<5&,*N,(0PU7'pma7(J>ki(BU4-(9RtA'b.8N'&X&2'JnbP),o<)'1d&k(aUsh(+?5B(s]u((3*QG'JTf>'NK)p&i(t6&/tFV&_dy3'm_P_'2'VP&OMk^&Oyx-'.vn&&iQRq&`NoH%^^I=&V_t<&/Hp&&SBN&&ErJ5'6v,9%)tT2'o9fK%YeZ/'MGcN&Rl8a'vyI*'WM6t(KYI8'C@a*'3*/b'1Q*w''w_j'M[UN'CUje';l3)'Xix/(:oMu&8^v=&]{`X'-pJ]'4o{U'&si>&q+N3&e5?x&U3cN&B?Bj%^b(n%Jj{2%8c.=%o%-y(e3,_(_NA=(Xfb?(RV6-(?ww.(.1su(%ZSq(nLIp'i*Kj'^cB='J@K'";
  _exports.GC = freeImagesTiles;
  //5 printable bytes holds 1 32 bit station bitfield
  if ((stationLocInfo = ((stationLocInfo.slice(1)) | 0) * 5) < stationLoc.length) {
    for (; yCoor_i < 5; yCoor_i++) {
      tileDirectory = stationLoc.charCodeAt(stationLocInfo + yCoor_i);
      // Accumulate value in base 85
      xCoor_value = xCoor_value * 85 + ((tileDirectory == 123 ? 92 : tileDirectory) - 37);
    }
    tileDirectory = (xCoor_value % 44 /*scaledir*/) + 1;
    tileDirectory = tileDirectory < 11 ? "BX" + tileDirectory : tileDirectory < 30 ? "B" + (tileDirectory - 10) : tileDirectory == 30 ? ((isManhattan=1),"Manhattan") : tileDirectory == 43 ? "S1" : "Q" + (tileDirectory - 30);

    yCoor_i = ((((xCoor_value / (44 /*scaledir*/ * 3607 /*scalex*/) % 16942 /*scaley*/)) + 19) /*shifty*/ * zoomLevel) | 0;

    //VARIABLE REUSE watch X Y order
    xCoor_value = (((xCoor_value / 44 /*scaledir*/ % 3607 /*scalex*/) + 69) /*shiftx*/ * zoomLevel) | 0;

    if (xCoor_value < 315)
      xCoor_value = 315;
    if (yCoor_i < 315)
      yCoor_i = 315;

    if (zoomLevel == 1) {
      if (isManhattan) {
        if (xCoor_value > 4685)
          xCoor_value = 4685;
        if (yCoor_i > 17093)
          yCoor_i = 17093;
      } else {
        if (xCoor_value > 1185)
          xCoor_value = 1185;
        if (yCoor_i > 1185)
          yCoor_i = 1185;
      }
    }
    //if (zoomLevel == 2) { no oth zLvls in API
    else {
      if (isManhattan) {
        if (xCoor_value > 9685)
          xCoor_value = 9685;
        if (yCoor_i > 34501)
          yCoor_i = 34501;
      } else {
        if (xCoor_value > 2685)
          xCoor_value = 2685;
        if (yCoor_i > 2685)
          yCoor_i = 2685;
      }
    }
    // prev var mapArgs = mapImgDimensions[tileDirectory].split(",")
    mapWidth = isManhattan ? 5000 : 1500;
    mapHeight = isManhattan ? 17408 : 1500;
    maxX = (mapWidth * zoomLevel) - 315;
    maxY = (mapHeight * zoomLevel) - 315;
    //function setTilePath(d)
    //{
    //tilePath = "http://wd1.mtahq.org/neighborhoodMaps/" + d + "/"
    //tilePath = "http://web.mta.info/neighborhoodMaps/" + tileDirectory + "/"
    //tilePath = "http://10.8.86.78/WeekenderVer2/neighborhoodMaps/" + d + "/"

    tilePath = "neighborhoodMaps/" + tileDirectory + "/";

    //}

    centerPixX = xCoor_value;
    centerPixY = yCoor_i;
    loadMap();
  }//if found staCodeEntry
}

function freeImagesTiles() {
  (_window.requestIdleCallback || _window.requestAnimationFrame || function (callback) {
    setTimeout(callback, 40)
  })(function () {
    //free this func from global space flag/CB
    _exports.GC = 0;
    hideImageTiles();
    for (var k = 0; k < 25; k++) {
      aElement[k].src = "";
    }
  });
}
function hideImageTiles() {
  tilesNotHidden = 0;
  for (var k = 0; k < 25; k++) {
    aStyle[k].visibility = "hidden";
  }
}

function getCurrentCenter() {
  //formerly 12 == document.getElementById("a22");
  var el = aElement[12];
  var style = aStyle[12];
  return [(el.tX * 256) + (315 - parseInt(style.left)), (el.tY * 256) + (315 - parseInt(style.top))];
}

/* inlined
function getRemainderPix(totalPix) {
  return totalPix % 256;
}
*/

function getNumberOfTiles(totalPix) {
  var remainderPix = totalPix % 256;
  var tilesCount = (totalPix - remainderPix) / 256;
  return tilesCount;
}

function loadMap() {
  //virgin no SPA page load, or SPA GC jps, the tiles are already hidden
  //so skip the loop
  if (tilesNotHidden)
    hideImageTiles();

  //function getCenterTile(pY,pX)
  //{
  // old name numberOfRow
  var nameX_topShift = getNumberOfTiles(centerPixX);
  //old name numberOfColumns
  var nameY_leftShift = getNumberOfTiles(centerPixY);
  //}
  //resetTileCells(128 - getRemainderPix(centerPixY), 128 - getRemainderPix(centerPixX));
  //}

  //function resetTileCells(topShift,leftShift)
  //{
  var k;
  var k_adj;

  nameX_topShift = [nameX_topShift - 2, nameX_topShift - 1, nameX_topShift, nameX_topShift + 1, nameX_topShift + 2];
  nameY_leftShift = [nameY_leftShift - 2, nameY_leftShift - 1, nameY_leftShift, nameY_leftShift + 1, nameY_leftShift + 2];

  //prefer loading center tiles over outer or hidden tiles, domain sharding is other idea
  for (k = 0; k < 25; k++) {
    k_adj = tileSrcSetOrderArr[k];
    setImgSrc(aElement[k_adj], nameX_topShift[k_adj % 5], nameY_leftShift[(k_adj / 5) | 0]);
  }

  nameX_topShift = 128 - /*getRemainderPix*/(centerPixY % 256);
  nameY_leftShift = 128 - /*getRemainderPix*/(centerPixX % 256);
  //on navigate IMG.style.top/.left undef, on redraw has old values that are tossed
  aStyle[0].left = aStyle[5].left = aStyle[10].left = aStyle[15].left = aStyle[20].left = ((-325)+nameY_leftShift)/*+"px"*/;
  aStyle[0].top = aStyle[1].top = aStyle[2].top = aStyle[3].top = aStyle[4].top = ((-325)+nameX_topShift)/*+"px"*/;
  aStyle[1].left = aStyle[6].left = aStyle[11].left = aStyle[16].left = aStyle[21].left = ((-69)+nameY_leftShift)/*+"px"*/;
  aStyle[5].top = aStyle[6].top = aStyle[7].top = aStyle[8].top = aStyle[9].top = ((-69)+nameX_topShift)/*+"px"*/;
  aStyle[2].left = aStyle[7].left = aStyle[12].left = aStyle[17].left = aStyle[22].left = ((187)+nameY_leftShift)/*+"px"*/;
  aStyle[10].top = aStyle[11].top = aStyle[12].top = aStyle[13].top = aStyle[14].top = ((187)+nameX_topShift)/*+"px"*/;
  aStyle[3].left = aStyle[8].left = aStyle[13].left = aStyle[18].left = aStyle[23].left = ((443)+nameY_leftShift)/*+"px"*/;
  aStyle[15].top = aStyle[16].top = aStyle[17].top = aStyle[18].top = aStyle[19].top = ((443)+nameX_topShift)/*+"px"*/;
  aStyle[4].left = aStyle[9].left = aStyle[14].left = aStyle[19].left = aStyle[24].left = ((699)+nameY_leftShift)/*+"px"*/;
  aStyle[20].top = aStyle[21].top = aStyle[22].top = aStyle[23].top = aStyle[24].top = ((699)+nameX_topShift)/*+"px"*/;
}

function setImgSrc(elem, x, y) {
  var shard = (x * y) % 3;
  elem.src = (shard == 1 ? "//tiles1.tinymta.us.to/" : shard ? "//tiles2.tinymta.us.to/" :
/*STARTINSERTPATH*/
    "../docs/"
/*ENDINSERTPATH*/
  ) + tilePath + (zoomLevel + 14) + "_" + (elem.tX = x) + "_" + (elem.tY = y) + ".png";
}

function showImage(/*evt*/) {
  tilesNotHidden = 1; //this is IMG obj
  this.style.visibility = "visible";
}

//in SPA mode body El is usually detached
//on navigate its reg "attached" document.body
function initializeDocumentObjects(detachedBodyEl) {
  var imgEl, //ultimatly transp .gif drag IMG
  imgArr_el,
  i = 0,
      //IE 5.0 and 5.5 return type 1 for comments and ! as node name
      //IE 6.0 returns 8 and #comment as node name (W3C correct)
      //use !== 1 for perf as 1st check
      //but it will only be true on >= IE 6 and FF 3.0
  pfNextElementSibling = (detachedBodyEl.firstChild.nodeName !== "SCRIPT")
    && function (el, nextFlag) {
    do {
      el = el[nextFlag ? 'nextSibling' : 'previousSibling'];
    } while (el && el.nodeName !== "DIV");
  return el;
  },
  zm_icon_urls = ['_over.png', '.png'];

/*closure globals \|/ */
var customAlertEl;
var alertTimer;
var delayedMouseMoveEvt;

  detachedBodyEl.onmousedown = hideCustomAlert;

  //last 2 image elems in this array are zoom buttons, ignore them
  imgArr_el = detachedBodyEl.getElementsByTagName('img');
  for (; i < 25; i++) {
    (imgEl = aElement[i] = imgArr_el[i]).onload = showImage;
    aStyle[i] = imgEl.style;
  }

  //zoom icon evt handlers
  (imgEl = imgArr_el[25]).onmouseover =
  imgEl.onmouseout =
  (imgArr_el = imgArr_el[26]).onmouseover =
  imgArr_el.onmouseout =
    function (evt) {
      evt = evt || event; //old IE
      //one fn does both mouseout (8 chars) and mouseover (9 chars)
      this.src = this.src.replace(zm_icon_urls[evt = evt.type.length-8], zm_icon_urls[!evt|0]);
    }
  ;

  imgArr_el.onclick = imgEl.onclick = zoom;
  
  //use el.nS is MINIFIED ALL UAs or el.nS for old IE (no text nodes test above)
  //other wise use the PF which supports !!!no el.nES UAs
  customAlertEl = (pfNextElementSibling && pfNextElementSibling(imgArr_el,1)) || imgArr_el.nextSibling;

/*OBSOLETE
  //PF IE 8 and under
  pfSetTextContent = typeof customAlertEl.textContent != 'string'
    && function (text) {
        while (customAlertEl.lastChild !== null) {
          customAlertEl.removeChild(customAlertEl.lastChild); //remove all existing content
        }
        customAlertEl.appendChild(document.createTextNode(text));
  };
*/
  //DIV with transparentTile.gif
  imgEl = (pfNextElementSibling &&  pfNextElementSibling(imgEl)) || imgEl.previousSibling;
  imgEl.ontouchstart = imgEl.onmousedown = mapmousedown;

  imgEl.ontouchcancel = imgEl.ontouchend = /*imgEl.onmouseup = */ document.onmouseup = mapmouseup;
  //DONT REUSE imgEl, its now a global

  //if SPA mode can't use document.getElementById("customAlert")
  //per spec gEBI returns null if detached body/div/el, and prerender
  //feature has a detached BODY and other els, but for IE 8 and older
  //use gEBI because QS not avail, note IE 9 added QS, IE 10 added pushState()
  //customAlertEl = imgArr_el.querySelector ?
  //  imgArr_el.querySelector("div#customAlert")
  //   : document.getElementById("customAlert");

  /* 2021 factor out
  centerPixX = defaultCenterX
  centerPixY = defaultCenterY
   */

  //fn zoom() closure scoped
  function zoom(/*evt*/) {
    hideCustomAlert();
    var currentCenter = getCurrentCenter();
    var currentCenterX = currentCenter[0];
    var currentCenterY = currentCenter[1];

    //zoom out=zo, zoom in IMG el has no id attr (byte savings)
    if (this.id/* == "zo"*/) {
      if (zoomLevel == 2 /* minZoom */) {
        zoomLevel = 1;
        centerPixX = /*newCenterX =*/ parseInt(currentCenterX / 2);
        centerPixY = /*newCenterY =*/ parseInt(currentCenterY / 2);
      } else {
        return showCustomAlert("This is the lowest zoom level");
      }
    } else { //zoom in
      if (zoomLevel == 1 /* maxZoom */) {
        zoomLevel = 2;
        centerPixX = /*newCenterX =*/ currentCenterX * 2;
        centerPixY = /*newCenterY =*/ currentCenterY * 2;
      } else {
        return showCustomAlert("This is the highest zoom level");
      }
    }
    loadMap();
  } //end fn zoom()

  function showCustomAlert(text) {
    var h = detachedBodyEl.clientHeight;
    var w = detachedBodyEl.clientWidth;
    var s = customAlertEl.style;
    //cAE and aT globals
    customAlertEl.firstChild.nodeValue = text;
    s.display = "inline";

    //vh and vh not avail on legacy UAs
    s.top = ((((h>630?630:h)-(50+50+3+3+21))/2)|0);
    s.left = ((((w>630?630:w)-300)/2)|0);

    //this fn showCustomAlert() so rare called
    //just skip if(alertTimer) {clearTimeout(alertTimer)} for code size
    clearTimeout(alertTimer);
    alertTimer = setTimeout(hideCustomAlert, 3000);
  }

  function hideCustomAlert () {
    if(alertTimer){
      alertTimer = clearTimeout(alertTimer);
      customAlertEl.style.display = "none";
    }
  }

//mapmousemove can fire 15/s min, 50/s high ish, 125/s max on chrme desktop
//around 125/s image tiles/UI locks up, rAF locks to 50/s HARD ALWAYS for me
//but MMM runs and STILL skips upto 130/s calls, while rAF locks to 50/s
//seems good to me

  function mapmousemove (i /*evt really*/) {
    if (!mapDrag) {
      return;
    }
    if(!i) { //old IE
      i = event;
    }
    if(delayedMouseMoveEvt) {
//https://stackoverflow.com/questions/3531751/member-not-found-ie-error-ie-6-7-8-9/3533725#3533725
      delayedMouseMoveEvt = (pfIECopyEvt && pfIECopyEvt(i)) || i;
      //console.log(Date.now()); as low as 3 MS!!! between onMM evts
      return;
    }

    i = getPosition(i);
    var curX = i.x - startXY.x;
    var curY = i.y - startXY.y;

    var curCenterX = centerPixX - curX;
    var curCenterY = centerPixY - curY;
    var updateX = (curCenterX > 315 && curCenterX < maxX) || (centerPixX < 315 && curX < 0) || (centerPixX > maxX && curX > 0);
    var updateY = (curCenterY > 315 && curCenterY < maxY) || (centerPixY < 315 && curY < 0) || (centerPixY > maxY && curY > 0);

    if(updateX || updateY) { //max* is false if user pans to L/R T/B edge (no tiles)
      for (i = 0; i < 25; i++) {
        curCenterX = aStyle[i];
        if(updateX)
          curCenterX.left = (xDownStart[i] + curX)/*+"px"*/;
        if(updateY)
          curCenterX.top = (yDownStart[i] + curY)/*+"px"*/;
      }
    }
    //de-bounce all onMMs until next rAF() frame or 33 ms timer
    delayedMouseMoveEvt = 1;
    rAF(delayedMM);
  }

  function delayedMM(evt /*really is fltng pt tmstmp*/) {
    evt = delayedMouseMoveEvt;
    delayedMouseMoveEvt = 0;
    if (evt !== 1) {
      mapmousemove(evt);
    }
  }
  function mapmouseup (evt) {
    if (!mapDrag) {
      return;
    }
    var arr = getCurrentCenter();
    var x;
    var y;
    var left;
    var top;
    var styleObj;
    var elem;
    var hideFlag;
    var i = 0;
    //this. is document obj rn
    mapDrag = imgEl.ontouchmove = imgEl.onmousemove = null;
    centerPixX = arr[0];
    centerPixY = arr[1];
    for (; i < 25; i++) {
      hideFlag = 0;
      styleObj = aStyle[i];
      elem = aElement[i];
      x = elem.tX;
      y = elem.tY;
      left = parseInt(styleObj.left);
      if (left > 630) {
        x = x - 5;
        styleObj.left = (left - 1280)/*+"px"*/;
        hideFlag = 1;
      } else if (left * (-1) > 256) {
        x = x + 5;
        styleObj.left = (left + 1280)/*+"px"*/;
        hideFlag = 1;
      }
      top = parseInt(styleObj.top);
      if (top > 630) {
        y = y - 5;
        styleObj.top = (top - 1280)/*+"px"*/;
        hideFlag = 1;
      } else if (top * (-1) > 256) {
        y = y + 5;
        styleObj.top = (top + 1280)/*+"px"*/;
        hideFlag = 1;
      }
      if (hideFlag) {
        styleObj.visibility = "hidden";
        setImgSrc(elem, x, y);
      }
    }
  }

  function mapmousedown (evt_i) {
    var el;
    if(!evt_i) { //old IE
      evt_i = event;
    }
    hideCustomAlert();
    mapDrag = 1;
    startXY = getPosition(evt_i);

    this.ontouchmove = this.onmousemove = mapmousemove;

    for (evt_i = 0; evt_i < 25; evt_i++) {
      el = aStyle[evt_i];
      xDownStart[evt_i] = parseInt(el.left);
      yDownStart[evt_i] = parseInt(el.top);
    }
  }
  function getPosition(e/*evt*/) {
    if (e.targetTouches) {
      e = e.targetTouches[0];
      return {x: Math.round(e.pageX), y: Math.round(e.pageY)};
      /* disabled from SO sample to allow pinch zoom by browser
      and DOM drag
      e.preventDefault();
       */
    } else if (e.pageX || e.pageY) {
      return {x: e.pageX, y: e.pageY};
    } else {
      return {
        x: e.clientX +
          (htmlEl.scrollLeft || detachedBodyEl.scrollLeft) - (htmlEl.clientLeft || 0),
        y: e.clientY +
          (htmlEl.scrollTop || detachedBodyEl.scrollTop) - (htmlEl.clientTop || 0)
      };
    }
  }

}// END function initializeDocumentObjects()

//REMOVED CODE, window.T empty now except for T.GC()
//note using "window.y.foo()" specically token "y" is unworkable
//b/c in SPA mode, a DETACHED DISCONNECED OFFSCREEN <IMG> can fire onload=()
//but SPA swapper, already switched out window.y global
//so DETACHED DISCONNECED OFFSCREEN <IMG> throws an exception, just make a global
//for SPA mode that keeps the tM.htm global funcs around 24/7 as a fix
if (_window.onpopstate) {
  _window.T = _exports;
  onNewURL.body = initializeDocumentObjects;
  onhashchange = onNewURL;
}
    //not a SPA, SPA loader doesn't exec 2nd script tag
    //if (!_window.onpopstate) {
    else {
      if (_window.onpopstate === null)
        onpopstate = function (evt) {
          evt.state !== null && location.reload()
        };
      initializeDocumentObjects(document.body);
      onNewURL(0,location.hash);
    }
</script>
</html>