<meta content=0 name=mobileoptimized><meta content=no-referrer name=referrer><link href="//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP"rel=preload as=fetch crossorigin><link href=routes.js rel=preload as=fetch crossorigin><link href=//collector-otp-prod.camsys-apps.com rel=dns-prefetch><link href=//collector-otp-prod.camsys-apps.com rel=preconnect>No javascript<script>var T,t="/routes.js",e="//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP",r="<a href=javascript:history.back()>Back</a> Refresh[<a href=javascript:a()>Fast</a> <a href=\"javascript:location.replace('status_.htm')\">Slow</a>] <a href="+t+">RawR</a> <a href="+e+">RawA</a><br>",S,A;function a(){c(t),c(e,1),document.body.innerHTML=r}function L(t,e){e={4:"00933c",5:"00933c","5X":"00933c",6:"00933c","6X":"00a65c",A:"2850ad",C:"2850ad",E:"2850ad",G:"6cbe45",GS:"6d6e71",J:"996633",Z:"996633",L:"a7a9ac",7:"b933ad","7X":"b933ad",1:"ee352e",2:"ee352e",3:"ee352e",N:"fccc0a",Q:"fccc0a",R:"fccc0a",W:"fccc0a",B:"ff6319",D:"ff6319",F:"ff6319",FX:"ff6319",M:"ff6319"}[e||t];return e?"<font color="+e+">"+t+"</font>":t}function n(t){for(var e,r,a,n,o,i,s,c={},u=Math.round(Date.now()/1e3),l=0;l<t.length;l++){e=t[l],r=!1;try{if((a=e.alert["transit_realtime.mercury_alert"])&&e.alert.active_period){var f=a.hasOwnProperty("display_before_active");if(~e.id.indexOf("planned_work")&&!f)r=!1;else for(o=e.alert.active_period,n=0;n<o.length;n++)(i=o[n]).start&&!r&&(s=i.start,f&&(s-=a.display_before_active),s<u&&(r=!0),i.end)&&u>i.end&&(r=!1)}}catch(p){console.log(p)}if(r)for(o=e.alert.informed_entity,n=0;n<o.length;n++)(r=(i=o[n]).route_id)&&(r=r.toLowerCase(),(s=(s=c[i.agency_id]=c[i.agency_id]||{})[r]=s[r]||[]).push(e))}return c}function R(t){for(var e,r=!1,a=!1,n=0;n<t.length;n++){if("en-html"===(e=t[n]).language)return e.text;"en"===e.language?r=e.text:""===e.language&&(a=e.text)}return r||a||!1}function j(t){return t.replace(/(<p style="min-height:10px"><\/p>)|(^<p>)|((<p><\/p>|<\/p>)+$)/g,"")}function o(t){S="object"==typeof(t=t.contents||t)?t:eval("0,"+t),A&&s()}function i(t){A=n(("object"==typeof(t=t.contents||t)?t:this.JSON?JSON.parse(t):eval("0,"+t)).entity),S&&s()}function s(){function t(t,u,l){return t.forEach(function(t){var e,r,a,n,o,i,s=(""+t[0]).toLowerCase(),c=l[t[3]||0];if(e=(e=u[c])&&e[s]){for(r=0;r<e.length;r++)n=(o=e[r]).alert.informed_entity.find(function(t){return t.agency_id===c&&t.route_id.toLowerCase()==s?1:0}),a=(a=o.alert["transit_realtime.mercury_alert"].human_readable_active_period)?R(a.translation):"",e[r]={statusSummary:(i=o.alert["transit_realtime.mercury_alert"])?i.alert_type:"No Status Summary",statusDescription:!!(i=o.alert.description_text)&&R(i.translation),statusTitle:!!(i=o.alert.header_text)&&R(i.translation),priority:(o=-10,o=(i=(i=(i=n)["transit_realtime.mercury_entity_selector"])&&i.sort_order)?(o=i.split(":")[2])?+o:100:o),duration:a};t[5]=e}}),t}function e(t){t.sort(function(t,e){return t[4]-e[4]})}function r(t,e){for(var r,a,n=0;n<e.length;n++){var o=e[n],i=o[5]&&o[5].length?o[5][0].statusSummary:"On or Close",s="On or Close"!=i,c="";if(s){for(c=o[5],a=0;a<c.length;a++)r=c[a],c[a]="<b>"+r.statusSummary+"</b><br>"+j(r.statusTitle)+(r.duration?"<br>"+r.duration:"")+"<br>"+(r.statusDescription?j(r.statusDescription):"");c=c.join("<hr>")}e[n]="<hr>"+(s?"<details><summary>":"")+"<font color="+o[2]+">"+o[1]+"</font> "+i+(s?"</summary>"+c+"</details>":"")}return"<hr>"+t+"<br>"+e.join("")}for(var a,n,o,i,s,c,u,l,f,p,d=(new Date).toLocaleTimeString("en-US")+(T?" via JSONP":" via CORS")+"<br>",h=[],m=[],g=[],b=[],_=[],v=(c=b,u=_,t(S[2],A,["MTASBWY"]).forEach(function(t){(t[5]?c:u).push(t)}),e(c),e(u),l=m,f=g,t(S[1],A,["LI","MNR"]).forEach(function(t){(t[3]?l:f).push(t),t[5]&&t[5].sort(function(t,e){return e.priority-t.priority})}),p=h,t(S[0],A,["MTA NYCT","MTABC"]).forEach(function(t){t[5]&&(t[5].sort(function(t,e){return e.priority-t.priority}),p.push(t))}),function(t){for(var e,r,a,n={},o=[],i=0;i<t.length;i++)(e=t[i])[5].sort(function(t,e){return e.priority-t.priority}),((r=n[r=(a=e[5][0]).statusSummary.toLowerCase().replace(/\s/g,"-")]=n[r]||{status:a.statusSummary,priority:a.priority}).lines=r.lines||[]).push(e);for(r in n)o.push(n[r]);return o.sort(function(t,e){return e.priority-t.priority}),o}(b)),w=0;w<v.length;w++)for(d+="<hr>"+(a=v[w]).status+"<br>",a=a.lines,o=0;o<a.length;o++){for(d+="<details><summary>"+L("["+(n=a[o])[1]+"]",n[1])+"</summary>",n=n[5],i=0;i<n.length;i++)s=n[i],n[i]="<b>"+s.statusSummary+"</b><br>"+j(s.statusTitle).replace(/\[(\w+)\]/g,L)+(s.duration?"<br>"+s.duration:"")+"<br>"+(s.statusDescription?j(s.statusDescription).replace(/\[(\w+)\]/g,L):"");d=d+n.join("<hr>")+"</details>"}if(_.length)for(d+="<hr>No Active Alerts<br>",w=0;w<_.length;w++)d+=L("["+(n=_[w][1])+"]",n)+" ";d=(d=(d+=r("Metro-North Railroad",m))+r("Long Island Rail Road",g))+r("Bus",h),document.body.innerHTML+=d,S=A=void 0}function c(t,e,r){var x=this.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");try{if(T)throw 0;x.open("GET",t,1);try{e&&(x.responseType="json")}catch(a){}x.onreadystatechange=function(){4==x.readyState&&(200==x.status?"withCredentials"in x||x.getResponseHeader("Date")?(e?i:o)(x.response||x.responseText):c(t,e,1):alert("error HTTP status "+x.status))},r&&x.setRequestHeader("if-modified-since",new Date(0)),x.send()}catch(n){(n=document.createElement("script")).src=e?"/api/alt?callback=i":"/api/rts?callback=o",1<(T=document.getElementsByTagName("head")[0]).childNodes.length&&T.removeChild(T.childNodes[1]),T.appendChild(n)}}a(),Array.prototype.find||(Array.prototype.find=function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=Object(this),r=e.length>>>0,a=arguments[1],n=0;n<r;n++){var o=e[n];if(t.call(a,o,n,e))return o}}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){"use strict";for(var r=0,a=this.length;r<a;++r)r in this&&t.call(e,this[r],r,this)}),Date.now||(Date.now=function u(){return(new Date).getTime()})</script>