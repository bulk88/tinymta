!function(){if(this.addEventListener&&document.querySelector){var e=document.documentElement.firstChild,t,n,d={},m=[],p=0,u=location.pathname,y=location.hash,g,v;function a(e){var t,n,a,s="touchstart"===e.type,o,i,r,c;if(e=e.target,"FONT"===e.nodeName&&(e=e.parentNode),"A"===e.nodeName&&(s||!e.tmts)&&(n=e.hash,a=e.pathname,a!==location.pathname)){switch(a){case"/stations.htm":o=6;break;case"/mn/stations.htm":o=5;break;case"/li/stations.htm":o=4;break;case"/stop.htm":o=3;break;case"/status.htm":o=2;break;case"/rstop.htm":o=1;break;case"/rtrain.htm":o=0;break;default:return}o<4&&(n=n.slice(1),window.S={t:Date.now(),s:n,f:function(e){r?e(r):c=e}},console.log("s"+Date.now()),fetch(3===o?"//otp-mta-prod.camsys-apps.com/otp/routers/default/nearby?timerange=1800&apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE&stops=MTASBWY:"+n.slice(0,3):2===o?"//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP":1===o?"//backend-unified.mylirr.org/arrivals/"+n:"//backend-unified.mylirr.org/locations/"+n+"?geometry=NONE",1<o?{}:{headers:{"accept-version":"3.0"}}).then(function(e){c?c(e):r=e}),2===o)&&(R=0,document.documentElement.firstChild.appendChild(document.createElement("script")).src="routes.js"),(spa=d[a]&&(o<4||void 0!==v))?("string"==typeof(i=spa.style)&&(t=document.createElement("style"),t.textContent=i,spa.style=t),spa.js&&"string"==typeof(i=spa.js)&&(eval(i),spa.js=onhashchange,onhashchange=null)):l(a,o),e.tmts=s}}function l(a,e){var t,n,s,o,i;try{3<e&&(void 0===v?(n=this.onpagehide,this.onpagehide=s=function(e){v=e,t.onerror=0,this.onpagehide=n,o?o():o=1},i=document.documentElement.firstChild,(t=document.createElement("script")).onerror=function(){s(void 0),i.removeChild(t)},t.src="1p.js",i.appendChild(t)):o=1),fetch(a).then(function(e){e.text().then(function(e){var t,n={};-1!=(t=e.indexOf("<style>"))?(n.style=e.slice(t+="<style>".length,t=e.indexOf("</style>",t)),t+=8):t=0,t&&-1!=(t=e.indexOf("No javascript",t))?(-1!=(t=e.indexOf("<script>",t))&&(n.js=e.slice(t+="<script>".length,e.indexOf("<\/script>",t))),d[a]=n):((t=document.createElement("html")).innerHTML=e,n.body=t.lastChild,o?d[a]=n:o=function(){d[a]=n})})})}catch(e){}}function s(e){+(e=[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,0,1,2,3,4,5,6,7,8,9,,,,,,,,2,,,3,,,4,,,5,,,6,,,7,,,,8,,,9,,,,,,,,,,2,,,3,,,4,,,5,,,6,,,7,,,,8,,,9][e.keyCode])===e&&(e=document.querySelector('[accesskey="'+e+'"]'))&&e.click()}for(this.fetch||this.f||(f=1,e.appendChild(document.createElement("script")).src="/f.js"),addEventListener("touchstart",a,{passive:!0}),addEventListener("mousedown",a,{passive:!0}),addEventListener("click",function(e){var t=document.documentElement,n=t.firstChild,a,s,o,i=e.target,r,c,l,h;if("FONT"===i.nodeName&&(i=i.parentNode),"A"===i.nodeName){switch(r=i.pathname,r){case"/stations.htm":c=6;break;case"/mn/stations.htm":c=5;break;case"/li/stations.htm":c=4;break;case"/stop.htm":c=3;break;case"/status.htm":c=2;break;case"/rstop.htm":c=1;break;case"/rtrain.htm":c=0;break;default:return}(s=d[r])&&(h=r===location.pathname&&i.hash!=location.hash,l=m[p]||(m[p]=[]),3<g&&v&&g!=c&&v({}),(o=n.getElementsByTagName("style")).length&&(o=o[0],l[1]=h?o:n.removeChild(o)),o=t.lastChild,l[0]=h?o:t.removeChild(o),l[3]=location.pathname+location.hash,l[4]=g,p++,m.length=p,s=d[r],s.js?t.appendChild(document.createElement("body")):h||t.appendChild(s.body),u=location.pathname,y=location.hash,g=c,window.history.pushState(p,0,i.href),h||(e.preventDefault(),(a=s.style)&&("string"==typeof a&&(o=document.createElement("style"),o.textContent=a,s.style=o),n.appendChild(s.style)),s.js&&("string"==typeof(a=s.js)?(eval("!(function(){"+a+"})()"),s.js=onhashchange,onhashchange=null):(fn=s.js,fn()))))}}),onpopstate=function(e){var t,n,a,s,o=document.documentElement,i=o.firstChild;e=0|e.state,u==location.pathname&&y!=location.hash?(u=location.pathname,y=location.hash,sessionStorage.removeItem("1p"+location.pathname),console.log("spa leave 1")):((e===p||e>=m.length)&&(console.log("spa leave 2"),location.reload()),(s=m[p])||(m[p]=s=[]),a=(n=m[e])[4],3<g&&v&&g!==a&&v({}),(t=i.getElementsByTagName("style")).length&&(t=t[0],s[1]=i.removeChild(t)),(t=this.y)&&(s[2]=t),s[0]=o.removeChild(o.lastChild),p=e,g=a,(t=n[1])&&i.appendChild(t),(t=n[2])&&(this.y=t),o.appendChild(n[0]),onpageshow&&onpageshow({persisted:1}))},addEventListener("keyup",s,0),addEventListener("keypress",s,0),t=e.firstChild;t;)"preconnect"===t.rel&&(n=document.createElement("link"),n.rel="dns-prefetch",n.href=t.href,e.appendChild(n)),t=t.nextElementSibling}this.ScriptEngineMajorVersion&&(ScriptEngineMajorVersion()<5||5===ScriptEngineMajorVersion()&&ScriptEngineMinorVersion()<5)&&(onload=function(){for(var e,t,n,a,s=document.links,o=s.length,i=0;i<o;i++)e=(t=s[i]).pathname,n?n===e&&(t.pathname=a):(t=e.length-8,"s"!==(a=e.charAt(t))&&"a"!==a||!~e.indexOf("s"===a?"stop":"atus",t)||(a=(n=e).slice(0,-4)+"ie50.htm",i--));onload=null})}();