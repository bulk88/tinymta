"use strict";let e,t,a=new TextEncoder;const r=["age","cache-control","date","etag","expires","last-modified","vary"];var n={"0AR":"Ardsley-on-Hudson","0BC":"Beacon","0BK":"Breakneck Ridge","0CS":"Cold Spring","0CT":"Cortlandt","0DF":"Dobbs Ferry","0DV":"Spuyten Duyvil","0GA":"Garrison","0GD":"Glenwood","0GY":"Greystone","0HB":"Highbridge-Employees","0HL":"Harlem-125 St","0HM":"Croton-Harmon","0HS":"Hastings-on-Hudson","0IV":"Irvington","0LU":"Ludlow","0MB":"Marble Hill","0MH":"Morris Heights","0MN":"Manitou","0NM":"New Hamburg","0NY":"Grand Central","0OS":"Ossining","0PE":"Peekskill","0PM":"Philipse Manor","0PO":"Poughkeepsie","0RV":"Riverdale","0SB":"Scarborough","0TT":"Tarrytown","0UH":"University Heights","0YK":"Yonkers","0YS":"Yankees-E 153 St","1AT":"Appalachian Trail","1BG":"Botanical Garden","1BH":"Bedford Hills","1BR":"Southeast","1BW":"Brewster","1BX":"Bronxville","1CF":"Croton Falls","1CQ":"Chappaqua","1CW":"Crestwood","1DO":"Dover Plains","1FO":"Fordham","1FW":"Fleetwood","1GO":"Goldens Bridge","1HA":"Hartsdale","1HN":"Hawthorne","1KA":"Katonah","1MK":"Mt Kisco","1ML":"Melrose","1MP":"Mt Pleasant","1MW":"Mt Vernon West","1NW":"North White Plains","1PA":"Patterson","1PV":"Pleasantville","1PW":"Pawling","1PY":"Purdy's","1SC":"Scarsdale","1TK":"Tuckahoe","1TM":"Tenmile River","1TR":"Tremont","1VA":"Valhalla","1WA":"Wassaic","1WF":"Wakefield","1WG":"Williams Bridge","1WI":"Harlem Valley-Wingdale","1WN":"Woodlawn","1WP":"White Plains","2BP":"Bridgeport","2CC":"Cos Cob","2DA":"Darien","2EN":"East Norwalk","2FF":"Fairfield","2FM":"Fairfield Metro","2GF":"Green's Farms","2GN":"Greenwich","2HS":"Harrison","2LA":"Larchmont","2MA":"Mamaroneck","2ME":"Mt Vernon East","2MI":"Milford","2NH":"New Haven","2NO":"Noroton Heights","2NR":"New Rochelle","2OG":"Old Greenwich","2PC":"Port Chester","2PH":"Pelham","2RO":"Rowayton","2RS":"Riverside","2RY":"Rye","2SM":"Stamford","2SN":"South Norwalk","2SP":"Southport","2SR":"Stratford","2SS":"New Haven-State St","2WH":"West Haven","2WP":"Westport","3GB":"Glenbrook","3NC":"New Canaan","3SD":"Springdale","3TH":"Talmadge Hill","4BE":"Bethel","4BV":"Branchville","4CA":"Cannondale","4DN":"Danbury","4M7":"Merritt 7","4RD":"Redding","4WI":"Wilton","5AN":"Ansonia","5BF":"Beacon Falls","5DB":"Derby-Shelton","5NG":"Naugatuck","5SY":"Seymour","5WB":"Waterbury",ABT:"Albertson",ADL:"Auburndale",AGT:"Amagansett",ATL:"Atlantic Terminal",AVL:"Amityville",BDY:"Broadway",BHN:"Bridgehampton",BK:"Stony Brook",BMR:"Bellmore",BOL:"Bolands-Employees",BPG:"Bethpage",BPT:"Bellport",BRS:"Bellerose",BRT:"Belmont Park",BSD:"Bayside",BSR:"Bay Shore",BTA:"Babylon",BWD:"Brentwood",BWN:"Baldwin",CAV:"Centre Av",CHT:"Cedarhurst",CI:"Central Islip",CLP:"Country Life Press",CPG:"Copiague",CPL:"Carle Place",CSH:"Cold Spring Harbor",DGL:"Douglaston",DPK:"Deer Park",EHN:"East Hampton",EMT:"Elmont-UBS Arena",ENY:"East New York",ERY:"East Rockaway",EWN:"East Williston",FHL:"Forest Hills",FLS:"Flushing Main Street",FMD:"Farmingdale",FPK:"Floral Park",FPT:"Freeport",FRY:"Far Rockaway",GBN:"Gibson",GCT:"Grand Central",GCV:"Glen Cove",GCY:"Garden City",GHD:"Glen Head",GNK:"Great Neck",GPT:"Greenport",GRV:"Great River",GST:"Glen Street",GVL:"Greenvale",GWN:"Greenlawn",HBY:"Hampton Bays",HEM:"Hempstead",HGN:"Hempstead Gardens",HIL:"Hillside-Employees",HOL:"Hollis",HPA:"Hunterspoint Av",HUN:"Huntington",HVL:"Hicksville",HWT:"Hewlett",IPK:"Island Park",ISP:"Islip",IWD:"Inwood",JAM:"Jamaica",KGN:"Kew Gardens",KPK:"Kings Park",LBH:"Long Beach",LCE:"Lawrence",LHT:"Lindenhurst",LIC:"Long Island City",LMR:"Locust Manor",LNK:"Little Neck",LTN:"Laurelton",LVL:"Locust Valley",LVW:"Lakeview",LYN:"Lynbrook",MAK:"Mattituck",MAV:"Merillon Av",MFD:"Medford",MHL:"Murray Hill",MHT:"Manhasset",MIN:"Mineola",MPK:"Massapequa Park",MQA:"Massapequa",MRK:"Merrick",MSY:"Mastic-Shirley",MTK:"Montauk",MVN:"Malverne",NAV:"Nostrand Av",NBD:"Nassau Blvd",NHP:"New Hyde Park",NPT:"Northport",NYK:"Penn Station",OBY:"Oyster Bay",ODE:"Oceanside",ODL:"Oakdale",PDM:"Plandome",PGE:"Patchogue",PJN:"Port Jefferson",PLN:"Pinelawn",PWS:"Port Washington",QVG:"Queens Village",RHD:"Riverhead",RON:"Ronkonkoma",ROS:"Rosedale",RSN:"Roslyn",RVC:"Rockville Centre",SAB:"St. Albans",SCF:"Sea Cliff",SFD:"Seaford",SHD:"Southold",SHN:"Southampton",SJM:"St. James",SMR:"Stewart Manor",SPK:"Speonk",SSM:"Mets-Willets Point",STN:"Smithtown",SVL:"Sayville",SYT:"Syosset",VSM:"Valley Stream",WBY:"Westbury",WDD:"Woodside",WGH:"Wantagh",WHD:"West Hempstead",WHN:"Westhampton",WMR:"Woodmere",WWD:"Westwood",WYD:"Wyandanch",YPK:"Yaphank",_GC:"Grand Central"},o=["ff6319","00933c","fccc0a","6d6e71","ee352e","286ded","996633","0078c6","b933ad"],s={5:1,4:1,"5X":1,"6X":1,6:1,N:2,W:2,R:2,Q:2,S:3,FS:3,H:3,GS:3,3:4,2:4,1:4,A:5,E:5,C:5,Z:6,J:6,SIR:7,SI:7,"7X":8,7:8,G:"6cbe45",L:"a7a9ac"},i=["ee0034","4d5357","006ec7"],l={CI:1,12:1,PJ:2,HH:2,BY:"00985f",HU:"009b3a",WH:"00a1de",OB:"00af3f",MK:"00b2a9",HA:"066afe",11:"60269e",S:"6d6e71",FR:"6e3219",RK:"a626aa",PW:"c60c30",HM:"ce8e00",LB:"ff6319"};function c(e,t){return new Response('var R;!function e(){if(this.y){for(var t=document.body.lastChild;t=t.previousSibling;)if("DIV"===t.nodeName&&!t.firstChild)return t.style.minHeight="",t.appendChild(document.createTextNode('+JSON.stringify(e)+')),void(this.requestIdleCallback||this.requestAnimationFrame||function(e){setTimeout(e,40)})(function(){try{localStorage.setItem("as",t.clientHeight+"px")}catch(e){}})}else R=e}()',{headers:{"content-type":"text/javascript","cache-control":"no-cache",...t}})}function E(e,t){return"string"!=typeof(e=s[t])&&(e=s[t]=o[0|e]),"<font color="+e+">["+t+"]</font>"}function B(e){return"string"==typeof e&&0===(e=e.replace(/(<p style="min-height:10px"><\/p>|<p><\/p>)+$/g,"")).indexOf("<p>")&&-1!==e.indexOf("</p>",e.length-4)?e.slice(3,-4):e}function A(e,a){for(a in e=e.split(/[: T-]/))e[a]=parseFloat(e[a]);return"Min "+(0|Math.abs((new Date(e[0],e[1]-1,e[2],e[3]||0,e[4]||0,e[5]||0,0)-t)/1e3)/60)}async function u(e,a){var o,s,u=new URL(e.url),h=u.pathname;if("/jsp"===h){var f,d,p={},S=0;if((h=decodeURIComponent(u.searchParams.get("url"))).startsWith("//")&&(h="http:"+h),"otp-mta-prod.camsys-apps.com"===(s=(s=new URL(h)).host)||"collector-otp-prod.camsys-apps.com"===s||"api.weather.com"===s||"backend-unified.mylirr.org"===s){for((s=(d=e.headers).get("if-none-match"))&&(p["if-none-match"]=s),(s=d.get("if-modified-since"))&&(p["if-modified-since"]=s),(s=u.searchParams.get("headers"))&&Object.assign(p,JSON.parse(decodeURIComponent(s))),o=fetch(h,{headers:p}),h="/**/ typeof "+(h=(u.searchParams.get("callback")||"_xcallback").replace(/[^\[\]\w$.]/g,""))+" === 'function' && "+h+"({http_code:",p={"content-type":"text/javascript","x-content-type-options":"nosniff"},o=await o,p["cache-control"]=(s=(d=o.headers).get("cache-control"))?s:"no-cache";s=r[S++];)(f=d.get(s))&&(p[s]=f);return 304!==o.status?(s=o.headers.get("content-type"),h+=o.status+",content_type:'"+s+"',contents:",o=await o.text(),new Response(h+("text"!==u.searchParams.get("type")&&s.startsWith("application/json")?o.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):JSON.stringify(o))+"});",{headers:p})):new Response(null,{status:304,headers:p})}return new Response(null,{status:403})}if(h.startsWith("/s/")){if(h=h.substr("/s/".length,3),/^\w+$/.test(h)){var g="http://otp-mta-prod.camsys-apps.com/otp/routers/default/nearby?timerange=1800&apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE&stops=MTASBWY:"+h;o=fetch(g);var y="<meta content=0 name=mobileoptimized>[1][<a accesskey=1 href="+h+">Refresh</a>] <a href="+g+">Raw</a><br>",w=[2,3,4,5,6,7,8,9,0];if(200==(o=await o).status){o=o.json();var F,Q,D=0,b={};if((P=o=await o).length){for(S in(P=P[0]).alerts,P.groups)for(S in g=(F=P.groups[S]).headsign.replace("Downtown & Brooklyn","Downtown & Bklyn"),F.times)(Q=F.times[S]).shortRouteName=F.route.shortName,Q.timestamp>D&&(D=Q.timestamp),(b[g]=b[g]||[]).push(Q);for(S in b)b[S].sort((function(e,t){return e.departureFmt<t.departureFmt?-1:e.departureFmt>t.departureFmt?1:0}));for(S in y+=new Date(1e3*D).toLocaleTimeString("en-US",{timeZone:"America/New_York"})+" via CFW<br>CurSta:"+P.stop.name+"<br>",t=new Date((new Date).toLocaleString("en-US",{timeZone:"America/New_York"})),b)for(S in y+="<a accesskey="+(D=w.shift())+" name="+D+" href=#"+D+">"+S+"</a><br>",F=b[S])y+=A((Q=F[S]).departureFmt)+"-"+E(0,Q.shortRouteName)+"-"+Q.tripHeadsign+(void 0===Q.track?"-Tk?":"")+(Q.realtime?"-":"-NRT-")+function(e){switch(e){case"SCHEDULED":return"SCH";case"UPDATED":return"UPD";case"CANCELED":return"CNX";case"ADDED":return"ADD";case"MODIFIED":return"MOD";default:return"UNK"}}(Q.realtimeState)+((Q=((Q=Q.departureDelay)<-43200?Q+86400:Q)/60|0)?(Q>0?"-L":"-E")+Math.abs(Q):"")+"<br>";for(y+="<br>Key: E2 (early 2 min) L3 (late 3 min)<br>NRT (not realtime)<br><br>",b="",(P=P.alerts||[]).sort((function(e,t){return e.effectiveStartDate<t.effectiveStartDate?-1:e.effectiveStartDate>t.effectiveStartDate?1:0})),S=0;S<P.length&&S<10;S++)(Q=P[S]).alertType&&(F=(void 0===(D=w.shift())?Q.alertType:"<a accesskey="+D+" href=#"+D+" name="+D+">"+Q.alertType+"</a>")+"<br>"+(Q.humanReadableActivePeriod||"Ongoing")+"<br>"+Q.alertHeaderText.replace(/\[(\w+)\]/g,E)+(Q.alertDescriptionText?"<br>"+Q.alertDescriptionText.replace(/\[(\w+)\]/g,E):"")+"<br><br>",Q.humanReadableActivePeriod?b+=F:y+=F);y+=b}else y="station not found";return new Response(y,{headers:{"content-type":"text/html; charset=utf-8","cache-control":"no-cache, no-store"}})}return o}}else if(h.startsWith("/li/s/")){if(h=h.substr("/li/s/".length,3),/^\w+$/.test(h)){g="http://backend-unified.mylirr.org/arrivals/"+h;o=fetch(g,{headers:{"accept-version":"3.0"}});y="<meta content=0 name=mobileoptimized>[1][<a accesskey=1 href="+h+">Refresh</a>] <a href="+g+">Raw</a><br>"+(new Date).toLocaleTimeString("en-US",{timeZone:"America/New_York"})+" via CFW<br>CurSta:"+n[h]+"<br><a accesskey=2 name=2 href=#2>East</a><br>";var N="<a accesskey=3 name=3 href=#3>West</a><br>";if(200==(o=await o).status){var H,v,R,P=await o.json();S=0;for(t=new Date((new Date).toLocaleString())/1e3;S<P.arrivals.length;S++)H=P.arrivals[S],v=new Date(1e3*(v=H.time)).toLocaleTimeString("en-US",{timeZone:"America/New_York"}).replace(":00 "," ")+"-Min "+Math.ceil((v-t)/60)+((v=H.status.otp)&&(v=v/60|0)?v>0?"-E"+v:"-L"+-v:"")+"-Tk"+(H.track||"?")+"-<font color="+("string"==typeof(v=l[R=H.branch])?v:l[R]=i[0|v])+">"+n[(v=H.stops)[v.length-1]]+"</font>"+("O"==H.peak_code?"":"-Pk")+"<br>","E"==H.direction?y+=v:N+=v;for(S in y+=N,N="<br>",P.banners)N+=(S=P.banners[S]).title+"<br>"+S.text+"<br><br>";for(S in(P=P.alerts).sort((function(e,t){return e.start_time<t.start_time?-1:e.start_time>t.start_time?1:0})),P)N+=(S=P[S]).status+"<br>"+B(S.header)+"<br>"+(S.human_duration?S.human_duration+"<br>":"")+B(S.text)+"<br><br>";return y+=N,new Response(y,{headers:{"content-type":"text/html; charset=utf-8","cache-control":"no-cache, no-store"}})}return o}}else if("/routes.js"===h){function _(e){var t;for(t in e)"string"==typeof e[t][1]&&(e[t][1]=e[t][1].toLowerCase())}function J(e){var t;for(t in e)"string"==typeof e[t][1]&&(e[t][1]=parseInt(e[t][1],16))}var W=e.headers.get("if-none-match");if(W===m)o="";else if(o=M,"string"==typeof(s=u.searchParams.get("type"))){var k,X,L,T,G={};for(s|=0,o=(o=o.slice("!function(E){E=this.R,this.R=".length,-",E&&E()}();".length)).replace(/,,/g,",null,"),o=JSON.parse(o),k=0;k<2;k++)for(S in T=o[k])"string"!=typeof T[S][1]&&(T[S][1]="000000");if(2&s){for(k=0;k<2;k++)for(S in T=o[k])X=T[S][1],G[X]?G[X]++:G[X]=1;for(L=Object.keys(G).sort((function(e,t){return G[t]-G[e]})),8&s&&(L=L.filter((function(e){return G[e]>1}))),k=0;k<2;k++)for(S in T=o[k])X=T[S][1],8&s&&1==G[X]?console.log("route: "+(T[S][3]?T[S][3]:T[S][0])+" has 1 use of its color "+X):T[S][1]=L.indexOf(X);if(o.unshift(L),4&s&&(_(o[1]),_(o[2])),32&s&&(J(o[1]),J(o[2])),1&s)for(S in T=o[0])T[S]=T[S].toLowerCase();if(16&s)for(S in T=o[0])T[S]=parseInt(T[S],16)}else 4&s&&(_(o[0]),_(o[1])),32&s&&(J(o[0]),J(o[1]));o=JSON.stringify(o),64&s&&(o=o.replace(/"([0-9A-Fa-f]{6})"/g,(function(e,t){return t.replace(/^0+/,"").length?"0X"+t.replace(/^0+/,""):""}))),o="!function(E){E=this.R,this.R="+o.replace(/null/g,"").replace(/,0,/g,",,").replace(/[,0]+\]/g,"]")+",E&&E()}();"}return a.respondWith(new Response(o,{status:W===m?304:200,headers:{"content-type":"text/javascript",etag:m,"cache-control":"max-age=10, stale-while-revalidate=86400"}})),a.waitUntil(C(a)),null}var I=e?.cf||{asn:676},O=e?.headers?.get("cf-connecting-ip")||"0.0.0.0",x='W/"G'+O+"."+I.asn+'"';if(e?.headers?.get("if-none-match")==x)return new Response(null,{status:304});var Y="AS"+I.asn;Y=String.fromCharCode(Y.length)+Y+"asncymrucom\0\0\0",o=fetch("https://"+(e?.cf?"1.1.1.1":"cloudflare-dns.com")+"/dns-query",{method:"post",body:"\0\0\0\0\0\0\0\0\0"+Y,headers:{"content-type":"application/dns-message"}});var U=(Y=(new TextEncoder).encode(Y)).byteLength-4;o=await o;var V=await o.arrayBuffer(),K=new DataView(V);if(33152==(33664&K.getUint16(2))&&65537==K.getUint32(4)&&0==K.getUint32(8)){let $,j,Z;for(j=1,$=0;$<Y.byteLength;$++)if(Y[$]!==K.getUint8($+12)){j=0;break}if(j){let q;for($+=12,192==(192&K.getUint8($))?(q=-49153&K.getUint16($),Z=$+2):(q=$,Z=$+U),j=1,$=0;$<U;$++)if(Y[$]!==K.getUint8($+q)){j=0;break}if(j&&1048577==K.getUint32(Z)&&(Z+=8,K.getUint16(Z)+(Z+=2)==K.byteLength&&K.getUint8(Z)+(Z+=1)==K.byteLength))return c("Your ISP: "+O+" | AS"+(new TextDecoder).decode(new Uint8Array(K.buffer,Z)),{etag:x})}}return c("ERROR: raw data: "+(new TextDecoder).decode(new Uint8Array(V)),{})}async function C(e){var t,r,n,o,s,i,l,c,E=0;if(o=fetch("http://otp-mta-prod.camsys-apps.com/otp/routers/default/index/routes?apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE"),200===(o=await o).status){for(o=o.json(),o=await o;E<o.length;E++)null===(r=o[E]).longName&&delete r.longName,null===r.shortName&&delete r.shortName,null===r.color&&delete r.color;if(o=h.buildServiceRoutes(o),o="var R;!function(E){E=R,R="+(o=JSON.stringify(o)).replace(/null/g,"").replace(/,?\]/g,"]")+",E&&E()}();",n=await crypto.subtle.digest("MD5",a.encode(o)),n='W/"'+btoa(String.fromCharCode.apply(null,new Uint8Array(n)))+'"',m!==n){try{t=GHAPISECRET}catch(r){(t=url.searchParams.get("key"))||console.log("GHAPI key is invalid="+t),t="Basic "+t}if(m=n,M=o,o=fetch("https://raw.githubusercontent.com/bulk88/tinymta/master/cloudflare_as_name.js",{cf:{cacheTtlByStatus:-1}}),s=fetch("https://raw.githubusercontent.com/bulk88/tinymta/master/cloudflare_as_name.min.js",{cf:{cacheTtlByStatus:-1}}),o=await o,s=await s,console.log("got old gh script"),200==o.status&&200==s.status){o=await o.text(),s=await s.text(),l=M.replace(/\x27/g,"\\'"),(c=o.replace(/let (\w+)='[^']*',(\w+)='[^']*';$/,"let $1='"+n+"',$2='"+l+"';"))==o&&console.log("failed to patch full size cfw src"),(i=s.replace(/let (\w+)=(?:'[^']*'|"[^"]*"),(\w+)=(?:'[^']*'|"[^"]*");$/,"let $1='"+n+"',$2='"+l+"';"))==s&&console.log("failed to patch mini cfw src");async function u(e,t){return d("GET",e,t)}async function C(e,t){return d("POST",e,t)}async function f(e,t){return d("PATCH",e,t)}async function d(e,a,r){var n=await fetch("https://api.github.com/"+a,{method:e,headers:{authorization:t,"user-agent":"tinymta_cfw"},...r&&{body:JSON.stringify(r)}});return n.status>=300?(console.log("failed status="+n.status+" ct="+n.headers.get("content-type")+" url="+a),n=await n.text(),console.log(n),n):await n.json()}var B={repository:"bulk88/tinymta"};let p={};var A={gitAuthor:{name:"RoutesBot",email:"bulk88@hotmail.com"}};async function S(e,t,a){let r;var n,o,s,i;A.gitAuthor&&(r={name:A.gitAuthor.name,email:A.gitAuthor.email,date:(n=new Date,o=-n.getTimezoneOffset(),s=o>=0?"+":"-",i=function(e){return(e<10?"0":"")+e},n.getFullYear()+"-"+i(n.getMonth()+1)+"-"+i(n.getDate())+"T"+i(n.getHours())+":"+i(n.getMinutes())+":"+i(n.getSeconds())+s+i(Math.floor(Math.abs(o)/60))+":"+i(Math.abs(o)%60))});const l={message:a,parents:[e],tree:t};return r&&(l.author=r),(await C(`repos/${B.repository}/git/commits`,l)).sha}async function g(e,t){const a={sha:t,force:!0};try{await f(`repos/${B.repository}/git/refs/heads/${e}`,a)}catch(e){if(422===e.statusCode)throw console.log(e+" Branch no longer exists - exiting"),new Error("repository-changed");throw e}}async function y(e){try{return(await u(`repos/${B.repository}/git/refs/heads/${e}`)).object.sha}catch(e){if(404===e.statusCode)throw new Error("repository-changed");if(409===e.statusCode)throw new Error("empty");throw e}}async function w(e){return(await u(`repos/${B.repository}/git/commits/${e}`)).tree.sha}async function F(e){const t={encoding:"base64",content:btoa(e)};return(await C(`repos/${B.repository}/git/blobs`,t)).sha}async function Q(e,t){const a={base_tree:e,tree:[]};return t.forEach((e=>{a.tree.push({path:e.name,mode:"100644",type:"blob",sha:e.blob})})),(await C(`repos/${B.repository}/git/trees`,a)).sha}async function D(e,t,a,r=B.baseBranch){try{delete p[e];const o=[];for(const e of t){const t=F(e.contents);o.push({name:e.name,blob:t})}const s=await y(r),i=await w(s);for(var n=0;n<o.length;n++)o[n].blob=await o[n].blob;const l=await Q(i,o),c=await S(s,l,a);return await g(e,c),"updated"}catch(e){if(404===e.statusCode)throw new Error("repository-changed");throw e}}console.log("will push commit"),e.waitUntil(D("master",[{name:"cloudflare_as_name.js",contents:c},{name:"cloudflare_as_name.min.js",contents:i}],"Routes Upd "+(new Date).toLocaleString("en-US",{timeZone:"America/New_York"}),"master"))}}return!0}}addEventListener("fetch",(t=>{e||(e=Date.now()),console.log("v8start "+e);try{t.respondWith(u(t.request,t).catch((e=>console.log("c"+e))))}catch(e){console.log(e+" "+e.stack+" "+e.columnNumber+e.fileName+e.lineNumber)}}));var h={};function f(e){for(var t,a,r,n=[],o=0;o<e.length;o++)if("SUBWAY"===(t=e[o]).mode&&!t.id.indexOf("MTA")){if(a=!1,"X"===(r=t.shortName).substr(r.length-1,r.length)){var s=r.substr(0,r.indexOf("X"));a=n.find((function(e){return"object"==typeof e&&e[0]==s}))}a||((r=t.id.split(":").pop())==""+ +r&&(r=+r),n.push([r,t.sortOrder]))}return n}function d(e){var t=e.filter((function(e){return"BUS"===e.mode&&!!~e.id.indexOf("MTA")&&"MTA NYCT - Subway"!=e.agencyName})).map((function(e){var t,a=[e.id.split(":").pop(),e.color||null];return"MTA New York City Transit"!==e.agencyName&&(a[2]=1),(t=a[0])==(e=e.shortName)||t.startsWith("BX")&&t.slice(2)===e.slice(2)||"+"==t.slice(-1)&&"-SBS"==e.slice(-4)||(a[3]=e),a}));return t.sort((function(e,t){return e[3]<t[3]?-1:1})).forEach((function(e){var t=e[3],a=+t;t==""+a&&(e[3]=a)})),t}function p(e){var t=e.filter((function(e){return"RAIL"===e.mode&&!(e.id.indexOf("LI")&&e.id.indexOf("MNR"))})).map((function(e){var t=e.id.split(":").pop();return t==""+ +t&&(t=+t),t=[t,"0039A6"===e.color?"066AFE":e.color,~e.id.indexOf("LI")?null:1,e.longName.replace(/ (Branch|Line)$/,"")]}));t.push(["Wassaic","066AFE",1,"Wassaic"]),t.sort((function(e,t){return e[3]<t[3]?-1:1}));for(var a,r,n=[],o=[],s=0;s<t.length;s++)(e=t[s])[2]&&3==e[0]&&(a=s),e[2]&&2==e[0]&&(r=s),e[2]&&e[0]>=4&&e[0]<=6&&(n.push(e),t.splice(s,1),s--),~e[3].indexOf("Wassaic")&&(o.push(e),t.splice(s,1),s--);return(t=t.slice(0,a+1).concat(n).concat(t.slice(a+1))).slice(0,r+1).concat(o).concat(t.slice(r+1))}h.buildServiceRoutes=function(e){return[d(e),p(e),f(e)]};let m='W/"uWyWkRtekmIl2rQivUEQdQ=="',M='var R;!function(E){E=R,R=[[["BXM1","00933C",1],["BXM2","00933C",1],["BXM3","00933C",1],["BXM4","00933C",1],["BXM6","00933C",1],["BXM7","00933C",1],["BXM8","00933C",1],["BXM9","00933C",1],["L92","EE352E"],["SIM33C","00933C"],["BXM10","00933C",1],["BXM11","00933C",1],["BXM18","00933C",1],["BX18A","6CBE45"],["BX18B","6CBE45"],["B12","6CBE45"],["B13","FAA61A"],["B11","006CB7"],["B16","FAA61A"],["B17","B933AD"],["B14","00AEEF"],["B15","B933AD"],["B20","6CBE45"],["M79+","EE352E"],["B24","FAA61A"],["B25","6CBE45"],["B26","006CB7"],["S40","B933AD"],["S44","FAA61A"],["S42","00AEEF"],["Q06","B933AD",1,"Q6"],["S48","EE352E"],["Q07","6CBE45",1,"Q7"],["S46","006CB7"],["Q08","B933AD",1,"Q8"],["Q09","B933AD",1,"Q9"],["B31","FAA61A"],["B35","EE352E"],["B32","006CB7"],["B38","00AEEF"],["B39","00AEEF"],["B36","FAA61A"],["B37","B933AD"],["S51","006CB7"],["S52","B933AD"],["Q10","FAA61A",1],["Q13","EE352E"],["S55","FAA61A"],["S56","6CBE45"],["S53","EE352E"],["Q11","6CBE45",1],["Q12","EE352E"],["S54","FAA61A"],["S59","EE352E"],["Q17","EE352E"],["Q18","00AEEF",1],["Q15","FAA61A"],["S57","6CBE45"],["Q16","EE352E"],["SIM8","00933C"],["SIM9","00933C"],["Q19","00AEEF",1],["B41","006CB7"],["B42","006CB7"],["B45","EE352E"],["SIM1","00933C"],["B46","6CBE45"],["SIM2","00933C"],["B43","EE352E"],["B44","B933AD"],["SIM3","00933C"],["B49","EE352E"],["SIM4","00933C"],["SIM5","00933C"],["B47","FAA61A"],["SIM6","00933C"],["SIM7","00933C"],["B48","6CBE45"],["BX12+","006CB7"],["S62","B933AD"],["Q21","006CB7",1],["S61","EE352E"],["S66","6CBE45"],["Q24","00AEEF"],["Q25","00AEEF",1],["Q22","EE352E",1],["Q23","FAA61A",1],["Q28","EE352E"],["Q29","00AEEF",1],["Q26","6CBE45"],["Q27","EE352E"],["D90","EE352E"],["B52","EE352E"],["B57","EE352E"],["B54","6CBE45"],["Q31","FAA61A"],["Q32","00AEEF"],["M106","6CBE45"],["S74","EE352E"],["Q30","FAA61A"],["Q35","006CB7",1],["S78","FAA61A"],["Q36","FAA61A"],["Q33","EE352E",1],["S76","B933AD"],["Q34","FAA61A",1],["Q39","B933AD",1],["Q37","00AEEF",1],["Q38","EE352E",1],["B60","B933AD"],["B63","006CB7"],["B64","6CBE45"],["B61","6CBE45"],["B103","FAA61A",1],["B62","00AEEF"],["B67","EE352E"],["B68","EE352E"],["B100","B933AD",1],["B65","00AEEF"],["B69","006CB7"],["S81","006CB7"],["S84","EE352E"],["Q42","00AEEF"],["Q43","EE352E"],["Q40","6CBE45",1],["Q41","B933AD",1],["Q46","EE352E"],["Q47","6CBE45",1],["S89","EE352E"],["S86","B933AD"],["Q48","006CB7"],["Q49","006CB7",1],["M34+","006CB7"],["B70","B933AD"],["B74","EE352E"],["M101","FAA61A"],["M102","FAA61A"],["M103","B933AD"],["M104","B933AD"],["Q70+","EE352E",1],["M100","00AEEF"],["S91","EE352E"],["S92","B933AD"],["Q50","FAA61A",1],["S90","B933AD"],["Q54","B933AD"],["S96","006CB7"],["S93","EE352E"],["S94","FAA61A"],["Q58","6CBE45"],["Q55","EE352E"],["S98","EE352E"],["Q56","B933AD"],["Q59","FAA61A"],["B82","6CBE45"],["B83","EE352E"],["B84","006CB7"],["Q60","EE352E",1],["Q64","EE352E",1],["M116","6CBE45"],["Q65","00AEEF",1],["Q69","00AEEF",1],["Q66","EE352E",1],["Q67","FAA61A",1],["M125","B933AD"],["B98","6CBE45"],["Q72","B933AD",1],["Q76","6CBE45"],["Q77","FAA61A"],["M15+","006CB7"],["Q83","6CBE45"],["Q84","B933AD"],["Q85","EE352E"],["Q88","FAA61A"],["Q93","6CBE45"],["M10","006CB7"],["Q92","00933C"],["M11","FAA61A"],["M12","006CB7"],["M15","006CB7"],["Q53+","FAA61A",1],["M20","EE352E"],["M21","FAA61A"],["M22","00AEEF"],["Q52+","FAA61A",1],["M14D+","6CBE45"],["M31","B933AD"],["M35","FAA61A"],["M14A+","6CBE45"],["M42","EE352E"],["M50","6CBE45"],["M57","00AEEF"],["M55","6CBE45"],["M34A+","006CB7"],["M66","FAA61A"],["M72","6CBE45"],["Q110","006CB7",1],["Q111","EE352E",1],["Q114","FAA61A",1],["Q112","EE352E",1],["Q113","EE352E",1],["Q100","FAA61A",1],["Q103","EE352E",1],["Q104","B933AD",1],["Q101","6CBE45",1],["Q102","006CB7",1],["M98","EE352E"],["M96","6CBE45"],["B2","006CB7"],["B1","00AEEF"],["B4","6CBE45"],["B3","EE352E"],["S79+","006CB7"],["B6","EE352E"],["B8","FAA61A"],["B7","EE352E"],["B9","EE352E"],["SIM15","00933C"],["SIM10","00933C"],["SIM11","00933C"],["X27","00933C"],["X28","00933C"],["X37","00933C"],["X38","00933C"],["Q15A","FAA61A"],["BX20","00AEEF"],["BX21","6CBE45"],["BX22","EE352E"],["BX23","B933AD",1],["BX24","6CBE45"],["BX25","FAA61A"],["BX26","FAA61A"],["BX27","00AEEF"],["BX28","00AEEF"],["BX29","00AEEF"],["B82+","6CBE45"],["BX10","006CB7"],["BX11","FAA61A"],["X63","00933C"],["BX12","006CB7"],["BX13","006CB7"],["X64","00933C"],["BX15","FAA61A"],["BX16","00AEEF"],["X68","00933C"],["BX17","006CB7"],["BX19","B933AD"],["BX40","006CB7"],["BX41","EE352E"],["BX42","EE352E"],["BX46","EE352E"],["QM25","00933C",1],["QM24","00933C",1],["QM21","00933C",1],["QM20","00933C",1],["BX4A","FAA61A"],["BM2","00933C",1],["BM3","00933C",1],["BM1","00933C",1],["BM4","00933C",1],["BM5","00933C",1],["BX30","EE352E"],["BX31","EE352E"],["BX32","6CBE45"],["BX33","6CBE45"],["BX34","B933AD"],["BX35","00AEEF"],["BX36","B933AD"],["QM15","00933C",1],["BX38","FAA61A"],["BX39","FAA61A"],["QM12","00933C",1],["QM11","00933C",1],["QM10","00933C",1],["QM18","00933C",1],["QM17","00933C",1],["QM16","00933C",1],["M60+","EE352E"],["BX6+","EE352E"],["QM40","00933C",1],["QM44","00933C",1],["QM42","00933C",1],["M1","EE352E"],["SIM8X","00933C"],["M3","B933AD"],["M2","B933AD"],["M5","EE352E"],["M4","00AEEF"],["M7","00AEEF"],["M9","B933AD"],["M8","00AEEF"],["QM3","00933C",1],["QM4","00933C",1],["QM1","00933C",1],["QM2","00933C",1],["QM7","00933C",1],["QM8","00933C",1],["QM36","00933C",1],["QM35","00933C",1],["QM5","00933C",1],["M86+","FAA61A"],["QM6","00933C",1],["QM34","00933C",1],["QM32","00933C",1],["QM31","00933C",1],["SIM35","00933C"],["SIM3C","00933C"],["SIM32","00933C"],["SIM31","00933C"],["SIM34","00933C"],["SIM33","00933C"],["SIM30","00933C"],["SIM25","00933C"],["SIM24","00933C"],["SIM26","00933C"],["SIM1C","00933C"],["SIM23","00933C"],["SIM22","00933C"],["SIM4X","00933C"],["Q1","FAA61A"],["Q3","00AEEF"],["Q2","6CBE45"],["Q5","EE352E"],["Q4","EE352E"],["BX90"],["SIM4C","00933C"],["B44+","B933AD"],["B46+","6CBE45"],["M23+","B933AD"],["BX1","00AEEF"],["BX2","FAA61A"],["BX5","EE352E"],["BX6","EE352E"],["BX3","EE352E"],["BX4","FAA61A"],["BX9","FAA61A"],["BX7","EE352E"],["BX8","FAA61A"],["BX41+","EE352E"],["Q20B","006CB7"],["Q20A","006CB7"],["Q44+","EE352E"]],[[1,"00985F",,"Babylon"],[12,"4D5357",,"City Terminal Zone"],[7,"6E3219",,"Far Rockaway"],[2,"066AFE",1,"Harlem"],["Wassaic","066AFE",1,"Wassaic"],[2,"CE8E00",,"Hempstead"],[1,"009B3A",1,"Hudson"],[6,"FF6319",,"Long Beach"],[5,"00B2A9",,"Montauk"],[3,"EE0034",1,"New Haven"],[5,"EE0034",1,"Danbury"],[4,"EE0034",1,"New Canaan"],[6,"EE0034",1,"Waterbury"],[3,"00AF3F",,"Oyster Bay"],[50,"94219A",1,"Pascack Valley"],[10,"006EC7",,"Port Jefferson"],[51,"FFD411",1,"Port Jervis"],[9,"C60C30",,"Port Washington"],[4,"A626AA",,"Ronkonkoma"],[8,"00A1DE",,"West Hempstead"]],[[1,1],[3,3],[2,2],[5,5],[4,4],[7,9],[6,7],["H",28],["J",19],["M",17],["L",21],["N",22],["Q",23],["R",24],["W",25],["A",11],["C",12],["B",14],["E",13],["D",15],["G",18],["F",16],["Z",20],["FS",26],["GS",27],["SI",29]]],E&&E()}();';