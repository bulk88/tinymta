!function(){if(history.pushState){var e,t,h,v,b,k,E,s,c,r=document.documentElement,w=r.firstChild,N={},m=0,S=location.pathname,u=location.hash,T=4,x=[,[0,5],,[3,8],[2,7],[0,4],[0,4],[1,6],[,9]],A=["//backend-unified.mylirr.org","//otp-mta-prod.camsys-apps.com","//collector-otp-prod.camsys-apps.com",["//tiles1.tinymta.us.to","//tiles2.tinymta.us.to"],"/rstop.htm","/rtrain.htm","/stop.htm","/status.htm","/tileMap.htm",["/mapTileBackground.png","/zoom_out.png","/zoom_in.png","transparentTile.gif"]],O=document.createElement("style"),g=document.createElement("body");this.fetch||this.f||(f=1,w.appendChild(document.createElement("script")).src="/f.js");var n,o,a={body:document.body,style:w.getElementsByTagName("style")[0],y:y},i=[a,a.body,S+u,T],l=w.querySelectorAll('link[rel="preconnect"]');if(l.length){if(1<l.length){for(o=document.createElement("div"),n=0;n<l.length;n++)o.appendChild(l[n]);w.appendChild(o)}else o=l[0];o="DIV"===(v=A[x[T][0]]=a.pc=o).nodeName?v.firstChild:v,(s=o.cloneNode(0)).removeAttribute("href")}else alert("bug");if((l=w.querySelectorAll('link[rel="prefetch"]')).length){if(1<l.length){for(o=document.createElement("div"),n=0;n<l.length;n++)o.appendChild(l[n]);w.appendChild(o)}else o=l[0];o="DIV"===(v=A[x[T][1]]=a.pf=o).nodeName?v.firstChild:v,(c=o.cloneNode(0)).removeAttribute("href")}else alert("bug");function d(e){var t,n,o,a,i="touchstart"===e.type;if("A"===(e="FONT"===(e=e.target).nodeName?e.parentNode:e).nodeName&&(i||!e.tmts)&&(f=e.hash,(t=e.pathname)!==location.pathname)){switch(t){case"/tileMap.htm":n=8;break;case"/stations.htm":n=7;break;case"/mn/stations.htm":n=6;break;case"/li/stations.htm":n=5;break;case"/":n=4;break;case"/stop.htm":n=3;break;case"/status.htm":n=2;break;case"/rstop.htm":n=1;break;case"/rtrain.htm":n=0;break;default:return}if(n<4&&(f=f.slice(1),window.S={t:Date.now(),s:f,f:function(e){o?e(o):a=e}},console.log("s"+Date.now()),fetch(3===n?"//otp-mta-prod.camsys-apps.com/otp/routers/default/nearby?timerange=1800&apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE&stops=MTASBWY:"+f.slice(0,3):2===n?"//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP":1===n?"//backend-unified.mylirr.org/arrivals/"+f:"//backend-unified.mylirr.org/locations/"+f+"?geometry=NONE",1<n?{}:{headers:{"accept-version":"3.0"}}).then(function(e){a?a(e):o=e}),2===n)&&(R=0,w.appendChild(document.createElement("script")).src="routes.js"),!(f=N[t])||f.p1&&void 0===k){var r,l,s,c,d,p,h,m=t,f=n,u={},g=S,C=T;try{-1!=m.indexOf("/stations")&&(u.p1=p=1,void 0===k?(onpopstate.o=d=function(e,t){t?w.removeChild(c):k=e||0,c.onerror=0,onpopstate.o=0,h?h():h=1},w=document.documentElement.firstChild,(c=document.createElement("script")).onerror=function(){d(0,1)},c.src="1p.js",w.appendChild(c)):h=1),(r=x[f])&&(l=r[0],(s=A[l])&&s.length&&(s=L(l,0)),(u.pc=s)&&(v&&w.removeChild(v),v=w.appendChild(s)),l=r[1],(s=A[l])&&s.length&&(pFIdxToFree=l,s=L(l,1)),u.pf=s)&&(b&&w.removeChild(b),b=w.appendChild(s)),fetch(m,{},1).then(function(e){e.text().then(function(e){var t,n,o,a,i,r;-1!=(t=e.indexOf("<style>"))?(a=e.slice(t+="<style>".length,t=e.indexOf("</style>",t)),t+=8,o=0,":root{color-scheme:light dark}"!=a||(o=E)||(i=1),o||((o=O.cloneNode(0)).textContent=a,i&&(E=o)),u.style=o):t=0,-1!=(scriptStart=e.indexOf("<script>",t))&&(a=y,i=window.onpageshow,window.onpageshow=null,n=e.indexOf("<\/script>",scriptStart+"<script>".length),Function(e.slice(scriptStart+"<script>".length,n))(),(r=(o=u.js=onhashchange).body)&&delete o.body,u.y=y,u.pg=window.onpageshow,y=a,window.onpageshow=i,onhashchange=null),-1==e.indexOf("No javascript",t)&&(e=-1!=scriptStart?e.slice(t,scriptStart)+e.slice(n+"<\/script>".length):e.slice(t),(o=document.createElement("html")).innerHTML=e,u.body=o=o.lastElementChild,r&&r(o),"SCRIPT"==(e=o.lastElementChild).nodeName)&&o.removeChild(e),!p||h?(N[m]=u,j(g,m,C)):h=function(){N[m]=u,j(g,m,C)}})})}catch(e){}}e.tmts=i}}function j(r,l,s){(this.requestIdleCallback||this.requestAnimationFrame||function(e){setTimeout(e,40)})(function(){var e,t,n,o,a=location.origin.length,i=N[r];if(e=i.pf)if("DIV"===e.nodeName){for(n=e.firstChild;n;){if(o=n.nextElementSibling,n.href.slice(a)==l){e.removeChild(n);break}n=o}e.firstChild||((t=e.parentNode)&&t.removeChild(e),delete i.pf,b===e&&(b=null),A[x[s][1]]=null)}else e.href.slice(a)==l&&((t=e.parentNode)&&t.removeChild(e),delete i.pf,b===e&&(b=null),A[x[s][1]]=null)})}function L(e,t){var n,o,a,i,r,l=A[e];if("string"==typeof l)a=(t?c:s).cloneNode(0),".png"!=(r=l.slice(-4))&&".gif"!=r||(a.rel="preload",a.as="image"),a.href=l;else for(a=document.createElement("div"),n=0;n<l.length;n++)o=(t?c:s).cloneNode(0),".png"!=(r=(i=l[n]).slice(-4))&&".gif"!=r||(o.rel="preload",o.as="image"),o.href=i,a.appendChild(o);return A[e]=a}function p(e){+(e=[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,0,1,2,3,4,5,6,7,8,9,,,,,,,,2,,,3,,,4,,,5,,,6,,,7,,,,8,,,9,,,,,,,,,,2,,,3,,,4,,,5,,,6,,,7,,,,8,,,9][e.keyCode])===e&&(e=document.querySelector('[accesskey="'+e+'"]'))&&e.click()}for((el_fn=window.onpageshow)?a.pg=el_fn:window.onpageshow=function(e){a.pg=e,window.onpageshow=e},N[S]=a,h=[i],history.state!==m&&history.pushState(m,0,location.href),addEventListener("touchstart",d,{passive:!0}),addEventListener("mousedown",d,{passive:!0}),addEventListener("click",function(e){var t,n,o,a,i,r,l,s,c=document.documentElement,d=c.firstChild,p=e.target;if("A"===(p="FONT"===p.nodeName?p.parentNode:p).nodeName){switch(a=p.pathname){case"/tileMap.htm":r=8;break;case"/stations.htm":r=7;break;case"/mn/stations.htm":r=6;break;case"/li/stations.htm":r=5;break;case"/":r=4;break;case"/stop.htm":r=3;break;case"/status.htm":r=2;break;case"/rstop.htm":r=1;break;case"/rtrain.htm":r=0;break;default:return}(t=N[a])?(i=p.hash,s=a===location.pathname&&i!=location.hash,(o=(l=h[m])[0]).p1&&k&&T!==r&&k({}),s||(c.removeChild(l[1]),(n=o.style)!==(o=t.style)&&(n&&d.removeChild(n),o)&&d.appendChild(o),v!==(o=t.pc)&&(v&&d.removeChild(v),v=o)&&d.appendChild(o),b!==(o=t.pf)&&(b&&d.removeChild(b),b=o)&&d.appendChild(o)),l=h[++m]=[],(n=(n=this.T)&&n.GC)&&n(),h.length=m+1,t.body?l[1]=s?t.body:c.appendChild(t.body):l[1]=c.appendChild(g.cloneNode(0)),history.pushState(m,0,p.href),s||(e.preventDefault(),y=t.y,window.onpageshow=t.pg,(d=t.js)&&d(),S=a,u=i,8==(T=r)&&t.pf&&(j(a,"/mapTileBackground.png",8),j(a,"/zoom_out.png",8),j(a,"/zoom_in.png",8),j(a,"/transparentTile.gif",8))),l[0]=t,l[2]=a+i,l[3]=r):console.log("on click no cache spa ent")}}),onpopstate=function(e){var t,n,o,a,i;null!==(e=e.state)&&(S==location.pathname&&u!=location.hash?(S=location.pathname,u=location.hash,console.log("spa leave 1")):e===m||e>=h.length?(console.log("spa leave 2"),location.reload()):(n=(t=h[m])[0],a=(o=h[e])[3],S=location.pathname,u=location.hash,i=o[0],n.p1&&k&&T!==a&&k({}),r.removeChild(t[1]),(t=n.style)!==(n=i.style)&&(t&&w.removeChild(t),n)&&w.appendChild(n),v!==(n=i.pc)&&(v&&w.removeChild(v),v=n)&&w.appendChild(n),b!==(n=i.pf)&&(b&&w.removeChild(b),b=n)&&w.appendChild(n),m=e,T=a,r.appendChild(o[1]),y=i.y,onpageshow=t=i.pg,t&&t({persisted:1})))},addEventListener("keyup",p,0),addEventListener("keypress",p,0),e=w.firstChild;e;)"preconnect"===e.rel&&((t=document.createElement("link")).rel="dns-prefetch",t.href=e.href,w.appendChild(t)),e=e.nextElementSibling}this.ScriptEngineMajorVersion&&(ScriptEngineMajorVersion()<5||5===ScriptEngineMajorVersion()&&ScriptEngineMinorVersion()<5)&&(onload=function(){for(var e,t,n,o,a=document.links,i=a.length,r=0;r<i;r++)e=(t=a[r]).pathname,n?n===e&&(t.pathname=o):(t=e.length-8,"s"!==(o=e.charAt(t))&&"a"!==o||!~e.indexOf("s"===o?"stop":"atus",t)||(o=(n=e).slice(0,-4)+"ie50.htm",r--));onload=null})}();