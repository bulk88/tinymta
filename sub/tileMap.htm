<html>
<head>
<link href="//tiles1.tinymta.us.to" rel="dns-prefetch">
<link href="//tiles1.tinymta.us.to" rel="preconnect">
<link href="//tiles2.tinymta.us.to" rel="dns-prefetch">
<link href="//tiles2.tinymta.us.to" rel="preconnect">
<meta name="viewport" content="width=device-width">
<meta name="referrer" content="no-referrer">
<title>The Weekender</title>
</head>
<script language="javascript" type="text/javascript">

// Neighborhood Map Dimensions
/* removed/inlined
var mapImgDimensions = {
Manhattan: "5000,17408",
B1: "1500,1500",
B2: "1500,1500",
B3: "1500,1500",
B4: "1500,1500",
B5: "1500,1500",
B6: "1500,1500",
B7: "1500,1500",
B8: "1500,1500",
B9: "1500,1500",
B10: "1500,1500",
B11: "1500,1500",
B12: "1500,1500",
B14: "1500,1500",
B15: "1500,1500",
B16: "1500,1500",
B17: "1500,1500",
B18: "1500,1500",
B19: "1500,1500",
B13: "1500,1500",
BX1: "1500,1500",
BX2: "1500,1500",
BX3: "1500,1500",
BX4: "1500,1500",
BX5: "1500,1500",
BX6: "1500,1500",
BX7: "1500,1500",
BX8: "1500,1500",
BX9: "1500,1500",
BX10: "1500,1500",
Q1: "1500,1500",
Q2: "1500,1500",
Q3: "1500,1500",
Q4: "1500,1500",
Q5: "1500,1500",
Q6: "1500,1500",
Q7: "1500,1500",
Q8: "1500,1500",
Q9: "1500,1500",
Q10: "1500,1500",
Q11: "1500,1500",
Q12: "1500,1500",
S1: "1500,1500"
};
*/


var tilePath
var initialX
var initialY
var mapWidth
var mapHeight
var tileDirectory
var mapDrag = false

var centerPixX
var centerPixY
var startXY
var xDownStart = [];
var yDownStart = [];
var alertTimer;

//set the initial map settings
var zoomLevel = 2
/* 2021 factor out
var defaultCenterX
var defaultCenterY
*/

var aStyle = new Array()
var aElement = new Array()

function centerOnStation(stationLocInfo) {
var stationLoc = "'V7Y:((Pt+'J,]m'O;J`&s,.d&EXM3'F1jS&)Jc;'Klcj'E0L?(Q?&9'QS_)'l3V?'A&cr/H2UV'3>dh(4CoR(j/.I%%)2;%7I2R&*;yy&nO<b's_f.&+;3F&^uZJ%9w{p'Xf]k(QjlB)5t[d%[Tlv&F]-P'I<P*(7y??(-sU/&7`]f'%rUa%^/co%dW;9&NrPR'>GAW%ig;{'t_'k(+@d9%k,R*%y:Cv&dn6?'e1I+(SAl5&HM6X'cq'g(d5Z'(8;{O&s11O&-DB1(`Aoj%k+T;'(Kmw(T^]'%p;R,&M]1m&/v*n'J-(-'?_iA%U-Fn'{0VF&IfVx&ZUWK'e5EU&8x7n(:la<&Wv4y'ge%`(m5pW%U.B/&/s@u'J)3H&maMS'xWA-'a;BV)9mfV%H9()(YhS3'S+.8)%0/j'GLTy)2+/j%IO7[&LD0Q(^Ja0'ocTh&NZyf%Vq1l%n2yW'nbw;&-A1d([/]n&2%;y&ta?8((3uZ%?5U{)-pBf&eq{N&]E.L&+OXR'n7XZ'*PI`&h:N((g%^,&m`dw'5nBg%^0u;'k/-U')yqU'CA@-%TX>d(I)0I%ykUu&s{F`'stR8(O;PR(9U:D(XVhB'u`%C&e]>R('vZ)'@9oY&HO'<&.{oJ%6qwJ(eNrP&(L1Z(0QB>&i++d%tIcp%tC-0&J&*a&:glr&?wZ`'[FNL'6q-W(*g:K)@PKb&pgE0)5t3m'nd^;&YRa`)5vch'Nb`d(%]ah(V;/+(<-9q(rD8)'b@Bl&TX3N%^0wq)6Kx5&squ4&8y5E%AeE1)&K9J(5^B@'9;xr'=,hb({F'I&[kd:&/r8S'X:(q&V_/0%Fq]q(j[;2'B>g<%m^LZ(d3[Q'oQx8&,*.)&o:Fj)5rX{(KX,M)=^Cu(J?xk'VvI4&T-FC'O7(C%VG]%'%opa(K[{?'O9db%2wDc&5*`T'-XF+(FK::%3Rmc)5s2;(XRK1'r-`T&tHPh&?JqJ(wR]i(4BTU'Qgjn&heus%t.aK%-)+A)+WBZ')cfn(+?a(&6EV<%;<1F'aA=.',DQ8).1I3'oMy8&yT-t&IeXt%-)R3(d3{-(Coi=(j]Pf&^MQW'w@3{%Sh+*(/3BM'2ey*(LqaW'4,Gk(]b]aJb21+;[B?+:V]vW6JI[b8;NSN4n),g2Z-cv-l+T:(:n)5,&&a]*P-@S0O6Al<k0mN>^gHg@=d]lA`s,v1[/gXC6m4X(rJ4v'C[>S34t[lDF{?54a2D_6abk:8_a,:2r_m&EU2qqG>Lj+HwXF5JSxwbLKP(?N7FY&:CmCq<yFF5>BFN:@9rSlAP2{?C:eF:;`T{gGBC:XF>66NGi/Z5J_ZiNKg]dSL['DDMV0xgNOvfIFo>vqI4aU?Oo:ogQ@&F]43wZ:F53_IG`-.0L]ZB5NAes?Ouc3DI21*0JZMj?4w3O56q<8?8hh=q:JB6N;D2y0QUy^IRc5uSK{*HII,xY0SQFr:Te*O0S*[.lV/CKSEVO`0LaQPlW<U1qFpZiqU'A,]V4RCgW3QU:U>W8DWvb:]Vwc3SU'AmDS)Cn]N:(ogW8`qbJk?YqKe0GSL[+_qXP9sbQN<CXX3j^+UpymSOX)DNI&SrvQ1mB]S5%,]VoyFNTj;;:G;vX:Pm&-&QrLDSEY.s+TZeKX8laWb:OTB+;V>KD<qaoq>LiZ]@D@`:B+(tqCktS5OK0WIDqF-&NC.qNR,y-:Px]lIRQ3v:NC1']Qu-;lS>-w]+hqBX-_0-I)Ks,+.wwJX'TCm@'+&rE(5[Xc&ZTQr(E2m'&)M0w&B)'X'?2mc'xRw<''1LA'd1'i&[,d''{tG+(OgVQ%y@>m%o:T/&TlgL&DUk'&Cj)m&:&QF';AS+&,+Kr(Xk`7(QXSV&&G5J&KS=A(5Zfu(Bk*[(]arF&,)UJ(c2<5&,*N,(0PU7'pma7(J>ki(BU4-(9RtA'b.8N'&X&2'JnbP),o<)'1d&k(aUsh(+?5B(s]u((3*QG'JTf>'NK)p&i(t6&/tFV&_dy3'm_P_'2'VP&OMk^&Oyx-'.vn&&iQRq&`NoH%^^I=&V_t<&/Hp&&SBN&&ErJ5'6v,9%)tT2'o9fK%YeZ/'MGcN&Rl8a'vyI*'WM6t(KYI8'C@a*'3*/b'1Q*w''w_j'M[UN'CUje';l3)'Xix/(:oMu&8^v=&]{`X'-pJ]'4o{U'&si>&q+N3&e5?x&U3cN&B?Bj%^b(n%Jj{2%8c.=%o%-y(e3,_(_NA=(Xfb?(RV6-(?ww.(.1su(%ZSq(nLIp'i*Kj'^cB='J@K'";
  //5 printable bytes holds 1 32 bit station bitfield
  if((stationLocInfo = (stationLocInfo|0) * 5) < stationLoc.length) {
  var xCoor_value = 0;
    for (var yCoor_i = 0; yCoor_i < 5; yCoor_i++) {
    tileDirectory = stationLoc.charCodeAt(stationLocInfo+yCoor_i);
    // Accumulate value in base 85
    xCoor_value = xCoor_value * 85 + ((tileDirectory == 123 ? 92 : tileDirectory) - 37);
  }
        tileDirectory = (xCoor_value % 44 /*scaledir*/) + 1
        tileDirectory = tileDirectory < 11 ? "BX"+tileDirectory : tileDirectory < 30 ? "B"+(tileDirectory-10) : tileDirectory == 30 ? "Manhattan" : tileDirectory == 43 ? "S1" : "Q"+(tileDirectory-30);
        yCoor_i = ((((xCoor_value/(44 /*scaledir*/ * 3607 /*scalex*/) % 16942 /*scaley*/)) + 19)/*shifty*/*zoomLevel)|0
        //VARIABLE REUSE watch X Y order
        xCoor_value = (((xCoor_value/44 /*scaledir*/ % 3607 /*scalex*/) + 69) /*shiftx*/*zoomLevel)|0
        if (xCoor_value < 315)
            xCoor_value = 315;
        if (yCoor_i < 315)
            yCoor_i = 315;

        if (zoomLevel == 1) {
            if (tileDirectory != "Manhattan") {
                if (xCoor_value > 1185)
                    xCoor_value = 1185;
                if (yCoor_i > 1185)
                    yCoor_i = 1185;
            }
            else {
                if (xCoor_value > 4685)
                    xCoor_value = 4685;
                if (yCoor_i > 17093)
                    yCoor_i = 17093;
            }
        }
        if (zoomLevel == 2) {
            if (tileDirectory != "Manhattan") {
                if (xCoor_value > 2685)
                    xCoor_value = 2685;
                if (yCoor_i > 2685)
                    yCoor_i = 2685;
            }
            else {
                if (xCoor_value > 9685)
                    xCoor_value = 9685;
                if (yCoor_i > 34501)
                    yCoor_i = 34501;
            }
        }
// prev var mapArgs = mapImgDimensions[tileDirectory].split(",")
        mapWidth = tileDirectory == "Manhattan" ? 5000 : 1500
        mapHeight = tileDirectory == "Manhattan" ? 17408 : 1500
//function setTilePath(d)
//{
    //tilePath = "http://wd1.mtahq.org/neighborhoodMaps/" + d + "/"
    //tilePath = "http://web.mta.info/neighborhoodMaps/" + tileDirectory + "/"
    //tilePath = "http://10.8.86.78/WeekenderVer2/neighborhoodMaps/" + d + "/"

    tilePath = "neighborhoodMaps/" + tileDirectory + "/"

//}
//old function recenterMap(x,y)
        initialX = xCoor_value
        initialY = yCoor_i
        loadNewMap()
    }
}
/* 2021 factor out
function recenterMap(x,y)
{
    initialX = x
    initialY = y
    loadNewMap() 
}
*/

function loadNewMap()
{
hideImageTiles() 
centerPixX = initialX
centerPixY = initialY
loadMap()
}

/* 2021 factor out
function showImageTiles()
{
 for(var k=0; k<25; k++)
 {
 aStyle[k].visibility = "visible"
 }
}
*/

function hideImageTiles()
{
 for(var k=0; k<25; k++)
 {
 aStyle[k].visibility = "hidden"
 }
}

function getCurrentCenter()
{
  //formerly 12 == document.getElementById("a22");
  var arr  = aElement[12].className.split("_");
  var style = aStyle[12];
  return [(arr[0]*256)+(315-parseInt(style.left)), (arr[1]*256)+(315-parseInt(style.top))];
}

/* unused 2021 factor out
function getCenterRow()
{
 var row
 var row0pos
 var row1pos
 var row2pos
 var row3pos
 var row4pos

 row0pos = parseInt(aStyle[2].top)+325
 row1pos = parseInt(aStyle[7].top)+325
 row2pos = parseInt(aStyle[12].top)+325
 row3pos = parseInt(aStyle[17].top)+325
 row4pos = parseInt(aStyle[22].top)+325

 if(row0pos > 512 && row0pos < 769)
 {
  row = "0"
 }
 if(row1pos > 512 && row1pos < 769)
 {
  row = "1"
 }
 if(row2pos > 512 && row2pos < 769)
 {
  row = "2"
 }
 if(row3pos > 512 && row3pos < 769)
 {
  row = "3"
 }
 if(row4pos > 512 && row4pos < 769)
 {
  row = "4"
 }

return row
}
*/

/* unused 2021 factor out
function getCenterCol()
{
 var col
 var col0pos
 var col1pos
 var col2pos
 var col3pos
 var col4pos

 col0pos = parseInt(aStyle[10].left)+325
 col1pos = parseInt(aStyle[11].left)+325
 col2pos = parseInt(aStyle[12].left)+325
 col3pos = parseInt(aStyle[13].left)+325
 col4pos = parseInt(aStyle[14].left)+325


 if(col0pos > 512 && col0pos < 769)
 {
  col = "0"
 }
 if(col1pos > 512 && col1pos < 769)
 {
  col = "1"
 }
 if(col2pos > 512 && col2pos < 769)
 {
  col = "2"
 }
 if(col3pos > 512 && col3pos < 769)
 {
  col = "3"
 }

 if(col4pos > 512 && col4pos < 769)
 {
  col = "4"
 }

 return col
}
*/


function getRemainderPix(totalPix)
{
 return totalPix%256
}

function getNumberOfTiles(totalPix)
{
 var remainderPix = totalPix%256
 var tilesCount = (totalPix - remainderPix)/256
 return tilesCount
}

function loadMap()
{
 hideImageTiles()

//function getCenterTile(pY,pX)
//{
 // old name numberOfRow
 var nameX = getNumberOfTiles(centerPixX)
 //old name numberOfColumns
 var nameY = getNumberOfTiles(centerPixY)
//}
 //resetTileCells(128 - getRemainderPix(centerPixY), 128 - getRemainderPix(centerPixX))
//}
  var topShift = 128 - getRemainderPix(centerPixY)
  var leftShift = 128 - getRemainderPix(centerPixX)

//function resetTileCells(topShift,leftShift)
//{
 var k
 //image tile load order
 var s0 = [12,7,17,11,13,6,8,16,18,0,1,2,3,4,5,9,10,14,15,19,20,21,22,23,24];
 var k_adj
 var oldCenterTileSrc
 //var newCenterTileSrc //redundants

 nameX = [nameX-2, nameX-1, nameX, nameX+1, nameX+2]
 nameY = [nameY-2, nameY-1, nameY, nameY+1, nameY+2]

 //old 12 == document.getElementById("a22")
 oldCenterTileSrc = aElement[12].src;

//prefer loading center tiles over outer or hidden tiles, domain sharding is other idea
  for(k=0; k<25; k++) {
   k_adj = s0[k];
   setImgSrc(aElement[k_adj], nameX[k_adj%5], nameY[(k_adj/5)|0]);
  }

 aStyle[0].left = aStyle[5].left = aStyle[10].left = aStyle[15].left = aStyle[20].left = aStyle[0].top = aStyle[1].top = aStyle[2].top = aStyle[3].top = aStyle[4].top = "-325px"
 aStyle[1].left = aStyle[6].left = aStyle[11].left = aStyle[16].left = aStyle[21].left = aStyle[5].top = aStyle[6].top = aStyle[7].top = aStyle[8].top = aStyle[9].top = "-69px"
 aStyle[2].left = aStyle[7].left = aStyle[12].left = aStyle[17].left = aStyle[22].left = aStyle[10].top = aStyle[11].top = aStyle[12].top = aStyle[13].top = aStyle[14].top = "187px"
 aStyle[3].left = aStyle[8].left = aStyle[13].left = aStyle[18].left = aStyle[23].left = aStyle[15].top = aStyle[16].top = aStyle[17].top = aStyle[18].top = aStyle[19].top = "443px"
 aStyle[4].left = aStyle[9].left = aStyle[14].left = aStyle[19].left = aStyle[24].left = aStyle[20].top = aStyle[21].top = aStyle[22].top = aStyle[23].top = aStyle[24].top = "699px"

 for(k=0; k<25; k++)
 {
   s0 = aStyle[k]
   s0.top = (parseInt(s0.top) + topShift) + "px"
   s0.left = (parseInt(s0.left) + leftShift) + "px"
 }
 
 //old 12 == document.getElementById("a22")
 //newCenterTileSrc = aElement[12].src
 if(oldCenterTileSrc.toLowerCase() == aElement[12].src.toLowerCase())
 {
//old function showImageTiles()
    for(k=0; k<25; k++)
    {
      aStyle[k].visibility = "visible"
    }
 }
}

/* unused 2021 factor out
function initLoad()
{
  loadMap()
}
*/

function setImgSrc(elem, x, y) {
  var shard = (x*y) % 3;
  elem.src = (shard == 1 ? "//tiles1.tinymta.us.to/" : shard ? "//tiles2.tinymta.us.to/" :
/*STARTINSERTPATH*/
  "../docs/"
/*ENDINSERTPATH*/
  ) + tilePath + (zoomLevel+14) + "_" + (elem.className = x + "_" + y) + ".png"
}

//this must be before the img tags before for IE5 or else exception fires
//IE 5 calls showImage syncronously if tile is disk cached before rest of
//root doc is parsed
function showImage(e)
{
e.style.visibility = "visible"
}

//IE5 wants this event handler before the element, its fired instantly
//even if no drag if mouse in viewport, minor exception doesnt dreak
//anything, drag works, but get rid of the status bar exception log msg
function mapmousemove(i /*element really*/) {
    if(!mapDrag)
    {
    return;
    }

    i = getPosition(i)
    var curX = i.x - startXY.x
    var curY = i.y - startXY.y

    var curCenterX = centerPixX  - curX
    var curCenterY = centerPixY  - curY
    var maxX = (mapWidth*zoomLevel)-315
    var maxY = (mapHeight*zoomLevel)-315

    if((curCenterX > 315 && curCenterX < maxX) || (centerPixX < 315 && curX < 0) || (centerPixX > maxX && curX > 0))
    {
      for(i=0; i < 25; i++)
        aStyle[i].left = (xDownStart[i] + curX) + "px"
    }

    if((curCenterY > 315 && curCenterY < maxY) || (centerPixY < 315 && curY < 0) || (centerPixY > maxY && curY > 0))
    {
      for(i=0; i < 25; i++)
        aStyle[i].top = (yDownStart[i] + curY) + "px"
    }

}

</script>

<!--
unused 2021 factor out body tag attr

 -->
<body onmousedown="hideCustomAlert()"
style="width:630px; height:630px; margin:0px; padding:0px; overflow:hidden;">

<!-- id="mapApplication" -->
<div style="display:inline; position:absolute; top:0px; left:0px; width:630px; height:630px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on">
<!-- id="mapContainer"  -->
 <div style="position:absolute; top:0px; left:0px; width:630px; height:630px; overflow:hidden; cursor:move; background-image:url(mapTileBackground.png); -moz-user-select: none; -webkit-user-select: none;" unselectable="on">
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:-325px; left:-325px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: dotted;border-color: Fuchsia -->
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:-325px; left:-69px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: double;border-color: Fuchsia -->
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:-325px; left:187px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: dashed;border-color: Fuchsia -->
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:-325px; left:443px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: groove;border-color: Fuchsia -->
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:-325px; left:699px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: solid;border-color: Fuchsia -->


 <img onload="showImage(this)" style="z-index:0; position:absolute; top:-69px; left:-325px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: dotted;border-color: lime -->
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:-69px; left:-69px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: double;border-color: lime -->
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:-69px; left:187px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: dashed;border-color: lime -->
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:-69px; left:443px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: groove;border-color: lime -->
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:-69px; left:699px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: solid;border-color: lime -->


 <img onload="showImage(this)" style="z-index:0; position:absolute; top:187px; left:-325px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: dotted;border-color: cyan -->
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:187px; left:-69px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: double;border-color: cyan -->
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:187px; left:187px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: dashed;border-color: cyan -->
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:187px; left:443px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: groove;border-color: cyan -->
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:187px; left:699px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: solid;border-color: cyan -->

 <img onload="showImage(this)" style="z-index:0; position:absolute; top:443px; left:-325px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: dotted;border-color: yellow -->
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:443px; left:-69px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: double;border-color: yellow -->
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:443px; left:187px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: dashed;border-color: yellow -->
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:443px; left:443px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: groove;border-color: yellow -->
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:443px; left:699px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: solid;border-color: yellow -->


 <img onload="showImage(this)" style="z-index:0; position:absolute; top:699px; left:-325px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: dotted;border-color: red -->
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:699px; left:-69px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: double;border-color: red -->
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:699px; left:187px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: dashed;border-color: red -->
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:699px; left:443px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: groove;border-color: red -->
 <img onload="showImage(this)" style="z-index:0; position:absolute; top:699px; left:699px; width:256px; height:256px; -moz-user-select: none; -webkit-user-select: none;" unselectable="on"/>
<!-- border-style: solid;border-color: red -->


 <div style="display:inline; position:absolute; top:0px; left:0px; width:630px; height:630px; background-image:url(transparentTile.gif); -moz-user-select: none; -webkit-user-select: none;" onmousedown="mapmousedown(event)" onmousemove="mapmousemove(event)" onmouseup="mapmouseup()" onmouseout="mapmouseup()" ontouchstart="mapmousedown(event)" ontouchmove="mapmousemove(event)" ontouchend="mapmouseup()" ontouchcancel="mapmouseup()"><div></div></div>
 <img src="zoom_out.png" style="display:inline;cursor:pointer; position:relative; top:2%; left:2%; height:30px; width:26px;" border="0" onmouseover="menuImageOver(this)" onmouseout="menuImageOut(this)" onclick="zoom(-1)">
 <img src="zoom_in.png" style="display:inline;cursor:pointer; position:relative; top:2%; left:4%; height:30px; width:26px;" border="0" onmouseover="menuImageOver(this)" onmouseout="menuImageOut(this)" onclick="zoom(1)">

<div id="customAlert" style="display:none; position:absolute; top:240px; left:165px; width:300px; background-color:black; color:white; font-family:arial; font-family:arial; font-weight:bold; font-size:18px; border:solid silver 3px; text-align:center; padding-top:50px; padding-bottom:50px;">
<div></div>
 </div>
</div>


</body>
<script language="javascript" type="text/javascript">
(function(){
//OLD function initializeDocumentObjects() {
 //last 2 image elems in this array are zoom buttons, ignore them
 var imgarr = document.getElementsByTagName('img'), i=0;
 for(; i<25; i++)
 {
 aStyle[i] = (aElement[i] = imgarr[i]).style;
 }

 /* 2021 factor out
 centerPixX = defaultCenterX
 centerPixY = defaultCenterY
 */
//END initializeDocumentObjects

(onhashchange =
//OLD function loadFromQueryString() {
// browser cache friendly hash argument
function () {
  var stationLoc = window.location.hash.substring(1), gy, ft;
  if(!stationLoc) {
    if (gy = window.location.search) {
      gy = gy.substring(1).split("&");
      for (i = 0; i < gy.length; i++) {
        ft = gy[i].split("=");
        if (ft[0] == "staID") {
          stationLoc = ft[1];
          break;
        }
      }
    }
  }
  centerOnStation(stationLoc);
}
)();

parent.neighborhoodMapLoaded = true;
})();
</script>
<script>
function showCustomAlert(text)
{
var element = document.getElementById("customAlert");
element.innerHTML = text
element.style.display = "inline"
clearTimeout(alertTimer)
alertTimer = setTimeout(hideCustomAlert,3000)
}

function hideCustomAlert()
{
clearTimeout(alertTimer)
document.getElementById("customAlert").style.display = "none"
}

function menuImageOver(elem) {
    elem.src = elem.src.replace('.png','_over.png');
}
function menuImageOut(elem) {
    elem.src = elem.src.replace('_over.png', '.png');
}

function zoom(i)
{
  hideCustomAlert()
  var currentCenter = getCurrentCenter();
  var currentCenterX = currentCenter[0]
  var currentCenterY = currentCenter[1]
  var newCenterX
  var newCenterY
 if(i == -1)
 {
 if(zoomLevel > 1 /* minZoom */)
 {
  hideImageTiles()
  zoomLevel = zoomLevel - 1
  newCenterX = parseInt(currentCenterX/2)
  newCenterY = parseInt(currentCenterY/2)
  }
  else
  {
     return showCustomAlert("This is the lowest zoom level")
  }
 }
 if(i == 1)
 {
 if(zoomLevel < 2 /* maxZoom */)
 {
  hideImageTiles()
  zoomLevel = zoomLevel + 1
  newCenterX = currentCenterX*2
  newCenterY = currentCenterY*2
 }
 else
 {
  return showCustomAlert("This is the highest zoom level")
 }
 }
 centerPixX = newCenterX
 centerPixY = newCenterY
 loadMap()
}

function getPosition(e) {
    e = e || window.event;
    var cursor = {};
    if (e.targetTouches) {
        cursor.x = Math.round(e.targetTouches[0].pageX)
        cursor.y = Math.round(e.targetTouches[0].pageY)
        /* disabled from SO sample to allow pinch zoom by browser
        and DOM drag
        e.preventDefault()
        */
    }
    else if (e.pageX || e.pageY) {
        cursor.x = e.pageX;
        cursor.y = e.pageY;
    } 
    else {
        var de = document.documentElement;
        var b = document.body;
        cursor.x = e.clientX + 
            (de.scrollLeft || b.scrollLeft) - (de.clientLeft || 0);
        cursor.y = e.clientY + 
            (de.scrollTop || b.scrollTop) - (de.clientTop || 0);
    }
    return cursor;
}

function mapmousedown(i /*element really*/) {

  hideCustomAlert()
  mapDrag = true
  startXY = getPosition(i)
  for(i=0; i < 25; i++)
  xDownStart[i] = parseInt(aStyle[i].left);
  for(i=0; i < 25; i++)
  yDownStart[i] = parseInt(aStyle[i].top);
}

function mapmouseup()
{

  var arr = getCurrentCenter();
  var x
  var y
  var styleObj
  var elem
  var i=0
  mapDrag = false
  centerPixX = arr[0]
  centerPixY = arr[1]
  for(; i < aStyle.length; i++)
 {
  styleObj = aStyle[i]
  elem = aElement[i]
  arr = elem.className.split("_");
  //cast to number "5"+"5" goes wrong
  x = arr[0]*1
  y = arr[1]*1
  if(parseInt(styleObj.left) > 630)
  {
  x = x-5
  y = y
  styleObj.left = (parseInt(styleObj.left)-1280) + "px"
  styleObj.visibility = "hidden"
  }

  else if(parseInt(styleObj.left)*(-1) > 256)
  {
  x = x+5
  y = y
  styleObj.left = (parseInt(styleObj.left)+1280) + "px"
  styleObj.visibility = "hidden"
  }

  if(parseInt(styleObj.top) > 630)
  {
  x = x
  y = y-5
  styleObj.top = (parseInt(styleObj.top)-1280) + "px"
  styleObj.visibility = "hidden"
  }

  else if(parseInt(styleObj.top)*(-1) > 256)
  {
  x = x
  y = y+5
  styleObj.top = (parseInt(styleObj.top)+1280) + "px"
  styleObj.visibility = "hidden"
  }
  if(styleObj.visibility == "hidden")
  {
    setImgSrc(elem, x, y);
  }
 }

}

</script>
</html>
