<meta content=0 name=mobileoptimized><meta content=no-referrer name=referrer><link href="//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP"rel=preload crossorigin as=fetch><link href=//collector-otp-prod.camsys-apps.com rel=preconnect crossorigin><link href=//collector-otp-prod.camsys-apps.com rel=dns-prefetch><script async src=routes.js></script>No javascript<script>var L,e,R,O,r=["ff6319","00933c","fccc0a","6d6e71","ee352e","2850ad","0078c6","996633","b933ad"],n={4:1,"6X":1,"5X":1,6:1,5:1,W:2,Q:2,N:2,R:2,H:3,GS:3,FS:3,2:4,3:4,1:4,C:5,A:5,E:5,SIR:6,SI:6,Z:7,J:7,7:8,"7X":8,G:"6cbe45",L:"a7a9ac"},t="//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP",a="<a href=javascript:history.back()>Back</a> Refresh[<a href=javascript:o()>Fast</a> <a href=\"javascript:location.replace('status.htm')\">Slow</a>] <a href="+t+">Raw</a><br>";function y(){fetch(t).then(function(e){200!=e.status?alert("error http status "+e.status):e.json().then(function(e,t){L=t,O=i(e.entity),R?s():R=s})}),document.body.innerHTML=a}function o(){for(var e,t=document.documentElement.firstChild.lastChild;t;t=t.previousSibling)if((e=t.src)&&e.lastIndexOf("routes.js")==e.length-9){(e=document.createElement("script")).src="routes.js",t.parentNode.replaceChild(e,t);break}y()}function A(e,t){return"<font color="+("string"!=typeof(e=n[t])?n[t]=r[0|e]:e)+">["+t+"]</font>"}function i(e){for(var t,r,n,a,o,i,s,c={},l=Math.round(Date.now()/1e3),u=0;u<e.length;u++){t=e[u],r=0;try{if((n=t.alert["transit_realtime.mercury_alert"])&&t.alert.active_period){var d="undefined"!=typeof n.display_before_active;if(~t.id.indexOf("planned_work")&&!d)r=0;else for(o=t.alert.active_period,a=0;a<o.length;a++)(i=o[a]).start&&!r&&(s=i.start,d&&(s-=n.display_before_active),s<l&&(r=1),i.end)&&l>i.end&&(r=0)}}catch(h){}if(r)for(o=t.alert.informed_entity,a=0;a<o.length;a++)(r=(i=o[a]).route_id)&&(r=r.toLowerCase(),(s=(s=c[i.agency_id]=c[i.agency_id]||{})[r]=s[r]||[]).push(t))}return c}function I(e){var t,r,n,a,o;if(e)for(o=(e=e.translation).length;n=e[--o];){if(a=n.text,"en-html"===(n=n.language))return a;"en"===n?t=a:r=a}return t||r||""}function M(e){return e?e.replace(/(\xE2\x80\u0152)|(<p style="min-height:10px"><\/p>)|(^<p>)|((<p><\/p>|<\/p>)+$)/g,"").replace(/\[(\w+)\]/g,A):""}function s(){function i(e,t){return t[1]-e[1]}function e(e,c,l){return e.forEach(function(e){var t,r,n,a,o,i=(""+e[0]).toLowerCase(),s=l[e[2]||0];if(t=(t=c[s])&&t[i]){for(r=0;r<t.length;r++)a=(n=t[r]).alert.informed_entity.find(function(e){return e.agency_id===s&&e.route_id.toLowerCase()==i?1:0}),t[r]=[(o=n.alert["transit_realtime.mercury_alert"])?o.alert_type:"No Status Summary",(o=-10,o=(a=(a=(a=a)["transit_realtime.mercury_entity_selector"])&&a.sort_order)?(o=a.split(":")[2])?+o:100:o),I(n.alert.header_text),I(n.alert.description_text),I(n.alert["transit_realtime.mercury_alert"].human_readable_active_period)];e[4]=t}}),e}function t(e){e.sort(function(e,t){return e[1]-t[1]})}function r(e,t){for(var r,n,a=0;a<t.length;a++){var o=t[a],i=o[4]?o[4][0][0]:"On or Close",s="On or Close"!=i,c="";if(s){for(c=o[4],n=0;n<c.length;n++)r=c[n],c[n]="<b>"+r[0]+"</b><br>"+M(r[2])+(r[4]?"<br>"+r[4]:"")+"<br>"+M(r[3]);c=c.join("<hr>")}t[a]="<hr>"+(s?"<details><summary>":"")+"<font color="+o[1]+">"+(o[3]||("+"==(n=o[0].indexOf("BX")?o[0]:"Bx"+o[0].slice(2)).slice(-1)?n.slice(0,-1)+"-SBS":n))+"</font> "+i+(s?"</summary>"+c+"</details>":"")}return"<hr>"+e+"<br>"+t.join("")}for(var n,a,o,s,c,l,u,d,h,m,p=(new Date).toLocaleTimeString("en-US")+(L?" via JSONP":" via CORS")+"<br>",_=[],g=[],b=[],v=[],S=[],C=(l=v,u=S,e(R[2],O,["MTASBWY"]).forEach(function(e){(e[4]?l:u).push(e)}),t(l),t(u),d=g,h=b,e(R[1],O,["LI","MNR"]).forEach(function(e){(e[2]?d:h).push(e),e[4]&&e[4].sort(i)}),m=_,e(R[0],O,["MTA NYCT","MTABC"]).forEach(function(e){e[4]&&(e[4].sort(i),m.push(e))}),function(e){for(var t,r,n,a={},o=0;o<e.length;o++)(t=e[o])[4].sort(i),(r=a[r=(n=t[4][0])[0]]=a[r]||[r,n[1],[]])[2].push(t);return Object.values(a).sort(i)}(v)),j=0;j<C.length;j++)for(p+="<hr>"+(n=C[j])[0]+"<br>",n=n[2],o=0;o<n.length;o++){for(p+="<details><summary>"+A(0,(a=n[o])[0])+"</summary>",a=a[4],s=0;s<a.length;s++)c=a[s],a[s]="<b>"+c[0]+"</b><br>"+M(c[2])+(c[4]?"<br>"+c[4]:"")+"<br>"+M(c[3]);p=p+a.join("<hr>")+"</details>"}if(S.length)for(p+="<hr>No Active Alerts<br>",j=0;j<S.length;j++)p+=A(0,S[j][0])+" ";p=(p=(p+=r("Metro-North Railroad",g))+r("Long Island Rail Road",b))+r("Bus",_),document.body.innerHTML+=p,R=O=0}Object.values?y():document.documentElement.firstChild.appendChild(document.createElement("script")).src="f.js"</script>