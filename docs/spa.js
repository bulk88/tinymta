!function(){"use strict";var h,N,E,j,O,x,d=window,m=document.documentElement,A=m.firstChild,S={},u=0,T=location.pathname,g=location.hash,q=location.origin,L=P(T),F={headers:{"accept-version":"3.0"}},z=[,[0,5],,[3,8],[2,7],[0,4],[0,4],[1,6],[,9],[]],a={},D=["//backend-unified.mylirr.org","//otp-mta-prod.camsys-apps.com","//collector-otp-prod.camsys-apps.com",["//tiles1.tinymta.us.to","//tiles2.tinymta.us.to"],"/rstop.htm","/rtrain.htm","/stop.htm","/status.htm","/tileMap.htm",["/bk.png","/zo.png","/zi.png","/ts.gif"]],I=["style","body","html","div",,"link",0],M=d.requestIdleCallback||(d.requestAnimationFrame?function(e){requestAnimationFrame(function(){requestAnimationFrame(e)})}:function(e){return setTimeout(e,40)});function B(){for(var e,t=0;t<I.length;t++)(e=I[t])[1]||(e[1]=e[0].cloneNode(0))}d.fetch||d.f||(f=1,A.appendChild(document.createElement("script")).src="/f.js");for(var e,t,n,o,i={body:document.body,style:A.getElementsByTagName("style")[0],y:d.y},s=[i,i.body,T+g,L],r=0;r<I.length;r++)t=(e=I[r])?document.createElement(e):t.cloneNode(0),I[r]=[t];if(I[6][0].rel="prefetch",(t=I[5][0]).rel="preconnect",t.crossOrigin="anonymous",B(),(n=A.querySelectorAll('link[rel="preconnect"]')).length){if(1<n.length){for(o=I[3][1],r=I[3][1]=0;r<n.length;r++)o.appendChild(n[r]);A.appendChild(o)}else o=n[0];N=D[z[L][0]]=i.pc=o}if((n=A.querySelectorAll('link[rel="prefetch"]')).length){if(1<n.length){for(o=I[4][1],r=I[4][1]=0;r<n.length;r++)o.appendChild(n[r]);A.appendChild(o)}else o=n[0];E=D[z[L][1]]=i.pf=o}function P(e){var t;switch(e){case"/tileMap.htm":t=8;break;case"/stations.htm":t=7;break;case"/mn/stations.htm":t=6;break;case"/li/stations.htm":t=5;break;case"/":t=4;break;case"/stop.htm":t=3;break;case"/status.htm":t=2;break;case"/rstop.htm":t=1;break;case"/rtrain.htm":t=0;break;default:t=9}return t}function l(e){var n,t,o,a,i,s,r,l="touchstart"===e.type;if("A"===(e="FONT"===(e=e.target).nodeName?e.parentNode:e).nodeName&&(l||!e.tmts)&&e.origin===q&&(n=e.hash,(w="/"==(w=e.pathname).charAt(0)?w:"/"+w)!==location.pathname)){if(10<=w.length&&w.lastIndexOf("/jsrdt.htm")===w.length-10&&(e.pathname=w=w.replace("/jsrdt.htm","/js/rt.htm")),(a=P(w))<4&&(n=n.slice(1),window.S={t:Date.now(),s:n,f:function(e){s?e(s):r=e}},fetch(3===a?"//otp-mta-prod.camsys-apps.com/otp/routers/default/nearby?timerange=1800&apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE&stops=MTASBWY:"+n.slice(0,3):2===a?"//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP":1===a?"//backend-unified.mylirr.org/arrivals/"+n:"//backend-unified.mylirr.org/locations/"+n+"?geometry=NONE",1<a?{}:F).then(function(e){var t,n;r?r(e):s=200==e.status?(e.json().then(function(e){t?t(e):n=e}),{status:200,json:function(){return{then:function(e){n?setTimeout(e,0,n):t=e}}}}):e}),2===a)&&(R=0,O=1,A.appendChild(document.createElement("script")).src="routes.js"),8===a&&(t=function(e,t){t?o.pr=t:(window.S=o={t:Date.now(),s:n,pt:a,pr:e.body},e.js(0,n))}),!(i=S[w])||i.p1&&void 0===j){var c,p,h,d,m,f,u,g=w,w=a,v=t,C={},b=T,k=L;try{-1!=g.indexOf("/stations")&&(C.p1=f=1,void 0===j?(onpopstate.o=m=function(e,t){t?A.removeChild(d):j=e||0,d.onerror=0,onpopstate.o=0,u?u():u=1},(d=document.createElement("script")).onerror=function(){m(0,1)},d.src="1p.js",A.appendChild(d)):u=1),(c=z[w])&&(p=c[0],(h=D[p])&&h.length&&(h=G(p,0)),N=J(N,C.pc=h),p=c[1],(h=D[p])&&h.length&&(h=G(p,1)),E=J(E,C.pf=h),M(B)),fetch(g,{},1).then(function(e){e.text().then(function(e){var t,n,o,a,i,s,r;-1!=(t=e.indexOf("<style>"))?(i=e.slice(t+=7,t=e.indexOf("</style>",t)),t+=8,a=0,":root{color-scheme:light dark}"!=i||(a=x)||(s=1),a||(a=I[0][1],I[0][1]=0,M(B),a.textContent=i,s&&(x=a)),C.style=a):t=0,-1!=(n=e.indexOf("<script>",t))&&(i=y,s=window.onpageshow,window.onpageshow=null,o=e.indexOf("<\/script>",n+8),Function(e.slice(n+8,o))(),(r=(a=C.js=onhashchange).body)&&delete a.body,C.y=y,C.pg=window.onpageshow,y=i,window.onpageshow=s,onhashchange=null,v)&&v(C),-1==e.indexOf("No javascript",t)&&(e=-1!=n?e.slice(t,n)+e.slice(o+9):e.slice(t),a=I[2][1],I[2][1]=0,M(B),a.innerHTML=e,C.body=a=a.lastElementChild,v&&v(0,a),r)&&r(a),!f||u?(S[g]=C,Y(b,g,k)):u=function(){S[g]=C,Y(b,g,k)}})})}catch(e){}}else t&&t(i);e.tmts=l}}function Y(s,r,l){a[r]=1,M(function(){var e,t,n,o,a=location.origin.length,i=S[s];if(e=i.pf)if("DIV"===e.nodeName){for(n=e.firstChild;n;){if(o=n.nextElementSibling,n.href.slice(a)==r){e.removeChild(n);break}n=o}e.firstChild||((t=e.parentNode)&&t.removeChild(e),delete i.pf,E===e&&(E=null),D[z[l][1]]=null)}else e.href.slice(a)==r&&((t=e.parentNode)&&t.removeChild(e),delete i.pf,E===e&&(E=null),D[z[l][1]]=null)})}function c(e,t){var n,o;return e&&a[t]?0:((o=(n=I[5+e])[1])?n[1]=0:o=n[0].cloneNode(0),e?".png"!=(n=t.slice(-4))&&".gif"!=n||(o.rel="preload",o.as="image"):t.indexOf("//tiles")||(o.crossOrigin=null),o.href=t,o)}function G(e,t){var n,o,a,i=D[e];if("string"==typeof i)a=c(t,i);else{for(a=I[3+t][1],n=I[3+t][1]=0;n<i.length;n++)(o=c(t,i[n]))&&a.appendChild(o);a.firstChild||(a=0)}return D[e]=a}function J(e,t){return e!==t&&(e&&t?A.replaceChild(t,e):(e&&A.removeChild(e),t&&A.appendChild(t))),t}M(B),(e=window.onpageshow)?i.pg=e:window.onpageshow=function(e,t){i.pg=t,window.onpageshow=t},S[T]=i,h=[s],history.state!==u&&history.replaceState(u,0,location.href),addEventListener("touchstart",l,{passive:!0}),addEventListener("mousedown",l,{passive:!0}),addEventListener("click",function(e){var t,n,o,a,i,s,r,l,c,p=e.target;"A"===(p="FONT"===p.nodeName?p.parentNode:p).nodeName&&p.origin===q&&(10<=(o="/"==(o=p.pathname).charAt(0)?o:"/"+o).length&&o.lastIndexOf("/jsrdt.htm")===o.length-10&&(p.pathname=o=o.replace("/jsrdt.htm","/js/rt.htm")),i=P(o),(t=S[o])?(a=p.hash,r=o===location.pathname&&a!=location.hash,(l=(s=h[u])[0]).p1&&j&&L!==i&&j({},T),2===i&&(O?O=0:(R=0,O=1,A.appendChild(document.createElement("script")).src="routes.js")),r||(m.removeChild(s[1]),J(l.style,t.style),N=J(N,t.pc),E=J(E,t.pf)),s=h[++u]=[],(l=window.S)&&l.pr&&(window.S=0,l.pt===i)&&l.s===a&&Date.now()-l.t<3e3&&(c=l.pr),8!=i&&(n=(n=d.T)&&n.GC)&&n(),h.length=u+1,c?n=c:(n=t.body)||(n=I[1][1],I[1][1]=0,M(B)),s[1]=r?n:m.appendChild(n),history.pushState(u,0,p.href),r||(e.preventDefault(),y=t.y,window.onpageshow=t.pg,(l=t.js)&&!c&&l(),T=o,g=a,8==(L=i)&&t.pf&&(Y(o,"/bk.png",8),Y(o,"/zo.png",8),Y(o,"/zi.png",8),Y(o,"/ts.gif",8))),s[0]=t,s[2]=o+a,s[3]=i):console.log("on click no cache spa ent"))}),onpopstate=function(e){var t,n,o,a,i,s=location.pathname,r=location.hash;null===(e=e.state)?console.log("spa leave 3 "+s):T==s&&g!=r?(g=r,console.log("spa leave 1 "+s)):e===u||e>=h.length?(console.log("spa leave 2 "+s),location.reload()):(n=(t=h[u])[0],a=(o=h[e])[3],i=o[0],n.p1&&j&&L!==a&&j({},T),T=s,g=r,m.removeChild(t[1]),J(n.style,i.style),N=J(N,i.pc),E=J(E,i.pf),u=e,L=a,m.appendChild(o[1]),y=i.y,onpageshow=s=i.pg,s&&s({persisted:1}))}}();