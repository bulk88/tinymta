!function(){var e,t=document.createElement("canvas"),a='(function(e,t){function h(e,t,n){e.innerHTML=t.join(",")+"&nbsp;",--s||((e=e.parentNode).style.minHeight="",localStorage.getItem("fh")!=(n=e.clientHeight)&&localStorage.setItem("fh",n))}function d(e,s){"r"==e.charAt()?(e=e.slice(1),fetch("//backend-unified.mylirr.org/arrivals/"+e,{headers:{"accept-version":"3.0"}}).then(function(e){200==e.status&&e.json().then(function(e){var t,n,a,o,i=[],r=[];for(e=e.arrivals,n=0;n<e.length&&n<4;n++)t=e[n],a=new Date(1e3*(a=t.time)).toLocaleTimeString().replace(/:00 ([PA])M/,"$1")+" "+Math.ceil((a-(new Date).getTime()/1e3)/60)+"m"+((a=(a=t.status.otp)&&a/60|0)?0<a?"-E"+a:"-L"+-a:"")+"-Tk"+(t.track||"?")+"-<font color="+("string"==typeof(a=m[o=t.branch])?a:m[o]=c[0|a])+">"+("HM"==(a=(a=(a=t.stops)[a.length-1]).charAt()<58?a.slice(1):a)?"CH":"NYK"==a?"NYP":a)+"</font>",("E"==t.direction?r:i).push(a);h(s,r.concat(i))})})):(e=e.slice(1,4),fetch("//otp-mta-prod.camsys-apps.com/otp/routers/default/nearby?timerange=1800&apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE&stops=MTASBWY:"+e).then(function(e){200==e.status&&e.json().then(function(e){var t,n,a,o,i,r,c,d=0,l={};if(e=e[0]){for(;a=e.groups[d++];)for(i=a.headsign,n=0;o=a.times[n++];)o.shortRouteName=a.route.shortName,o.timestamp>t&&(t=o.timestamp),(l[i]=l[i]||[]).push(o);for(d in l)l[d].sort(function(e,t){return e.departureFmt<t.departureFmt?-1:e.departureFmt>t.departureFmt?1:0});for(d in t=[],l)for(a=l[d],d=0;(o=a[d++])&&d<4;)t.push(("1"==o.directionId?"S":"N")+(r=o.shortRouteName,c=void 0,"<font color=")+(c="string"!=typeof(c=f[r])?f[r]=p[0|c]:c)+">"+r+"</font>"+function(e,t){for(e=e.split(/[: T-]/),t=0;t<e.length;t++)e[t]=+e[t];return"-"+(0|Math.abs((new Date(e[0],e[1]-1,e[2],e[3]||0,e[4]||0,e[5]||0,0)-new Date)/1e3)/60)}(o.departureFmt))}h(s,t)})}))}function l(e,t,n){n-1?setTimeout(d,0,e,t):((n=this.w)||((n=this.w=function(){for(var e=0;e<n.length;)d(n[e++],n[e++]);this.w=void 0}).arr=[]),(n=n.arr)[n.length]=e,n[n.length]=t)}var s,n,a,o,p=["00933c","ff6319","fccc0a","2850ad","ee352e","6d6e71","b933ad","0078c6","996633"],f={FX:1,D:1,M:1,F:1,B:1,W:2,N:2,R:2,Q:2,E:3,C:3,A:3,2:4,1:4,3:4,H:5,GS:5,FS:5,7:6,"7X":6,SI:7,SIR:7,Z:8,J:8,G:"6cbe45",L:"a7a9ac"},c=["ee0034","006ec7","4d5357"],m={PJ:1,HH:1,CI:2,12:2,HA:"0039a6",BY:"00985f",HU:"009b3a",WH:"00a1de",OB:"00af3f",MK:"00b2a9",11:"60269e",FR:"6e3219",RK:"a626aa",PW:"c60c30",HM:"ce8e00",LB:"ff6319"},u=document.createElement("label"),g=u.appendChild(document.createElement("input"));g.type="checkbox",g=u.cloneNode(1),e[3]?((n=document.createElement("img")).src="ht.png",(a=n.style).height=a.width="1em",a.verticalAlign="middle",(a=n.cloneNode(0)).src="hg.svg",(o=n.cloneNode(0)).src="dp.png"):(n=document.createTextNode("❤"),a=document.createTextNode("⌛ "),o=0),u.appendChild(n),g.appendChild(a),window.E=o,function e(t,n,a){var o,i,r,c=document.createElement("div");c.appendChild(u).firstChild.checked=t[1];c.appendChild(g).firstChild.checked=t[1]&&t[2];o=t[1]?4==t.length?"No history yet":0:"History off";if(o)c.appendChild(document.createTextNode(o));else for(t[2]&&(s=t.length-4,o=localStorage.getItem("fh"))&&(c.style.minHeight=o+"px"),r=4;r<10&&(o=t[r]);r++)(i=c.appendChild(document.createElement("a"))).href=("r"==o[1].charAt()?"rstop.htm#":"stop.htm#")+o[1].slice(1),i.appendChild(document.createTextNode(o[0])),c.appendChild(document.createTextNode(" ")),t[2]&&((i=c.appendChild(document.createElement("span"))).style.display="inline",(a?l:d)(o[1],i,a));window.favDiv=c;c.draw_fav=e;if(n)n(c);else{if(o=document.body,i=localStorage.getItem("as"))for(r=o.lastChild;r=r.previousSibling;)if("DIV"===r.nodeName){r.style.minHeight=i+"px";break}o.appendChild(c)}}(e,t,this.fetch?0:1)})(';try{(t=t.getContext("2d")).canvas.width=t.canvas.height=1,t.fillText("💧",-4,4),e=t.getImageData(0,0,1,1).data[2]}catch(e){}e=0|!e,localStorage.setItem("fav",a+"[62,1,0,"+e+"])"),this.F(a,[1,[62,1,0,e]])}();