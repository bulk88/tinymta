"use strict";let e,t=new TextEncoder;const a=new Int8Array([-119,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,0,70,0,0,0,76,8,6,0,0,0,-48,-75,-63,-30,0,0,1,104,73,68,65,84,120,1,-19,-37,65,110,-124,48,12,-123,97,106,-27,72,62,-109,15,-27,51,-7,78,109,119,44,80,71,93,-64,31,61,-12,-98,-60,122,-62,-121,-47,56,9,-7,-6,-2,-51,-31,92,18,38,48,-116,97,12,99,24,-61,24,-58,48,-94,89,7,-99,-50,-29,-33,-87,-39,6,115,-19,124,121,12,28,10,-128,1,48,120,-96,19,-122,7,-31,-127,120,24,30,4,1,10,30,-123,127,109,-7,-118,-31,81,-80,-22,9,73,20,96,76,33,-119,2,-116,45,-8,31,-42,-64,9,30,69,3,39,48,20,-79,-60,-21,81,58,-31,-65,107,53,-88,26,-127,-50,87,0,39,30,31,72,-115,-41,99,62,2,-119,85,-40,2,49,-10,-93,117,94,126,-113,-121,17,-81,-80,-72,-15,102,88,-84,-102,-13,2,96,-34,-97,78,-61,104,87,76,-89,-48,10,30,-113,115,94,68,-13,-40,-71,9,-90,-26,-2,-101,-24,68,119,9,-30,112,-128,21,-68,-102,-19,-13,40,87,-52,-11,-11,50,12,81,-115,113,56,16,76,13,-14,68,121,24,-3,-59,38,111,-72,121,18,-23,87,9,94,28,-29,97,-12,-77,4,43,2,-103,59,-59,-93,13,86,-89,-20,7,-113,127,84,-116,59,-32,-27,-10,95,5,-90,83,127,39,82,-79,49,-28,55,-11,107,94,-11,109,-34,18,-86,4,-66,98,-128,-101,-105,-101,120,-122,81,-18,-128,-87,81,68,1,96,20,113,48,24,21,-100,26,26,70,0,-89,-58,103,9,-98,122,88,-63,15,-122,65,1,96,4,112,106,68,-114,-2,117,-6,-124,-101,-49,68,106,124,28,4,-64,0,88,62,119,-19,125,37,-61,24,-58,48,-114,97,12,99,24,-61,-20,-122,113,126,0,35,123,-80,-59,19,19,36,-10,0,0,0,0,73,69,78,68,-82,66,96,-126]);var r={"0AR":"Ardsley-on-Hudson","0BC":"Beacon","0BK":"Breakneck Ridge","0CS":"Cold Spring","0CT":"Cortlandt","0DF":"Dobbs Ferry","0DV":"Spuyten Duyvil","0GA":"Garrison","0GD":"Glenwood","0GY":"Greystone","0HB":"Highbridge-Employees","0HL":"Harlem-125 St","0HM":"Croton-Harmon","0HS":"Hastings-on-Hudson","0IV":"Irvington","0LU":"Ludlow","0MB":"Marble Hill","0MH":"Morris Heights","0MN":"Manitou","0NM":"New Hamburg","0NY":"Grand Central","0OS":"Ossining","0PE":"Peekskill","0PM":"Philipse Manor","0PO":"Poughkeepsie","0RV":"Riverdale","0SB":"Scarborough","0TT":"Tarrytown","0UH":"University Heights","0YK":"Yonkers","0YS":"Yankees-E 153 St","1AT":"Appalachian Trail","1BG":"Botanical Garden","1BH":"Bedford Hills","1BR":"Southeast","1BW":"Brewster","1BX":"Bronxville","1CF":"Croton Falls","1CQ":"Chappaqua","1CW":"Crestwood","1DO":"Dover Plains","1FO":"Fordham","1FW":"Fleetwood","1GO":"Goldens Bridge","1HA":"Hartsdale","1HN":"Hawthorne","1KA":"Katonah","1MK":"Mt Kisco","1ML":"Melrose","1MP":"Mt Pleasant","1MW":"Mt Vernon West","1NW":"North White Plains","1PA":"Patterson","1PV":"Pleasantville","1PW":"Pawling","1PY":"Purdy's","1SC":"Scarsdale","1TK":"Tuckahoe","1TM":"Tenmile River","1TR":"Tremont","1VA":"Valhalla","1WA":"Wassaic","1WF":"Wakefield","1WG":"Williams Bridge","1WI":"Harlem Valley-Wingdale","1WN":"Woodlawn","1WP":"White Plains","2BP":"Bridgeport","2CC":"Cos Cob","2DA":"Darien","2EN":"East Norwalk","2FF":"Fairfield","2FM":"Fairfield Metro","2GF":"Green's Farms","2GN":"Greenwich","2HS":"Harrison","2LA":"Larchmont","2MA":"Mamaroneck","2ME":"Mt Vernon East","2MI":"Milford","2NH":"New Haven","2NO":"Noroton Heights","2NR":"New Rochelle","2OG":"Old Greenwich","2PC":"Port Chester","2PH":"Pelham","2RO":"Rowayton","2RS":"Riverside","2RY":"Rye","2SM":"Stamford","2SN":"South Norwalk","2SP":"Southport","2SR":"Stratford","2SS":"New Haven-State St","2WH":"West Haven","2WP":"Westport","3GB":"Glenbrook","3NC":"New Canaan","3SD":"Springdale","3TH":"Talmadge Hill","4BE":"Bethel","4BV":"Branchville","4CA":"Cannondale","4DN":"Danbury","4M7":"Merritt 7","4RD":"Redding","4WI":"Wilton","5AN":"Ansonia","5BF":"Beacon Falls","5DB":"Derby-Shelton","5NG":"Naugatuck","5SY":"Seymour","5WB":"Waterbury",ABT:"Albertson",ADL:"Auburndale",AGT:"Amagansett",ATL:"Atlantic Terminal",AVL:"Amityville",BDY:"Broadway",BHN:"Bridgehampton",BK:"Stony Brook",BMR:"Bellmore",BOL:"Bolands-Employees",BPG:"Bethpage",BPT:"Bellport",BRS:"Bellerose",BRT:"Belmont Park",BSD:"Bayside",BSR:"Bay Shore",BTA:"Babylon",BWD:"Brentwood",BWN:"Baldwin",CAV:"Centre Av",CHT:"Cedarhurst",CI:"Central Islip",CLP:"Country Life Press",CPG:"Copiague",CPL:"Carle Place",CSH:"Cold Spring Harbor",DGL:"Douglaston",DPK:"Deer Park",EHN:"East Hampton",EMT:"Elmont-UBS Arena",ENY:"East New York",ERY:"East Rockaway",EWN:"East Williston",FHL:"Forest Hills",FLS:"Flushing Main Street",FMD:"Farmingdale",FPK:"Floral Park",FPT:"Freeport",FRY:"Far Rockaway",GBN:"Gibson",GCT:"Grand Central",GCV:"Glen Cove",GCY:"Garden City",GHD:"Glen Head",GNK:"Great Neck",GPT:"Greenport",GRV:"Great River",GST:"Glen Street",GVL:"Greenvale",GWN:"Greenlawn",HBY:"Hampton Bays",HEM:"Hempstead",HGN:"Hempstead Gardens",HIL:"Hillside-Employees",HOL:"Hollis",HPA:"Hunterspoint Av",HUN:"Huntington",HVL:"Hicksville",HWT:"Hewlett",IPK:"Island Park",ISP:"Islip",IWD:"Inwood",JAM:"Jamaica",KGN:"Kew Gardens",KPK:"Kings Park",LBH:"Long Beach",LCE:"Lawrence",LHT:"Lindenhurst",LIC:"Long Island City",LMR:"Locust Manor",LNK:"Little Neck",LTN:"Laurelton",LVL:"Locust Valley",LVW:"Lakeview",LYN:"Lynbrook",MAK:"Mattituck",MAV:"Merillon Av",MFD:"Medford",MHL:"Murray Hill",MHT:"Manhasset",MIN:"Mineola",MPK:"Massapequa Park",MQA:"Massapequa",MRK:"Merrick",MSY:"Mastic-Shirley",MTK:"Montauk",MVN:"Malverne",NAV:"Nostrand Av",NBD:"Nassau Blvd",NHP:"New Hyde Park",NPT:"Northport",NYK:"Penn Station",OBY:"Oyster Bay",ODE:"Oceanside",ODL:"Oakdale",PDM:"Plandome",PGE:"Patchogue",PJN:"Port Jefferson",PLN:"Pinelawn",PWS:"Port Washington",QVG:"Queens Village",RHD:"Riverhead",RON:"Ronkonkoma",ROS:"Rosedale",RSN:"Roslyn",RVC:"Rockville Centre",SAB:"St. Albans",SCF:"Sea Cliff",SFD:"Seaford",SHD:"Southold",SHN:"Southampton",SJM:"St. James",SMR:"Stewart Manor",SPK:"Speonk",SSM:"Mets-Willets Point",STN:"Smithtown",SVL:"Sayville",SYT:"Syosset",VSM:"Valley Stream",WBY:"Westbury",WDD:"Woodside",WGH:"Wantagh",WHD:"West Hempstead",WHN:"Westhampton",WMR:"Woodmere",WWD:"Westwood",WYD:"Wyandanch",YPK:"Yaphank",_GC:"Grand Central"};function n(e,t){return new Response("document.body.appendChild(document.createTextNode("+JSON.stringify(e)+"))",{headers:{"content-type":"text/javascript","cache-control":"no-cache, no-transform",...t}})}function o(e,t){var a={4:"00933c",5:"00933c","5X":"00933c",6:"00933c","6X":"00a65c",A:"2850ad",C:"2850ad",E:"2850ad",G:"6cbe45",GS:"6d6e71",J:"996633",Z:"996633",L:"a7a9ac",7:"b933ad","7X":"b933ad",1:"ee352e",2:"ee352e",3:"ee352e",N:"fccc0a",Q:"fccc0a",R:"fccc0a",W:"fccc0a",B:"ff6319",D:"ff6319",F:"ff6319",FX:"ff6319",M:"ff6319"}[t||e];return a?"<font color="+a+">"+e+"</font>":e}function s(e){return"string"==typeof e&&0===(e=e.replace(/(<p style="min-height:10px"><\/p>|<p><\/p>)+$/g,"")).indexOf("<p>")&&-1!==e.indexOf("</p>",e.length-4)?e.slice(3,-4):e}function i(e,t){for(t in e=e.split(/[: T-]/))e[t]=parseFloat(e[t]);return"Min "+Math.floor(Math.abs((new Date(e[0],e[1]-1,e[2],e[3]||0,e[4]||0,e[5]||0,0)-new Date((new Date).toLocaleString("en-US",{timeZone:"America/New_York"})))/1e3)/60)}async function B(t,B){var E,l=new URL(t.url),A=l.pathname;if("/favicon.ico"===A)return new Response(a,{headers:{"cache-control":"max-age=691200,no-transform","content-type":"image/vnd.microsoft.icon","x-v8st":e}});if(A.startsWith("/api/")){var M=A.substr(5,3);return E="rts"===M?new Promise((e=>{e(new Response(C,{headers:{"content-type":"application/json"}}))})):fetch(("su/"===M?"http://otp-mta-prod.camsys-apps.com/otp/routers/default/nearby?timerange=1800&apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE&stops=MTASBWY:":"alt"===M?"http://collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP":"http://backend-unified.mylirr.org/arrivals/")+A.substring(8),{headers:{"accept-version":"3.0"}}),A="/**/ typeof "+(A=(l.searchParams.get("callback")||"_xcallback").replace(/[^\[\]\w$.]/g,""))+" === 'function' && "+A+"({http_code:",E=await E,"rts"===M&&B.waitUntil(c(B)),M=E.headers.get("content-type"),A+=E.status+",content_type:'"+M+"',contents:",E=await E.text(),new Response(A+(M.startsWith("application/json")?E.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):JSON.stringify(E))+"});",{headers:{"content-type":"text/javascript","cache-control":"no-cache","x-content-type-options":"nosniff"}})}if(A.startsWith("/s/")){if(A=A.substr("/s/".length,3),/^\w+$/.test(A)){var u="http://otp-mta-prod.camsys-apps.com/otp/routers/default/nearby?timerange=1800&apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE&stops=MTASBWY:"+A;E=fetch(u);var h="<meta content=0 name=mobileoptimized>[1][<a accesskey=1 href="+A+">Refresh</a>] <a href="+u+">Raw</a><br>",d=[2,3,4,5,6,7,8,9,0];if(200==(E=await E).status){E=E.json();var Q,f,p=0,m={};if((D=E=await E).length){for(y in(D=D[0]).alerts,D.groups)for(y in u=(Q=D.groups[y]).headsign.replace("Downtown & Brooklyn","Downtown & Bklyn"),Q.times)(f=Q.times[y]).shortRouteName=Q.route.shortName,f.timestamp>p&&(p=f.timestamp),(m[u]=m[u]||[]).push(f);for(y in m)m[y].sort((function(e,t){return e.departureFmt<t.departureFmt?-1:e.departureFmt>t.departureFmt?1:0}));for(y in h+=new Date(1e3*p).toLocaleTimeString("en-US",{timeZone:"America/New_York"})+" via CFW<br>CurSta:"+D.stop.name+"<br>",m)for(y in h+="<a accesskey="+(p=d.shift())+" name="+p+" href=#"+p+">"+y+"</a><br>",Q=m[y])h+=i((f=Q[y]).departureFmt)+"-"+o(f.shortRouteName)+"-"+f.tripHeadsign+(void 0===f.track?"-Tk?":"")+(f.realtime?"-":"-NRT-")+function(e){switch(e){case"SCHEDULED":return"SCH";case"UPDATED":return"UPD";case"CANCELED":return"CNX";case"ADDED":return"ADD";case"MODIFIED":return"MOD";default:return"UNK"}}(f.realtimeState)+((f=((f=f.departureDelay)<-43200?f+86400:f)/60|0)?(f>0?"-L":"-E")+Math.abs(f):"")+"<br>";for(h+="<br>Key: E2 (early 2 min) L3 (late 3 min)<br>NRT (not realtime)<br><br>",m="",(D=D.alerts||[]).sort((function(e,t){return e.effectiveStartDate<t.effectiveStartDate?-1:e.effectiveStartDate>t.effectiveStartDate?1:0})),y=0;y<D.length&&y<10;y++)(f=D[y]).alertType&&(Q=(void 0===(p=d.shift())?f.alertType:"<a accesskey="+p+" href=#"+p+" name="+p+">"+f.alertType+"</a>")+"<br>"+(f.humanReadableActivePeriod||"Ongoing")+"<br>"+f.alertHeaderText.replace(/\[(\w+)\]/g,o)+(f.alertDescriptionText?"<br>"+f.alertDescriptionText.replace(/\[(\w+)\]/g,o):"")+"<br><br>",f.humanReadableActivePeriod?m+=Q:h+=Q);h+=m}else h="station not found";return new Response(h,{headers:{"content-type":"text/html; charset=utf-8","cache-control":"no-cache, no-store"}})}return E}}else if(A.startsWith("/li/s/")){if(A=A.substr("/li/s/".length,3),/^\w+$/.test(A)){u="http://backend-unified.mylirr.org/arrivals/"+A;E=fetch(u,{headers:{"accept-version":"3.0"}});h="<meta content=0 name=mobileoptimized>[1][<a accesskey=1 href="+A+">Refresh</a>] <a href="+u+">Raw</a><br>"+(new Date).toLocaleTimeString("en-US",{timeZone:"America/New_York"})+" via CFW<br>CurSta:"+r[A]+"<br><a accesskey=2 name=2 href=#2>East</a><br>";var g="<a accesskey=3 name=3 href=#3>West</a><br>";if(200==(E=await E).status){var y,F,w,D=await E.json();for(y=0;y<D.arrivals.length;y++)F=D.arrivals[y],w=new Date(1e3*(w=F.time)).toLocaleTimeString("en-US",{timeZone:"America/New_York"}).replace(":00 "," ")+"-Min "+Math.ceil((w-new Date((new Date).toLocaleString())/1e3)/60)+((w=F.status.otp)&&(w=w/60|0)?w>0?"-E"+w:"-L"+-w:"")+"-Tk"+(F.track||"?")+"-<font color="+{HA:"0039a6",HH:"006ec7",PJ:"006ec7",BY:"00985f",HU:"009b3a",WH:"00a1de",OB:"00af3f",MK:"00b2a9",12:"4d5357",CI:"4d5357",11:"60269e",FR:"6e3219",RK:"a626aa",PW:"c60c30",HM:"ce8e00",DN:"ee0034",NC:"ee0034",NH:"ee0034",WB:"ee0034",LB:"ff6319"}[F.branch]+">"+r[(w=F.stops)[w.length-1]]+"</font>"+("O"==F.peak_code?"":"-Pk")+"<br>","E"==F.direction?h+=w:g+=w;for(y in h+=g,g="<br>",D.banners)g+=(y=D.banners[y]).title+"<br>"+y.text+"<br><br>";for(y in(D=D.alerts).sort((function(e,t){return e.start_time<t.start_time?-1:e.start_time>t.start_time?1:0})),D)g+=(y=D[y]).status+"<br>"+s(y.header)+"<br>"+(y.human_duration?y.human_duration+"<br>":"")+s(y.text)+"<br><br>";return h+=g,new Response(h,{headers:{"content-type":"text/html; charset=utf-8","cache-control":"no-cache, no-store"}})}return E}}else if("/routes.js"===A){var b=t.headers.get("if-none-match");return B.respondWith(new Response(b===S?"":C,{status:b===S?304:200,headers:{"content-type":"text/javascript",etag:S,"cache-control":"max-age=10, stale-while-revalidate=86400","access-control-allow-origin":"*"}})),B.waitUntil(c(B)),null}var N=t?.cf||{asn:676},H=t?.headers?.get("cf-connecting-ip")||"0.0.0.0",x='W/"'+H+"."+N.asn+'"';if(t?.headers?.get("if-none-match")==x)return new Response(null,{status:304});var P="AS"+N.asn;P=String.fromCharCode(P.length)+P+"asncymrucom\0\0\0",E=fetch("https://"+(t?.cf?"1.1.1.1":"cloudflare-dns.com")+"/dns-query",{method:"post",body:"\0\0\0\0\0\0\0\0\0"+P,headers:{"content-type":"application/dns-message"}});var I=(P=(new TextEncoder).encode(P)).byteLength-4;E=await E;var v=await E.arrayBuffer(),W=new DataView(v);if(33152==(33664&W.getUint16(2))&&65537==W.getUint32(4)&&0==W.getUint32(8)){let e,t,a;for(t=1,e=0;e<P.byteLength;e++)if(P[e]!==W.getUint8(e+12)){t=0;break}if(t){let r;for(e+=12,192==(192&W.getUint8(e))?(r=-49153&W.getUint16(e),a=e+2):(r=e,a=e+I),t=1,e=0;e<I;e++)if(P[e]!==W.getUint8(e+r)){t=0;break}if(t&&1048577==W.getUint32(a)&&(a+=8,W.getUint16(a)+(a+=2)==W.byteLength&&W.getUint8(a)+(a+=1)==W.byteLength))return n("Your ISP: "+H+" | AS"+(new TextDecoder).decode(new Uint8Array(W.buffer,a)),{etag:x})}}return n("ERROR: raw data: "+(new TextDecoder).decode(new Uint8Array(v)),{})}async function c(e){var a,r,n,o,s,i,B,c,l=0;if(o=fetch("http://otp-mta-prod.camsys-apps.com/otp/routers/default/index/routes?apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE"),200===(o=await o).status){for(o=o.json(),o=await o;l<o.length;l++)null===(r=o[l]).longName&&delete r.longName,null===r.shortName&&delete r.shortName,null===r.color&&delete r.color;if(o=E.buildServiceRoutes(o),o=(o=JSON.stringify(o)).replace(/null/g,""),n=await crypto.subtle.digest("MD5",t.encode(o)),n='W/"'+btoa(String.fromCharCode.apply(null,new Uint8Array(n)))+'"',S!==n){try{a=GHAPISECRET}catch(r){(a=url.searchParams.get("key"))||console.log("GHAPI key is invalid="+a),a="Basic "+a}if(S=n,C=o,o=fetch("https://raw.githubusercontent.com/bulk88/tinymta/master/cloudflare_as_name.js",{cf:{cacheTtlByStatus:-1}}),s=fetch("https://raw.githubusercontent.com/bulk88/tinymta/master/cloudflare_as_name.min.js",{cf:{cacheTtlByStatus:-1}}),o=await o,s=await s,console.log("got old gh script"),200==o.status&&200==s.status){o=await o.text(),s=await s.text(),B=C.replace(/\x27/g,"\\'"),(c=o.replace(/let (\w+)='[^']*',(\w+)='[^']*';$/,"let $1='"+n+"',$2='"+B+"';"))==o&&console.log("failed to patch full size cfw src"),(i=s.replace(/let (\w+)=(?:'[^']*'|"[^"]*"),(\w+)=(?:'[^']*'|"[^"]*");$/,"let $1='"+n+"',$2='"+B+"';"))==s&&console.log("failed to patch mini cfw src");async function u(e,t){return Q("GET",e,t)}async function h(e,t){return Q("POST",e,t)}async function d(e,t){return Q("PATCH",e,t)}async function Q(e,t,r){var n=await fetch("https://api.github.com/"+t,{method:e,headers:{authorization:a,"user-agent":"tinymta_cfw"},...r&&{body:JSON.stringify(r)}});return n.status>=300?(console.log("failed status="+n.status+" ct="+n.headers.get("content-type")+" url="+t),n=await n.text(),console.log(n),n):await n.json()}var A={repository:"bulk88/tinymta"};let f={};var M={gitAuthor:{name:"RoutesBot",email:"bulk88@hotmail.com"}};async function p(e,t,a){let r;var n,o,s,i;M.gitAuthor&&(r={name:M.gitAuthor.name,email:M.gitAuthor.email,date:(n=new Date,o=-n.getTimezoneOffset(),s=o>=0?"+":"-",i=function(e){return(e<10?"0":"")+e},n.getFullYear()+"-"+i(n.getMonth()+1)+"-"+i(n.getDate())+"T"+i(n.getHours())+":"+i(n.getMinutes())+":"+i(n.getSeconds())+s+i(Math.floor(Math.abs(o)/60))+":"+i(Math.abs(o)%60))});const B={message:a,parents:[e],tree:t};return r&&(B.author=r),(await h(`repos/${A.repository}/git/commits`,B)).sha}async function m(e,t){const a={sha:t,force:!0};try{await d(`repos/${A.repository}/git/refs/heads/${e}`,a)}catch(e){if(422===e.statusCode)throw console.log(e+" Branch no longer exists - exiting"),new Error("repository-changed");throw e}}async function g(e){try{return(await u(`repos/${A.repository}/git/refs/heads/${e}`)).object.sha}catch(e){if(404===e.statusCode)throw new Error("repository-changed");if(409===e.statusCode)throw new Error("empty");throw e}}async function y(e){return(await u(`repos/${A.repository}/git/commits/${e}`)).tree.sha}async function F(e){const t={encoding:"base64",content:btoa(e)};return(await h(`repos/${A.repository}/git/blobs`,t)).sha}async function w(e,t){const a={base_tree:e,tree:[]};return t.forEach((e=>{a.tree.push({path:e.name,mode:"100644",type:"blob",sha:e.blob})})),(await h(`repos/${A.repository}/git/trees`,a)).sha}async function D(e,t,a,r=A.baseBranch){try{delete f[e];const o=[];for(const e of t){const t=F(e.contents);o.push({name:e.name,blob:t})}const s=await g(r),i=await y(s);for(var n=0;n<o.length;n++)o[n].blob=await o[n].blob;const B=await w(i,o),c=await p(s,B,a);return await m(e,c),"updated"}catch(e){if(404===e.statusCode)throw new Error("repository-changed");throw e}}console.log("will push commit"),e.waitUntil(D("master",[{name:"cloudflare_as_name.js",contents:c},{name:"cloudflare_as_name.min.js",contents:i}],"Routes Upd "+(new Date).toLocaleString("en-US",{timeZone:"America/New_York"}),"master"))}}return!0}}addEventListener("fetch",(t=>{e||(e=Date.now()),console.log("v8start "+e);try{t.respondWith(B(t.request,t).catch((e=>console.log("c"+e))))}catch(e){console.log(e+" "+e.stack+" "+e.columnNumber+e.fileName+e.lineNumber)}}));var E={};function l(e){for(var t,a,r,n=[],o=0;o<e.length;o++)if("SUBWAY"===(t=e[o]).mode&&!t.id.indexOf("MTA")){if(a=!1,"X"===(r=t.shortName).substr(r.length-1,r.length)){var s=r.substr(0,r.indexOf("X"));a=n.find((function(e){return"object"==typeof e&&e[1]==s}))}a||((r=t.id.split(":").pop())==""+ +r&&(r=+r),(a=[r,r,t.color])[4]=t.sortOrder,n.push(a))}return n}function A(e){var t=e.filter((function(e){return"BUS"===e.mode&&!!~e.id.indexOf("MTA")&&"MTA NYCT - Subway"!=e.agencyName})).map((function(e){var t=[e.id.split(":").pop(),e.shortName];return e.color&&(t[2]=e.color),"MTA New York City Transit"!==e.agencyName&&(t[3]=1),t}));return t.sort((function(e,t){return e[1]<t[1]?-1:1})).forEach((function(e){var t=e[1],a=+t;t==""+a&&(e[1]=a)})),t}function M(e){var t=e.filter((function(e){return"RAIL"===e.mode&&!(e.id.indexOf("LI")&&e.id.indexOf("MNR"))})).map((function(e){var t=e.id.split(":").pop();return t==""+ +t&&(t=+t),t=[t,e.longName,e.color],~e.id.indexOf("LI")||(t[3]=1),t}));t.push(["Wassaic","Wassaic","0039A6",1]),t.sort((function(e,t){return e[1]<t[1]?-1:1}));for(var a,r,n=[],o=[],s=0;s<t.length;s++)(e=t[s])[3]&&3==e[0]&&(a=s),e[3]&&2==e[0]&&(r=s),e[3]&&e[0]>=4&&e[0]<=6&&(n.push(e),t.splice(s,1),s--),~e[1].indexOf("Wassaic")&&(o.push(e),t.splice(s,1),s--);return(t=t.slice(0,a+1).concat(n).concat(t.slice(a+1))).slice(0,r+1).concat(o).concat(t.slice(r+1))}E.buildServiceRoutes=function(e){return[A(e),M(e),l(e)]};let S='W/"ucD9MwBj5esijwJbCWRCNQ=="',C='[[["B1","B1","00AEEF"],["B100","B100","B933AD",1],["B103","B103","FAA61A",1],["B11","B11","006CB7"],["B12","B12","6CBE45"],["B13","B13","FAA61A"],["B14","B14","00AEEF"],["B15","B15","B933AD"],["B16","B16","FAA61A"],["B17","B17","B933AD"],["B2","B2","006CB7"],["B20","B20","6CBE45"],["B24","B24","FAA61A"],["B25","B25","6CBE45"],["B26","B26","006CB7"],["B3","B3","EE352E"],["B31","B31","FAA61A"],["B32","B32","006CB7"],["B35","B35","EE352E"],["B36","B36","FAA61A"],["B37","B37","B933AD"],["B38","B38","00AEEF"],["B39","B39","00AEEF"],["B4","B4","6CBE45"],["B41","B41","006CB7"],["B42","B42","006CB7"],["B43","B43","EE352E"],["B44","B44","B933AD"],["B44+","B44-SBS","B933AD"],["B45","B45","EE352E"],["B46","B46","6CBE45"],["B46+","B46-SBS","6CBE45"],["B47","B47","FAA61A"],["B48","B48","6CBE45"],["B49","B49","EE352E"],["B52","B52","EE352E"],["B54","B54","6CBE45"],["B57","B57","EE352E"],["B6","B6","EE352E"],["B60","B60","B933AD"],["B61","B61","6CBE45"],["B62","B62","00AEEF"],["B63","B63","006CB7"],["B64","B64","6CBE45"],["B65","B65","00AEEF"],["B67","B67","EE352E"],["B68","B68","EE352E"],["B69","B69","006CB7"],["B7","B7","EE352E"],["B70","B70","B933AD"],["B74","B74","EE352E"],["B8","B8","FAA61A"],["B82","B82","6CBE45"],["B82+","B82-SBS","6CBE45"],["B83","B83","EE352E"],["B84","B84","006CB7"],["B9","B9","EE352E"],["BM1","BM1","00933C",1],["BM2","BM2","00933C",1],["BM3","BM3","00933C",1],["BM4","BM4","00933C",1],["BM5","BM5","00933C",1],["BX1","Bx1","00AEEF"],["BX10","Bx10","006CB7"],["BX11","Bx11","FAA61A"],["BX12","Bx12","006CB7"],["BX12+","Bx12-SBS","006CB7"],["BX13","Bx13","006CB7"],["BX15","Bx15","FAA61A"],["BX16","Bx16","00AEEF"],["BX17","Bx17","006CB7"],["BX18A","Bx18A","6CBE45"],["BX18B","Bx18B","6CBE45"],["BX19","Bx19","B933AD"],["BX2","Bx2","FAA61A"],["BX20","Bx20","00AEEF"],["BX21","Bx21","6CBE45"],["BX22","Bx22","EE352E"],["BX23","Bx23","B933AD",1],["BX24","Bx24","6CBE45"],["BX25","Bx25","FAA61A"],["BX26","Bx26","FAA61A"],["BX27","Bx27","00AEEF"],["BX28","Bx28","00AEEF"],["BX29","Bx29","00AEEF"],["BX3","Bx3","EE352E"],["BX30","Bx30","EE352E"],["BX31","Bx31","EE352E"],["BX32","Bx32","6CBE45"],["BX33","Bx33","6CBE45"],["BX34","Bx34","B933AD"],["BX35","Bx35","00AEEF"],["BX36","Bx36","B933AD"],["BX38","Bx38","FAA61A"],["BX39","Bx39","FAA61A"],["BX4","Bx4","FAA61A"],["BX40","Bx40","006CB7"],["BX41","Bx41","EE352E"],["BX41+","Bx41-SBS","EE352E"],["BX42","Bx42","EE352E"],["BX46","Bx46","EE352E"],["BX4A","Bx4A","FAA61A"],["BX5","Bx5","EE352E"],["BX6","Bx6","EE352E"],["BX6+","Bx6-SBS","EE352E"],["BX7","Bx7","EE352E"],["BX8","Bx8","FAA61A"],["BX9","Bx9","FAA61A"],["BXM1","BxM1","00933C",1],["BXM10","BxM10","00933C",1],["BXM11","BxM11","00933C",1],["BXM18","BxM18","00933C",1],["BXM2","BxM2","00933C",1],["BXM3","BxM3","00933C",1],["BXM4","BxM4","00933C",1],["BXM6","BxM6","00933C",1],["BXM7","BxM7","00933C",1],["BXM8","BxM8","00933C",1],["BXM9","BxM9","00933C",1],["M1","M1","EE352E"],["M10","M10","006CB7"],["M100","M100","00AEEF"],["M101","M101","FAA61A"],["M102","M102","FAA61A"],["M103","M103","B933AD"],["M104","M104","B933AD"],["M106","M106","6CBE45"],["M11","M11","FAA61A"],["M116","M116","6CBE45"],["M12","M12","006CB7"],["M125","M125","B933AD"],["M14A+","M14A-SBS","6CBE45"],["M14D+","M14D-SBS","6CBE45"],["M15","M15","006CB7"],["M15+","M15-SBS","006CB7"],["M2","M2","B933AD"],["M20","M20","EE352E"],["M21","M21","FAA61A"],["M22","M22","00AEEF"],["M23+","M23-SBS","B933AD"],["M3","M3","B933AD"],["M31","M31","B933AD"],["M34+","M34-SBS","006CB7"],["M34A+","M34A-SBS","006CB7"],["M35","M35","FAA61A"],["M4","M4","00AEEF"],["M42","M42","EE352E"],["M5","M5","EE352E"],["M50","M50","6CBE45"],["M55","M55","6CBE45"],["M57","M57","00AEEF"],["M60+","M60-SBS","EE352E"],["M66","M66","FAA61A"],["M7","M7","00AEEF"],["M72","M72","6CBE45"],["M79+","M79-SBS","EE352E"],["M8","M8","00AEEF"],["M86+","M86-SBS","FAA61A"],["M9","M9","B933AD"],["M96","M96","6CBE45"],["M98","M98","EE352E"],["Q1","Q1","FAA61A"],["Q10","Q10","FAA61A",1],["Q100","Q100","FAA61A",1],["Q101","Q101","6CBE45",1],["Q102","Q102","006CB7",1],["Q103","Q103","EE352E",1],["Q104","Q104","B933AD",1],["Q11","Q11","6CBE45",1],["Q110","Q110","006CB7",1],["Q111","Q111","EE352E",1],["Q112","Q112","EE352E",1],["Q113","Q113","EE352E",1],["Q114","Q114","FAA61A",1],["Q12","Q12","EE352E"],["Q13","Q13","EE352E"],["Q15","Q15","FAA61A"],["Q15A","Q15A","FAA61A"],["Q16","Q16","EE352E"],["Q17","Q17","EE352E"],["Q18","Q18","00AEEF",1],["Q19","Q19","00AEEF",1],["Q2","Q2","6CBE45"],["Q20A","Q20A","006CB7"],["Q20B","Q20B","006CB7"],["Q21","Q21","006CB7",1],["Q22","Q22","EE352E",1],["Q23","Q23","FAA61A",1],["Q24","Q24","00AEEF"],["Q25","Q25","00AEEF",1],["Q26","Q26","6CBE45"],["Q27","Q27","EE352E"],["Q28","Q28","EE352E"],["Q29","Q29","00AEEF",1],["Q3","Q3","00AEEF"],["Q30","Q30","FAA61A"],["Q31","Q31","FAA61A"],["Q32","Q32","00AEEF"],["Q33","Q33","EE352E",1],["Q34","Q34","FAA61A",1],["Q35","Q35","006CB7",1],["Q36","Q36","FAA61A"],["Q37","Q37","00AEEF",1],["Q38","Q38","EE352E",1],["Q39","Q39","B933AD",1],["Q4","Q4","EE352E"],["Q40","Q40","6CBE45",1],["Q41","Q41","B933AD",1],["Q42","Q42","00AEEF"],["Q43","Q43","EE352E"],["Q44+","Q44-SBS","EE352E"],["Q46","Q46","EE352E"],["Q47","Q47","6CBE45",1],["Q48","Q48","006CB7"],["Q49","Q49","006CB7",1],["Q5","Q5","EE352E"],["Q50","Q50","FAA61A",1],["Q52+","Q52-SBS","FAA61A",1],["Q53+","Q53-SBS","FAA61A",1],["Q54","Q54","B933AD"],["Q55","Q55","EE352E"],["Q56","Q56","B933AD"],["Q58","Q58","6CBE45"],["Q59","Q59","FAA61A"],["Q06","Q6","B933AD",1],["Q60","Q60","EE352E",1],["Q64","Q64","EE352E",1],["Q65","Q65","00AEEF",1],["Q66","Q66","EE352E",1],["Q67","Q67","FAA61A",1],["Q69","Q69","00AEEF",1],["Q07","Q7","6CBE45",1],["Q70+","Q70-SBS","EE352E",1],["Q72","Q72","B933AD",1],["Q76","Q76","6CBE45"],["Q77","Q77","FAA61A"],["Q08","Q8","B933AD",1],["Q83","Q83","6CBE45"],["Q84","Q84","B933AD"],["Q85","Q85","EE352E"],["Q88","Q88","FAA61A"],["Q09","Q9","B933AD",1],["QM1","QM1","00933C",1],["QM10","QM10","00933C",1],["QM11","QM11","00933C",1],["QM12","QM12","00933C",1],["QM15","QM15","00933C",1],["QM16","QM16","00933C",1],["QM17","QM17","00933C",1],["QM18","QM18","00933C",1],["QM2","QM2","00933C",1],["QM20","QM20","00933C",1],["QM21","QM21","00933C",1],["QM24","QM24","00933C",1],["QM25","QM25","00933C",1],["QM3","QM3","00933C",1],["QM31","QM31","00933C",1],["QM32","QM32","00933C",1],["QM34","QM34","00933C",1],["QM35","QM35","00933C",1],["QM36","QM36","00933C",1],["QM4","QM4","00933C",1],["QM40","QM40","00933C",1],["QM42","QM42","00933C",1],["QM44","QM44","00933C",1],["QM5","QM5","00933C",1],["QM6","QM6","00933C",1],["QM7","QM7","00933C",1],["QM8","QM8","00933C",1],["S40","S40","B933AD"],["S42","S42","00AEEF"],["S44","S44","FAA61A"],["S46","S46","006CB7"],["S48","S48","EE352E"],["S51","S51","006CB7"],["S52","S52","B933AD"],["S53","S53","EE352E"],["S54","S54","FAA61A"],["S55","S55","FAA61A"],["S56","S56","6CBE45"],["S57","S57","6CBE45"],["S59","S59","EE352E"],["S61","S61","EE352E"],["S62","S62","B933AD"],["S66","S66","6CBE45"],["S74","S74","EE352E"],["S76","S76","B933AD"],["S78","S78","FAA61A"],["S79+","S79-SBS","006CB7"],["S81","S81","006CB7"],["S84","S84","EE352E"],["S86","S86","B933AD"],["S89","S89","EE352E"],["S90","S90","B933AD"],["S91","S91","EE352E"],["S92","S92","B933AD"],["S93","S93","EE352E"],["S94","S94","FAA61A"],["S96","S96","006CB7"],["S98","S98","EE352E"],["SIM1","SIM1","00933C"],["SIM10","SIM10","00933C"],["SIM11","SIM11","00933C"],["SIM15","SIM15","00933C"],["SIM1C","SIM1C","00933C"],["SIM2","SIM2","00933C"],["SIM22","SIM22","00933C"],["SIM23","SIM23","00933C"],["SIM24","SIM24","00933C"],["SIM25","SIM25","00933C"],["SIM26","SIM26","00933C"],["SIM3","SIM3","00933C"],["SIM30","SIM30","00933C"],["SIM31","SIM31","00933C"],["SIM32","SIM32","00933C"],["SIM33","SIM33","00933C"],["SIM33C","SIM33C","00933C"],["SIM34","SIM34","00933C"],["SIM35","SIM35","00933C"],["SIM3C","SIM3C","00933C"],["SIM4","SIM4","00933C"],["SIM4C","SIM4C","00933C"],["SIM4X","SIM4X","00933C"],["SIM5","SIM5","00933C"],["SIM6","SIM6","00933C"],["SIM7","SIM7","00933C"],["SIM8","SIM8","00933C"],["SIM8X","SIM8X","00933C"],["SIM9","SIM9","00933C"],["X27","X27","00933C"],["X28","X28","00933C"],["X37","X37","00933C"],["X38","X38","00933C"],["X63","X63","00933C"],["X64","X64","00933C"],["X68","X68","00933C"]],[[1,"Babylon Branch","00985F"],[11,"Belmont Park","552989"],[12,"City Terminal Zone","4D5357"],[7,"Far Rockaway Branch","6E3219"],[2,"Harlem","0039A6",1],["Wassaic","Wassaic","0039A6",1],[2,"Hempstead Branch","CE8E00"],[1,"Hudson","009B3A",1],[6,"Long Beach Branch","FF6319"],[5,"Montauk Branch","00B2A9"],[3,"New Haven","EE0034",1],[5,"Danbury","EE0034",1],[4,"New Canaan","EE0034",1],[6,"Waterbury","EE0034",1],[3,"Oyster Bay Branch","00AF3F"],[50,"Pascack Valley","94219A",1],[10,"Port Jefferson Branch","006EC7"],[51,"Port Jervis","FFD411",1],[9,"Port Washington Branch","C60C30"],[4,"Ronkonkoma Branch","A626AA"],[8,"West Hempstead Branch","00A1DE"]],[[1,1,"EE352E",,1],[3,3,"EE352E",,3],[2,2,"EE352E",,2],[5,5,"00933C",,5],[4,4,"00933C",,4],[7,7,"B933AD",,9],[6,6,"00933C",,7],["H","H",,,28],["J","J","996633",,19],["M","M","FF6319",,17],["L","L","A7A9AC",,21],["N","N","FCCC0A",,22],["Q","Q","FCCC0A",,23],["R","R","FCCC0A",,24],["W","W","FCCC0A",,25],["A","A","2850AD",,11],["C","C","2850AD",,12],["B","B","FF6319",,14],["E","E","2850AD",,13],["D","D","FF6319",,15],["G","G","6CBE45",,18],["F","F","FF6319",,16],["Z","Z","996633",,20],["FS","FS",,,26],["GS","GS","6D6E71",,27],["SI","SI",,,29]]]';