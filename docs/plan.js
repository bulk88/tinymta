var t;onhashchange=function(n){var a,e=window.location.hash.substring(1);-1!=e.indexOf("$")&&(t?(a=new Date,location.replace('http://tripplanner.mta.info/MyTrip/handler/CustomPlannerHandler.ashx?jsonpacket={"RequestDevicename":"IPHONEAPP","OriginInput":"'+t.split("$")[2]+'","DestinationInput":"'+e.split("$")[2]+'","Arrdep":"D","InputTime":"'+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)+'","InputDate":"'+a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+'","Minimize":"T","Walkdist":"0.50","Mode":"F12RBC","LineStart":"","LineEnd":"","Accessible":"N","OriginCoordinates":"'+escape(t)+'","DestinationCoordinates":"'+escape(e)+'","LocationType":"","StartServiceType":"train","StartTrainType":"subway","StartBorough":"MN","EndServiceType":"train","EndTrainType":"subway","EndBorough":"MN","Walkincrease":"","Maxinitialwait":"","Maxtriptime":"","Maxtransfers":""}')):t=e)},function(){var n=window.location.hash.substring(1);-1!=n.indexOf("$")&&(t=n),window.onload=function(){if(0<window.navigator.userAgent.indexOf("MSIE "))for(var n=0<=(t=document.location).pathname.indexOf("plan2.htm"),a=t.hash.substring(1),e=document.getElementsByTagName("a"),t=0;t<e.length;t++){var i=e[t];4<i.hash.length&&(n?(i.pathname=i.pathname.replace("plan.htm","planIE.htm"),i.hash=a+":::"+i.hash.substring(1)):i.pathname=i.pathname.replace("plan.htm","plan2.htm"))}}}();