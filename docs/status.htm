<meta content=0 name=mobileoptimized><meta content=no-referrer name=referrer><link href="//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP"rel=preload crossorigin as=fetch><link href=//collector-otp-prod.camsys-apps.com rel=preconnect crossorigin><link href=//collector-otp-prod.camsys-apps.com rel=dns-prefetch><link href=routes.js rel=preload crossorigin as=fetch>No javascript<script>var w,t="/routes.js",e="//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP",r="<a href=javascript:history.back()>Back</a> Refresh[<a href=javascript:y()>Fast</a> <a href=\"javascript:location.replace('status_.htm')\">Slow</a>] <a href="+t+">RawR</a> <a href="+e+">RawA</a><br>",a,C,A;function y(){fetch(e,{},"alt").then(function(t){200!=t.status?alert("error http status "+t.status):t.json().then(function(t,e){w=e,A=n(t.entity),C&&o()})}),fetch(t,{},"rts",1).then(function(t){200!=t.status?alert("error http status "+t.status):t.text().then(function(t,e){w=e,C="object"==typeof t?t:eval("0,"+t),A&&o()})}),document.body.innerHTML=r}function R(t,e){var r={4:"00933c",5:"00933c","5X":"00933c",6:"00933c","6X":"00a65c",A:"2850ad",C:"2850ad",E:"2850ad",G:"6cbe45",GS:"6d6e71",J:"996633",Z:"996633",L:"a7a9ac",7:"b933ad","7X":"b933ad",1:"ee352e",2:"ee352e",3:"ee352e",N:"fccc0a",Q:"fccc0a",R:"fccc0a",W:"fccc0a",B:"ff6319",D:"ff6319",F:"ff6319",FX:"ff6319",M:"ff6319"}[e];return e="["+e+"]",r?"<font color="+r+">"+e+"</font>":e}function n(t){for(var e,r,a,n,o,i,c,f={},s=Math.round(Date.now()/1e3),l=0;l<t.length;l++){e=t[l],r=0;try{if((a=e.alert["transit_realtime.mercury_alert"])&&e.alert.active_period){var u=a.hasOwnProperty("display_before_active");if(~e.id.indexOf("planned_work")&&!u)r=0;else for(o=e.alert.active_period,n=0;n<o.length;n++)(i=o[n]).start&&!r&&(c=i.start,u&&(c-=a.display_before_active),c<s&&(r=1),i.end)&&s>i.end&&(r=0)}}catch(h){console.log(h)}if(r)for(o=e.alert.informed_entity,n=0;n<o.length;n++)(r=(i=o[n]).route_id)&&(r=r.toLowerCase(),(c=(c=f[i.agency_id]=f[i.agency_id]||{})[r]=c[r]||[]).push(e))}return f}function M(t){var e,r,a,n,o;if(t)for(o=(t=t.translation).length;a=t[--o];){if(n=a.text,"en-html"===(a=a.language))return n;"en"===a?e=n:r=n}return e||r||""}function S(t){return t?t.replace(/(<p style="min-height:10px"><\/p>)|(^<p>)|((<p><\/p>|<\/p>)+$)/g,"").replace(/\[(\w+)\]/g,R):""}function o(){function i(t,e){return e[1]-t[1]}function t(t,f,s){return t.forEach(function(t){var e,r,a,n,o,i=(""+t[0]).toLowerCase(),c=s[t[2]||0];if(e=(e=f[c])&&e[i]){for(r=0;r<e.length;r++)n=(a=e[r]).alert.informed_entity.find(function(t){return t.agency_id===c&&t.route_id.toLowerCase()==i?1:0}),e[r]=[(o=a.alert["transit_realtime.mercury_alert"])?o.alert_type:"No Status Summary",(o=-10,o=(n=(n=(n=n)["transit_realtime.mercury_entity_selector"])&&n.sort_order)?(o=n.split(":")[2])?+o:100:o),M(a.alert.header_text),M(a.alert.description_text),M(a.alert["transit_realtime.mercury_alert"].human_readable_active_period)];t[4]=e}}),t}function e(t){t.sort(function(t,e){return t[1]-e[1]})}function r(t,e){for(var r,a,n=0;n<e.length;n++){var o=e[n],i=o[4]?o[4][0][0]:"On or Close",c="On or Close"!=i,f="";if(c){for(f=o[4],a=0;a<f.length;a++)r=f[a],f[a]="<b>"+r[0]+"</b><br>"+S(r[2])+(r[4]?"<br>"+r[4]:"")+"<br>"+S(r[3]);f=f.join("<hr>")}e[n]="<hr>"+(c?"<details><summary>":"")+"<font color="+o[1]+">"+(o[3]||("B"==(o[0][0]||"")&&"X"==(o[0][1]||"")?"Bx"+o[0].substr(2):o[0]))+"</font> "+i+(c?"</summary>"+f+"</details>":"")}return"<hr>"+t+"<br>"+e.join("")}for(var a,n,o,c,f,s,l,u,h,d,p=(new Date).toLocaleTimeString("en-US")+(w?" via JSONP":" via CORS")+"<br>",m=[],_=[],b=[],g=[],v=[],j=(s=g,l=v,t(C[2],A,["MTASBWY"]).forEach(function(t){(t[4]?s:l).push(t)}),e(s),e(l),u=_,h=b,t(C[1],A,["LI","MNR"]).forEach(function(t){(t[2]?u:h).push(t),t[4]&&t[4].sort(i)}),d=m,t(C[0],A,["MTA NYCT","MTABC"]).forEach(function(t){t[4]&&(t[4].sort(i),d.push(t))}),function(t){for(var e,r,a,n={},o=0;o<t.length;o++)(e=t[o])[4].sort(i),(r=n[r=(a=e[4][0])[0]]=n[r]||[r,a[1],[]])[2].push(e);return Object.values(n).sort(i)}(g)),L=0;L<j.length;L++)for(p+="<hr>"+(a=j[L])[0]+"<br>",a=a[2],o=0;o<a.length;o++){for(p+="<details><summary>"+R(0,(n=a[o])[0])+"</summary>",n=n[4],c=0;c<n.length;c++)f=n[c],n[c]="<b>"+f[0]+"</b><br>"+S(f[2])+(f[4]?"<br>"+f[4]:"")+"<br>"+S(f[3]);p=p+n.join("<hr>")+"</details>"}if(v.length)for(p+="<hr>No Active Alerts<br>",L=0;L<v.length;L++)p+=R(0,v[L][0])+" ";p=(p=(p+=r("Metro-North Railroad",_))+r("Long Island Rail Road",b))+r("Bus",m),document.body.innerHTML+=p,C=A=0}this.fetch&&Array.prototype.find?y():(a=document.createElement("script"),a.src="f.js",document.documentElement.firstChild.appendChild(a))</script>