!function(){var h,w,j,E,b,k,e,r,d,J,V,O=window,N=location,m=document.documentElement,x=m.firstChild,L={},f=0,S=N.pathname,u=N.hash,D=N.origin,A=B(S),Z={headers:{"accept-version":"3.0"}},I=[,[0,5,12],[,,!Object.values],[3,8,4],[2,7,4],[0,4,2],[0,4,2],[1,6,2],[,9,!O.requestIdleCallback],[]],g={},T=["//backend-unified.mylirr.org","//otp-mta-prod.camsys-apps.com","//collector-otp-prod.camsys-apps.com",["//tiles1.tinymta.us.to","//tiles2.tinymta.us.to"],"/rstop.htm","/rtrain.htm","/stop.htm","/status.htm","/tileMap.htm",["/bk.png","/zo.png","/zi.png","/ts.gif"]],q=[["/f.js"],["/1p.js",function(){E=(E=history.pushState.p1[0])||null,delete history.pushState.p1}],["/fav.js"],["/dumb.js"]],F=["style","body","html","div",,"link",0],z=O.requestIdleCallback||(O.requestIdleCallback=O.requestAnimationFrame?function(e){requestAnimationFrame(function(){requestAnimationFrame(e)})}:function(e){return setTimeout(e,40)});function P(){for(var e,n=0;n<F.length;n++)(e=F[n])[1]||(e[1]=e[0].cloneNode(0))}O.fetch||O.f||(O.f=1,x.appendChild(document.createElement("script")).src="/f.js");var n,t,a,o,i,c={body:document.body,style:x.getElementsByTagName("style")[0],y:O.y},y=[c,c.body,S+u,A],v=D.length,s=function(){var e,n=navigator.userAgent,t=n.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(t[1]))return e=/\brv[ :]+(\d+)\.(\d+)/g.exec(n)||[],{name:"Explorer",major:parseInt(e[1]||""),minor:parseInt(e[2]||"")};if("Chrome"===t[1]){var a;if(null!=(e=n.match(/\b(OPR|Edge)\/(\d+)\.(\d+)/)))return{name:(a=e.slice(1).toString().split(","))[0].replace("OPR","Opera"),major:parseInt(a[1]),minor:parseInt(a[2])}}t=t[2]?[t[1],t[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=n.match(/version\/(\d+)\.(\d+)/i))&&(t.splice(1,1,e[1]),t[2]=e[2]);return{name:t[0],major:parseInt(t[1]),minor:parseInt(t[2])}}();function p(e){console.log(e.type)}for(("Chrome"==s.name&&8<=s.major||"Firefox"==s.name&&2<=s.major||"Opera"==s.name&&15<=s.major||"Explorer"==s.name&&11<=s.major)&&(e=1),(n=O.applicationCache)&&(n.onupdateready=function(){console.log("spa ac swap ",O.performance&&O.performance.now()||Date.now());var e=O.applicationCache;e.swapCache(),e.onupdateready=null},n.onerror=function(){O.applicationCache.status},window.applicationCache.addEventListener("checking",p,!1),window.applicationCache.addEventListener("noupdate",p,!1),window.applicationCache.addEventListener("downloading",p,!1),window.applicationCache.addEventListener("cached",p,!1),window.applicationCache.addEventListener("updateready",p,!1),window.applicationCache.addEventListener("obsolete",p,!1),window.applicationCache.addEventListener("error",p,!1),window.applicationCache.addEventListener("load",p,!1),window.applicationCache.addEventListener("readystatechange",p,!1),window.applicationCache.addEventListener("success",p,!1),J=!e),("Chrome"==s.name&&50<=s.major||"Firefox"==s.name&&(56==s.major||85<=s.major)||"Opera"==s.name&&37<=s.major||"Safari"==s.name&&(11==s.major&&1<=s.minor||11<s.major))&&(r=1),("Chrome"==s.name&&46<=s.major||"Firefox"==s.name&&(40<=s.major&&s.major<=70||115<=s.major)||"Opera"==s.name&&33<=s.major||"Safari"==s.name&&(11==s.major&&1<=s.minor||11<s.major))&&(d=1),a=0;a<F.length;a++)t=(n=F[a])?document.createElement(n):t.cloneNode(0),F[a]=[t];if(F[6][0].rel="prefetch",e||O.applicationCache&&0!=O.applicationCache.status||(F[6][0]=document.createElement("img")),t=F[5][0],d?(t.rel="preconnect",t.crossOrigin="anonymous"):(t.rel="dns-prefetch","/"==S&&((n=t.cloneNode(0)).href="//collector-otp-prod.camsys-apps.com",x.appendChild(n))),P(),(o=x.querySelectorAll('link[rel="preconnect"]')).length){if(1<o.length){for(i=F[3][1],a=F[3][1]=0;a<o.length;a++)i.appendChild(o[a]);x.appendChild(i)}else i=o[0];w=T[I[A][0]]=c.pc=i}if((o=x.querySelectorAll('link[rel="prefetch"]')).length){if(1<o.length){for(i=F[4][1],a=F[4][1]=0;a<o.length;a++)i.appendChild(o[a]);x.appendChild(i)}else i=o[0];j=T[I[A][1]]=c.pf=i}for(i={},a=0;a<q.length;a++)i[q[a][0]]=a+1;for(o=x.getElementsByTagName("script"),a=0;a<o.length;a++)(t=i[t=(t=o[a]).src.slice(v)])&&((n=q[--t][1])&&n(),q[t]=0);function B(e){var n;switch(e){case"/tileMap.htm":n=8;break;case"/stations.htm":n=7;break;case"/mn/stations.htm":n=6;break;case"/li/stations.htm":n=5;break;case"/":n=4;break;case"/stop.htm":n=3;break;case"/status.htm":n=2;break;case"/rstop.htm":n=1;break;case"/rtrain.htm":n=0;break;default:n=9}return n}function l(e){var t,n,a,o,r=e.target;if(!r.window&&"A"===(r="FONT"===r.nodeName?r.parentNode:r).nodeName&&r.href!=k&&(k=r.href,!r.href.indexOf(D))&&(t=r.hash,n=r.pathname,console.log("in pl",n),(n="/"==n.charAt(0)?n:"/"+n)!==N.pathname)){var i,c,s=B(n);if("focus"!=e.type?(s<4&&(t=t.slice(1),O.S={t:Date.now(),s:t,f:function(e){i?e(i):c=e}},fetch(3===s?"//otp-mta-prod.camsys-apps.com/otp/routers/default/nearby?timerange=1800&apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE&stops=MTASBWY:"+t.slice(0,3):2===s?"//collector-otp-prod.camsys-apps.com/realtime/gtfsrt/ALL/alerts?type=json&apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP":1===s?"//backend-unified.mylirr.org/arrivals/"+t:"//backend-unified.mylirr.org/locations/"+t+"?geometry=NONE",1<s?{}:Z).then(function(e){var n,t;c?c(e):i=200==e.status?(e.json().then(function(e){n?n(e):t=e}),{status:200,json:function(){return{then:function(e){t?setTimeout(e,0,t):n=e}}}}):e}),2===s)&&(R=void 0,b=1,x.appendChild(document.createElement("script")).src="routes.js"),8===s&&(a=function(e,n){n?o.pr=n:(O.S=o={t:Date.now(),s:t,pt:s,pr:e.body},e.js(0,t))})):k="",!(r=L[n])||r.pgh&&void 0===E){if(0!==r){L[n]=0;var p,l,d,h,m,f,u=n,e=s,g=a,y={},v=S,C=A;try{if(p=I[e])for(d=p[2],l=0;d;l++)1&d&&q[l]&&(!function(n,t){var a=document.createElement("script");a.onerror=a.onload=function(e){"error"==e.type?x.removeChild(a):((e=q[n][1])&&e(),q[n]=0,a.onerror=a.onload=0),--t[0]||t[1]()},a.src=q[n][0],console.log("spa ld .js ",a.src,O.performance&&O.performance.now()||Date.now()),x.appendChild(a),t[0]++}(l,m=m||[0,function(){1!==f&&f(),f=0}]),f=1),d>>=1;console.log("pl f ",u,O.performance&&O.performance.now()||Date.now()),fetch(u,{},1).then(function(e){console.log("pl f 2 ",u,O.performance&&O.performance.now()||Date.now()),e.text().then(function(e){var n,t,a,o,r,i,c;console.log("pl f 3 ",u,O.performance&&O.performance.now()||Date.now()),-1!=(n=e.indexOf("<script async defer src="))?"/1p.js"==(o=e.slice(n+=24,n=e.indexOf(">",n)))&&(c=1):n=0,-1!=(n=e.indexOf("<style>",n))?(o=e.slice(n+=7,n=e.indexOf("</style>",n)),n+=8,a=0,":root{color-scheme:light dark}"!=o||(a=V)||(r=1),a||(a=F[0][1],F[0][1]=0,z(P),a.textContent=o,r&&(V=a)),y.style=a):n=0,-1!=(r=e.indexOf("<script>",n))&&(o=O.y,t=e.indexOf("<\/script>",r+8),Function(e.slice(r+8,t))(),(i=(a=y.js=onhashchange).body)&&delete a.body,y.y=O.y,O.y=o,onhashchange=null,g)&&g(y),-1==e.indexOf("No javascript",n)&&(e=-1!=r?e.slice(n,r)+e.slice(t+9):e.slice(n),a=F[2][1],F[2][1]=0,z(P),a.innerHTML=e,y.body=a=a.lastElementChild,g&&g(0,a),i)&&i(a),f?f=function(){c&&(y.pgh=E),L[u]=y,M(v,u,C)}:(c&&(y.pgh=E),L[u]=y,M(v,u,C))})}),p&&(l=p[0],(d=T[l])&&d.length&&(d=H(l,0)),w=Y(w,y.pc=d),l=p[1],(d=T[l])&&d.length&&(d=H(l,1)),j=Y(j,y.pf=d),z(P)),J&&3==e&&((h=document.createElement("iframe")).src="/stopac.htm",console.log("add stopac el ",O.performance&&O.performance.now()||Date.now()),x.appendChild(h))}catch(e){}}}else a&&a(r)}}function C(e){var n,t,a,o,r,i,c,s,p,l,d=e.target;k="","A"!==(d="FONT"===d.nodeName?d.parentNode:d).nodeName||d.href.indexOf(D)||(r=B(a="/"==(a=d.pathname).charAt(0)?a:"/"+a),(n=L[a])?(o=d.hash,c=a===N.pathname&&o!=N.hash,(s=(p=(i=h[f])[0]).pgh)&&s({},S),2===r&&(b?b=0:(R=void 0,b=1,x.appendChild(document.createElement("script")).src="routes.js")),c||(m.removeChild(i[1]),Y(p.style,n.style),w=Y(w,n.pc),j=Y(j,n.pf)),i=h[++f]=[],(p=O.S)&&p.pr&&(O.S=0,p.pt===r)&&p.s===o&&Date.now()-p.t<3e3&&(l=p.pr),8!=r&&(t=O.T)&&t(),h.length=f+1,l?t=l:(t=n.body)||(t=F[1][1],F[1][1]=0,z(P)),i[1]=c?t:m.appendChild(t),history.pushState(f,0,d.href),c||(e.preventDefault(),O.y=n.y,O.onpageshow=n.pg,O.onpagehide=n.pgh,(s=n.js)&&!l&&s(),S=a,u=o,8==(A=r)&&n.pf&&(M(a,"/bk.png",8),M(a,"/zo.png",8),M(a,"/zi.png",8),M(a,"/ts.gif",8))),i[0]=n,i[2]=a+o,i[3]=r,console.log("on click have ent ",O.performance&&O.performance.now()||Date.now())):(console.log("on click no cache spa ent ",O.performance&&O.performance.now()||Date.now()),e.preventDefault()))}function M(i,c,s){g[c]=1,z(function(){var e,n,t,a,o=D.length,r=L[i];if(e=r.pf)if("DIV"===e.nodeName){for(t=e.firstChild;t;){if(a=t.nextElementSibling,(t.href||t.src).slice(o)==c){e.removeChild(t);break}t=a}e.firstChild||((n=e.parentNode)&&n.removeChild(e),delete r.pf,j===e&&(j=null),T[I[s][1]]=null)}else(e.href||e.src).slice(o)==c&&((n=e.parentNode)&&n.removeChild(e),delete r.pf,j===e&&(j=null),T[I[s][1]]=null)})}function G(e,n){var t,a,o;return e&&g[n]?0:(e&&(o=".png"!=(t=n.slice(-4))&&".gif"!=t?o:1)&&!r?(a=document.createElement("img")).src=n:((a=(t=F[5+e])[1])?t[1]=0:a=t[0].cloneNode(0),e?o&&(a.rel="preload",a.as="image"):n.indexOf("//tiles")||(a.crossOrigin=null),"href"in a?a.href=n:a.src=n),a)}function H(e,n){var t,a,o,r=T[e];if("string"==typeof r)o=G(n,r),n&&(o.onload=function(e){});else{for(o=F[3+n][1],t=F[3+n][1]=0;t<r.length;t++)(a=G(n,r[t]))&&o.appendChild(a),n&&a&&(a.onload=function(e){});o.firstChild||(o=0)}return T[e]=o}function Y(e,n){return e!==n&&(e&&n?x.replaceChild(n,e):(e&&x.removeChild(e),n&&x.appendChild(n))),n}z(P),c.pg=O.onpageshow,c.pgh=O.onpagehide,L[S]=c,h=[y],history.state!==f&&history.replaceState(f,0,N.href),addEventListener("touchstart",l,{passive:!0}),addEventListener("mousedown",l,{passive:!0}),addEventListener("focus",l,{passive:!0,capture:!0}),addEventListener("click",C),(onpopstate=function(e){var n,t,a,o,r,i,c=N.pathname,s=N.hash;null!==(e=e.state)&&(S==c&&u!=s?u=s:((n=(a=(t=h[f])[0]).pgh)&&n({},S),e===f||e>=h.length?(O.onpagehide=null,N.reload()):(r=(o=h[e])[3],i=o[0],S=c,u=s,m.removeChild(t[1]),Y(a.style,i.style),w=Y(w,i.pc),j=Y(j,i.pf),f=e,A=r,m.appendChild(o[1]),O.y=i.y,O.onpageshow=n=i.pg,O.onpagehide=i.pgh,n&&n({persisted:1}))))}).p=[C,l]}();