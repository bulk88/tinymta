"use strict";export default{fetch:B};let e,t,a=new TextEncoder;const r={headers:{"accept-version":"3.0"}},n=["age","cache-control","date","etag","expires","last-modified","vary"];var o={"0AR":"Ardsley-on-Hudson","0BC":"Beacon","0BK":"Breakneck Ridge","0CS":"Cold Spring","0CT":"Cortlandt","0DF":"Dobbs Ferry","0DV":"Spuyten Duyvil","0GA":"Garrison","0GD":"Glenwood","0GY":"Greystone","0HB":"Highbridge-Employees","0HL":"Harlem-125 St","0HM":"Croton-Harmon","0HS":"Hastings-on-Hudson","0IV":"Irvington","0LU":"Ludlow","0MB":"Marble Hill","0MH":"Morris Heights","0MN":"Manitou","0NM":"New Hamburg","0NY":"Grand Central","0OS":"Ossining","0PE":"Peekskill","0PM":"Philipse Manor","0PO":"Poughkeepsie","0RV":"Riverdale","0SB":"Scarborough","0TT":"Tarrytown","0UH":"University Heights","0YK":"Yonkers","0YS":"Yankees-E 153 St","1AT":"Appalachian Trail","1BG":"Botanical Garden","1BH":"Bedford Hills","1BR":"Southeast","1BW":"Brewster","1BX":"Bronxville","1CF":"Croton Falls","1CQ":"Chappaqua","1CW":"Crestwood","1DO":"Dover Plains","1FO":"Fordham","1FW":"Fleetwood","1GO":"Goldens Bridge","1HA":"Hartsdale","1HN":"Hawthorne","1KA":"Katonah","1MK":"Mt Kisco","1ML":"Melrose","1MP":"Mt Pleasant","1MW":"Mt Vernon West","1NW":"North White Plains","1PA":"Patterson","1PV":"Pleasantville","1PW":"Pawling","1PY":"Purdy's","1SC":"Scarsdale","1TK":"Tuckahoe","1TM":"Tenmile River","1TR":"Tremont","1VA":"Valhalla","1WA":"Wassaic","1WF":"Wakefield","1WG":"Williams Bridge","1WI":"Harlem Valley-Wingdale","1WN":"Woodlawn","1WP":"White Plains","2BP":"Bridgeport","2CC":"Cos Cob","2DA":"Darien","2EN":"East Norwalk","2FF":"Fairfield","2FM":"Fairfield Metro","2GF":"Green's Farms","2GN":"Greenwich","2HS":"Harrison","2LA":"Larchmont","2MA":"Mamaroneck","2ME":"Mt Vernon East","2MI":"Milford","2NH":"New Haven","2NO":"Noroton Heights","2NR":"New Rochelle","2OG":"Old Greenwich","2PC":"Port Chester","2PH":"Pelham","2RO":"Rowayton","2RS":"Riverside","2RY":"Rye","2SM":"Stamford","2SN":"South Norwalk","2SP":"Southport","2SR":"Stratford","2SS":"New Haven-State St","2WH":"West Haven","2WP":"Westport","3GB":"Glenbrook","3NC":"New Canaan","3SD":"Springdale","3TH":"Talmadge Hill","4BE":"Bethel","4BV":"Branchville","4CA":"Cannondale","4DN":"Danbury","4M7":"Merritt 7","4RD":"Redding","4WI":"Wilton","5AN":"Ansonia","5BF":"Beacon Falls","5DB":"Derby-Shelton","5NG":"Naugatuck","5SY":"Seymour","5WB":"Waterbury",ABT:"Albertson",ADL:"Auburndale",AGT:"Amagansett",ATL:"Atlantic Terminal",AVL:"Amityville",BDY:"Broadway",BHN:"Bridgehampton",BK:"Stony Brook",BMR:"Bellmore",BOL:"Bolands-Employees",BPG:"Bethpage",BPT:"Bellport",BRS:"Bellerose",BRT:"Belmont Park",BSD:"Bayside",BSR:"Bay Shore",BTA:"Babylon",BWD:"Brentwood",BWN:"Baldwin",CAV:"Centre Av",CHT:"Cedarhurst",CI:"Central Islip",CLP:"Country Life Press",CPG:"Copiague",CPL:"Carle Place",CSH:"Cold Spring Harbor",DGL:"Douglaston",DPK:"Deer Park",EHN:"East Hampton",EMT:"Elmont-UBS Arena",ENY:"East New York",ERY:"East Rockaway",EWN:"East Williston",FHL:"Forest Hills",FLS:"Flushing Main Street",FMD:"Farmingdale",FPK:"Floral Park",FPT:"Freeport",FRY:"Far Rockaway",GBN:"Gibson",GCT:"Grand Central",GCV:"Glen Cove",GCY:"Garden City",GHD:"Glen Head",GNK:"Great Neck",GPT:"Greenport",GRV:"Great River",GST:"Glen Street",GVL:"Greenvale",GWN:"Greenlawn",HBY:"Hampton Bays",HEM:"Hempstead",HGN:"Hempstead Gardens",HIL:"Hillside-Employees",HOL:"Hollis",HPA:"Hunterspoint Av",HUN:"Huntington",HVL:"Hicksville",HWT:"Hewlett",IPK:"Island Park",ISP:"Islip",IWD:"Inwood",JAM:"Jamaica",KGN:"Kew Gardens",KPK:"Kings Park",LBH:"Long Beach",LCE:"Lawrence",LHT:"Lindenhurst",LIC:"Long Island City",LMR:"Locust Manor",LNK:"Little Neck",LTN:"Laurelton",LVL:"Locust Valley",LVW:"Lakeview",LYN:"Lynbrook",MAK:"Mattituck",MAV:"Merillon Av",MFD:"Medford",MHL:"Murray Hill",MHT:"Manhasset",MIN:"Mineola",MPK:"Massapequa Park",MQA:"Massapequa",MRK:"Merrick",MSY:"Mastic-Shirley",MTK:"Montauk",MVN:"Malverne",NAV:"Nostrand Av",NBD:"Nassau Blvd",NHP:"New Hyde Park",NPT:"Northport",NYK:"Penn Station",OBY:"Oyster Bay",ODE:"Oceanside",ODL:"Oakdale",PDM:"Plandome",PGE:"Patchogue",PJN:"Port Jefferson",PLN:"Pinelawn",PWS:"Port Washington",QVG:"Queens Village",RHD:"Riverhead",RON:"Ronkonkoma",ROS:"Rosedale",RSN:"Roslyn",RVC:"Rockville Centre",SAB:"St. Albans",SCF:"Sea Cliff",SFD:"Seaford",SHD:"Southold",SHN:"Southampton",SJM:"St. James",SMR:"Stewart Manor",SPK:"Speonk",SSM:"Mets-Willets Point",STN:"Smithtown",SVL:"Sayville",SYT:"Syosset",VSM:"Valley Stream",WBY:"Westbury",WDD:"Woodside",WGH:"Wantagh",WHD:"West Hempstead",WHN:"Westhampton",WMR:"Woodmere",WWD:"Westwood",WYD:"Wyandanch",YPK:"Yaphank",_GC:"Grand Central"},s=["00933c","ff6319","6d6e71","fccc0a","ee352e","286ded","b933ad","0078c6","996633"],i={B:1,FX:1,F:1,M:1,D:1,FS:2,S:2,H:2,GS:2,Q:3,W:3,N:3,R:3,1:4,3:4,2:4,A:5,E:5,C:5,"7X":6,7:6,SI:7,SIR:7,J:8,Z:8,G:"6cbe45",L:"a7a9ac"},l=["ee0034","4d5357","006ec7"],c={12:1,CI:1,HH:2,PJ:2,BY:"00985f",HU:"009b3a",WH:"00a1de",OB:"00af3f",MK:"00b2a9",HA:"066afe",11:"60269e",S:"6d6e71",FR:"6e3219",RK:"a626aa",PW:"c60c30",HM:"ce8e00",LB:"ff6319"};function E(e,t){return new Response('var R;!function e(){if(this.y){for(var t=document.body.lastChild;t=t.previousSibling;)if("DIV"===t.nodeName&&!t.firstChild)return t.style.minHeight="",t.appendChild(document.createTextNode('+JSON.stringify(e)+')),void(this.requestIdleCallback||this.requestAnimationFrame||function(e){setTimeout(e,40)})(function(){try{localStorage.setItem("as",t.clientHeight+"px")}catch(e){}})}else R=e}()',{headers:{"content-type":"text/javascript","cache-control":"no-cache",...t}})}async function B(t,a,r){e||(e=Date.now()),console.log("v8start "+e);try{return f(t,a,r).catch((e=>console.log(e)))}catch(e){console.log(e+" "+e.stack+" "+e.columnNumber+e.fileName+e.lineNumber)}}function A(e,t){return"string"!=typeof(e=i[t])&&(e=i[t]=s[0|e]),"<font color="+e+">["+t+"]</font>"}function u(e){return"string"==typeof e&&0===(e=e.replace(/(<p style="min-height:10px"><\/p>|<p><\/p>)+$/g,"")).indexOf("<p>")&&-1!==e.indexOf("</p>",e.length-4)?e.slice(3,-4):e}function h(e,a){for(a in e=e.split(/[: T-]/))e[a]=parseFloat(e[a]);return"Min "+(0|Math.abs((new Date(e[0],e[1]-1,e[2],e[3]||0,e[4]||0,e[5]||0,0)-t)/1e3)/60)}async function f(e,a,s){var i,B,f=new URL(e.url),C=f.pathname;if("/jsp"===C){var p,m,M={},y=0;if(null===(C=f.searchParams.get("url")))return new Response(null,{status:400});if((C=decodeURIComponent(C)).startsWith("//")&&(C="http:"+C),"otp-mta-prod.camsys-apps.com"===(B=(B=new URL(C)).host)||"collector-otp-prod.camsys-apps.com"===B||"api.weather.com"===B||"backend-unified.mylirr.org"===B){for((B=(m=e.headers).get("if-none-match"))&&(M["if-none-match"]=B),(B=m.get("if-modified-since"))&&(M["if-modified-since"]=B),(B=f.searchParams.get("headers"))&&Object.assign(M,JSON.parse(decodeURIComponent(B))),i=fetch(C,{headers:M}),C="/**/ typeof "+(C=(f.searchParams.get("callback")||"_xcallback").replace(/[^\[\]\w$.]/g,""))+" === 'function' && "+C+"({http_code:",M={"content-type":"text/javascript","x-content-type-options":"nosniff"},i=await i,M["cache-control"]=(B=(m=i.headers).get("cache-control"))?B:"no-cache";B=n[y++];)(p=m.get(B))&&(M[B]=p);return 304!==i.status?(B=i.headers.get("content-type"),C+=i.status+",content_type:'"+B+"',contents:",i=await i.text(),new Response(C+("text"!==f.searchParams.get("type")&&B.startsWith("application/json")?i.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):JSON.stringify(i))+"});",{headers:M})):new Response(null,{status:304,headers:M})}return new Response(null,{status:403})}if(C.startsWith("/s/")){if(C=C.substr("/s/".length,3),/^\w+$/.test(C)){var w="http://otp-mta-prod.camsys-apps.com/otp/routers/default/nearby?timerange=1800&apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE&stops=MTASBWY:"+C;i=fetch(w);var F="<meta content=0 name=mobileoptimized>[1][<a accesskey=1 href="+C+">Refresh</a>] <a href="+w+">Raw</a><br>",b=[2,3,4,5,6,7,8,9,0];if(200==(i=await i).status){i=i.json();var Q,D,N=0,H={};if((W=i=await i).length){for(y in(W=W[0]).alerts,W.groups)for(y in w=(Q=W.groups[y]).headsign.replace("Downtown & Brooklyn","Downtown & Bklyn"),Q.times)(D=Q.times[y]).shortRouteName=Q.route.shortName,D.timestamp>N&&(N=D.timestamp),(H[w]=H[w]||[]).push(D);for(y in H)H[y].sort((function(e,t){return e.departureFmt<t.departureFmt?-1:e.departureFmt>t.departureFmt?1:0}));for(y in F+=new Date(1e3*N).toLocaleTimeString("en-US",{timeZone:"America/New_York"})+" via CFW<br>CurSta:"+W.stop.name+"<br>",t=new Date((new Date).toLocaleString("en-US",{timeZone:"America/New_York"})),H)for(y in F+="<a accesskey="+(N=b.shift())+" name="+N+" href=#"+N+">"+y+"</a><br>",Q=H[y])F+=h((D=Q[y]).departureFmt)+"-"+A(0,D.shortRouteName)+"-"+D.tripHeadsign+(void 0===D.track?"-Tk?":"")+(D.realtime?"-":"-NRT-")+function(e){switch(e){case"SCHEDULED":return"SCH";case"UPDATED":return"UPD";case"CANCELED":return"CNX";case"ADDED":return"ADD";case"MODIFIED":return"MOD";default:return"UNK"}}(D.realtimeState)+((D=((D=D.departureDelay)<-43200?D+86400:D)/60|0)?(D>0?"-L":"-E")+Math.abs(D):"")+"<br>";for(F+="<br>Key: E2 (early 2 min) L3 (late 3 min)<br>NRT (not realtime)<br><br>",H="",(W=W.alerts||[]).sort((function(e,t){return e.effectiveStartDate<t.effectiveStartDate?-1:e.effectiveStartDate>t.effectiveStartDate?1:0})),y=0;y<W.length&&y<10;y++)(D=W[y]).alertType&&(Q=(void 0===(N=b.shift())?D.alertType:"<a accesskey="+N+" href=#"+N+" name="+N+">"+D.alertType+"</a>")+"<br>"+(D.humanReadableActivePeriod||"Ongoing")+"<br>"+D.alertHeaderText.replace(/\[(\w+)\]/g,A)+(D.alertDescriptionText?"<br>"+D.alertDescriptionText.replace(/\[(\w+)\]/g,A):"")+"<br><br>",D.humanReadableActivePeriod?H+=Q:F+=Q);F+=H}else F="station not found";return new Response(F,{headers:{"content-type":"text/html; charset=utf-8","cache-control":"no-cache, no-store"}})}return i}}else if(C.startsWith("/li/s/")){if(C=C.substr("/li/s/".length,3),/^\w+$/.test(C)){w="http://backend-unified.mylirr.org/arrivals/"+C;i=fetch(w,r);F="<meta content=0 name=mobileoptimized>[1][<a accesskey=1 href="+C+">Refresh</a>] <a href="+w+">Raw</a><br>"+(new Date).toLocaleTimeString("en-US",{timeZone:"America/New_York"})+" via CFW<br>CurSta:"+o[C]+"<br><a accesskey=2 name=2 href=#2>East</a><br>";var v="<a accesskey=3 name=3 href=#3>West</a><br>";if(200==(i=await i).status){var R,P,k,W=await i.json();y=0;for(t=new Date((new Date).toLocaleString())/1e3;y<W.arrivals.length;y++)R=W.arrivals[y],P=new Date(1e3*(P=R.time)).toLocaleTimeString("en-US",{timeZone:"America/New_York"}).replace(":00 "," ")+"-Min "+Math.ceil((P-t)/60)+((P=R.status.otp)&&(P=P/60|0)?P>0?"-E"+P:"-L"+-P:"")+"-Tk"+(R.track||"?")+"-<font color="+("string"==typeof(P=c[k=R.branch])?P:c[k]=l[0|P])+">"+o[(P=R.stops)[P.length-1]]+"</font>"+("O"==R.peak_code?"":"-Pk")+"<br>","E"==R.direction?F+=P:v+=P;for(y in F+=v,v="<br>",W.banners)v+=(y=W.banners[y]).title+"<br>"+y.text+"<br><br>";for(y in(W=W.alerts).sort((function(e,t){return e.start_time<t.start_time?-1:e.start_time>t.start_time?1:0})),W)v+=(y=W[y]).status+"<br>"+u(y.header)+"<br>"+(y.human_duration?y.human_duration+"<br>":"")+u(y.text)+"<br><br>";return F+=v,new Response(F,{headers:{"content-type":"text/html; charset=utf-8","cache-control":"no-cache, no-store"}})}return i}}else{if("/routes.js"===C){function J(e){var t;for(t in e)"string"==typeof e[t][1]&&(e[t][1]=e[t][1].toLowerCase())}function $(e){var t;for(t in e)"string"==typeof e[t][1]&&(e[t][1]=parseInt(e[t][1],16))}var X=e.headers.get("if-none-match");if(X===g)i="";else if(i=S,"string"==typeof(B=f.searchParams.get("type"))){var L,T,I,G,O={};for(B|=0,i=(i=i.slice("!function(E){E=this.R,this.R=".length,-",E&&E()}();".length)).replace(/,,/g,",null,"),i=JSON.parse(i),L=0;L<2;L++)for(y in G=i[L])"string"!=typeof G[y][1]&&(G[y][1]="000000");if(2&B){for(L=0;L<2;L++)for(y in G=i[L])T=G[y][1],O[T]?O[T]++:O[T]=1;for(I=Object.keys(O).sort((function(e,t){return O[t]-O[e]})),8&B&&(I=I.filter((function(e){return O[e]>1}))),L=0;L<2;L++)for(y in G=i[L])T=G[y][1],8&B&&1==O[T]?console.log("route: "+(G[y][3]?G[y][3]:G[y][0])+" has 1 use of its color "+T):G[y][1]=I.indexOf(T);if(i.unshift(I),4&B&&(J(i[1]),J(i[2])),32&B&&($(i[1]),$(i[2])),1&B)for(y in G=i[0])G[y]=G[y].toLowerCase();if(16&B)for(y in G=i[0])G[y]=parseInt(G[y],16)}else 4&B&&(J(i[0]),J(i[1])),32&B&&($(i[0]),$(i[1]));i=JSON.stringify(i),64&B&&(i=i.replace(/"([0-9A-Fa-f]{6})"/g,(function(e,t){return t.replace(/^0+/,"").length?"0X"+t.replace(/^0+/,""):""}))),i="!function(E){E=this.R,this.R="+i.replace(/null/g,"").replace(/,0,/g,",,").replace(/[,0]+\]/g,"]")+",E&&E()}();"}return s.waitUntil(d(a,s)),new Response(i,{status:X===g?304:200,headers:{"content-type":"text/javascript",etag:g,"cache-control":"max-age=10, stale-while-revalidate=86400"}})}if("/wea.js"===C)return fetch("https://api.weather.com/v3/wx/forecast/hourly/1day?geocode=40.74,-73.91&format=json&units=e&language=en-us&apiKey=8de2d8b3a93542c9a2d8b3a935a2c909");if("/t"===C&&(f.pathname="/touch")||C.startsWith("/touch"))return(C=new URL(f)).protocol="https:",C.hostname="patrickhlauke.github.io",(C=(i=await fetch(C,e)).headers.get("location"))&&((C=new URL(C)).protocol=f.protocol,C.hostname=f.hostname,(i=new Response(i.body,i)).headers.set("location",C.href)),i}var x=e?.cf||{asn:676},U=e?.headers?.get("cf-connecting-ip")||"0.0.0.0",Y='W/"G'+U+"."+x.asn+'"';if(e?.headers?.get("if-none-match")==Y)return new Response(null,{status:304});var V="AS"+x.asn;V=String.fromCharCode(V.length)+V+"asncymrucom\0\0\0",console.log("a",performance.now()),i=fetch("https://"+(e?.cf?"1.1.1.1":"cloudflare-dns.com")+"/dns-query",{method:"post",body:"\0\0\0\0\0\0\0\0\0"+V,headers:{"content-type":"application/dns-message"}});var K=(V=(new TextEncoder).encode(V)).byteLength-4;i=await i,console.log("b",performance.now());var _=await i.arrayBuffer();console.log("c",performance.now());var j=new DataView(_);if(33152==(33664&j.getUint16(2))&&65537==j.getUint32(4)&&0==j.getUint32(8)){let Z,q,z;for(q=1,Z=0;Z<V.byteLength;Z++)if(V[Z]!==j.getUint8(Z+12)){q=0;break}if(q){let ee;for(Z+=12,192==(192&j.getUint8(Z))?(ee=-49153&j.getUint16(Z),z=Z+2):(ee=Z,z=Z+K),q=1,Z=0;Z<K;Z++)if(V[Z]!==j.getUint8(Z+ee)){q=0;break}if(q&&1048577==j.getUint32(z)&&(z+=8,j.getUint16(z)+(z+=2)==j.byteLength&&j.getUint8(z)+(z+=1)==j.byteLength))return E("Your ISP: "+U+" | AS"+(new TextDecoder).decode(new Uint8Array(j.buffer,z)),{etag:Y})}}return E("ERROR: raw data: "+(new TextDecoder).decode(new Uint8Array(_)),{})}async function d(e,t){var r,n,o,s,i,l,c,E,B=0;if(s=fetch("http://otp-mta-prod.camsys-apps.com/otp/routers/default/index/routes?apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE"),200===(s=await s).status){for(s=s.json(),s=await s;B<s.length;B++)null===(n=s[B]).longName&&delete n.longName,null===n.shortName&&delete n.shortName,null===n.color&&delete n.color;if(s=C.buildServiceRoutes(s),s="var R;!function(E,B){for(E=R,R="+(s=JSON.stringify(s)).replace(/null/g,"").replace(/,?\]/g,"]")+',E&&E(),E=document.documentElement.firstChild.lastChild;E;E=E.previousSibling)if((B=E.src)&&B.lastIndexOf("routes.js")===B.length-9){E.parentNode.removeChild(E);break}}();',o=await crypto.subtle.digest("MD5",a.encode(s)),o='W/"'+btoa(String.fromCharCode.apply(null,new Uint8Array(o)))+'"',g!==o){try{r=e.GHAPISECRET}catch(n){(r=url.searchParams.get("key"))||console.log("GHAPI key is invalid="+r),r="Basic "+r}if(g=o,S=s,s=fetch("https://raw.githubusercontent.com/bulk88/tinymta/master/cloudflare_as_name.js",{cf:{cacheTtlByStatus:-1}}),i=fetch("https://raw.githubusercontent.com/bulk88/tinymta/master/cloudflare_as_name.min.js",{cf:{cacheTtlByStatus:-1}}),s=await s,i=await i,console.log("got old gh script"),200==s.status&&200==i.status){s=await s.text(),i=await i.text(),c=S.replace(/\x27/g,"\\'"),(E=s.replace(/let (\w+)='[^']*',(\w+)='[^']*';$/,"let $1='"+o+"',$2='"+c+"';"))==s&&console.log("failed to patch full size cfw src"),(l=i.replace(/let (\w+)=(?:'[^']*'|"[^"]*"),(\w+)=(?:'[^']*'|"[^"]*");$/,"let $1='"+o+"',$2='"+c+"';"))==i&&console.log("failed to patch mini cfw src");async function h(e,t){return p("GET",e,t)}async function f(e,t){return p("POST",e,t)}async function d(e,t){return p("PATCH",e,t)}async function p(e,t,a){var n=await fetch("https://api.github.com/"+t,{method:e,headers:{authorization:r,"user-agent":"tinymta_cfw"},...a&&{body:JSON.stringify(a)}});return n.status>=300?(console.log("failed status="+n.status+" ct="+n.headers.get("content-type")+" url="+t),n=await n.text(),console.log(n),n):await n.json()}var A={repository:"bulk88/tinymta"};let m={};var u={gitAuthor:{name:"RoutesBot",email:"bulk88@hotmail.com"}};async function M(e,t,a){let r;var n,o,s,i;u.gitAuthor&&(r={name:u.gitAuthor.name,email:u.gitAuthor.email,date:(n=new Date,o=-n.getTimezoneOffset(),s=o>=0?"+":"-",i=function(e){return(e<10?"0":"")+e},n.getFullYear()+"-"+i(n.getMonth()+1)+"-"+i(n.getDate())+"T"+i(n.getHours())+":"+i(n.getMinutes())+":"+i(n.getSeconds())+s+i(Math.floor(Math.abs(o)/60))+":"+i(Math.abs(o)%60))});const l={message:a,parents:[e],tree:t};return r&&(l.author=r),(await f(`repos/${A.repository}/git/commits`,l)).sha}async function y(e,t){const a={sha:t,force:!0};try{await d(`repos/${A.repository}/git/refs/heads/${e}`,a)}catch(e){if(422===e.statusCode)throw console.log(e+" Branch no longer exists - exiting"),new Error("repository-changed");throw e}}async function w(e){try{return(await h(`repos/${A.repository}/git/refs/heads/${e}`)).object.sha}catch(e){if(404===e.statusCode)throw new Error("repository-changed");if(409===e.statusCode)throw new Error("empty");throw e}}async function F(e){return(await h(`repos/${A.repository}/git/commits/${e}`)).tree.sha}async function b(e){const t={encoding:"base64",content:btoa(e)};return(await f(`repos/${A.repository}/git/blobs`,t)).sha}async function Q(e,t){const a={base_tree:e,tree:[]};return t.forEach((e=>{a.tree.push({path:e.name,mode:"100644",type:"blob",sha:e.blob})})),(await f(`repos/${A.repository}/git/trees`,a)).sha}async function D(e,t,a,r=A.baseBranch){try{delete m[e];const o=[];for(const e of t){const t=b(e.contents);o.push({name:e.name,blob:t})}const s=await w(r),i=await F(s);for(var n=0;n<o.length;n++)o[n].blob=await o[n].blob;const l=await Q(i,o),c=await M(s,l,a);return await y(e,c),"updated"}catch(e){if(404===e.statusCode)throw new Error("repository-changed");throw e}}console.log("will push commit"),t.waitUntil(D("master",[{name:"cloudflare_as_name.js",contents:E},{name:"cloudflare_as_name.min.js",contents:l}],"Routes Upd "+(new Date).toLocaleString("en-US",{timeZone:"America/New_York"}),"master"))}}return!0}}var C={};function p(e){for(var t,a,r,n=[],o=0;o<e.length;o++)if("SUBWAY"===(t=e[o]).mode&&!t.id.indexOf("MTA")){if(a=!1,"X"===(r=t.shortName).substr(r.length-1,r.length)){var s=r.substr(0,r.indexOf("X"));a=n.find((function(e){return"object"==typeof e&&e[0]==s}))}a||((r=t.id.split(":").pop())==""+ +r&&(r=+r),n.push([r,t.sortOrder]))}return n}function m(e){var t=e.filter((function(e){return"BUS"===e.mode&&!!~e.id.indexOf("MTA")&&"MTA NYCT - Subway"!=e.agencyName})).map((function(e){var t,a=[e.id.split(":").pop(),e.color||null];return"MTA New York City Transit"!==e.agencyName&&(a[2]=1),(t=a[0])==(e=e.shortName)||t.startsWith("BX")&&t.slice(2)===e.slice(2)||"+"==t.slice(-1)&&"-SBS"==e.slice(-4)||(a[3]=e),a}));return t.sort((function(e,t){return e[3]<t[3]?-1:1})).forEach((function(e){var t=e[3],a=+t;t==""+a&&(e[3]=a)})),t}function M(e){var t=e.filter((function(e){return"RAIL"===e.mode&&!(e.id.indexOf("LI")&&e.id.indexOf("MNR"))})).map((function(e){var t=e.id.split(":").pop();return t==""+ +t&&(t=+t),t=[t,"0039A6"===e.color?"066AFE":e.color,~e.id.indexOf("LI")?null:1,e.longName.replace(/ (Branch|Line)$/,"")]}));t.push(["Wassaic","066AFE",1,"Wassaic"]),t.sort((function(e,t){return e[3]<t[3]?-1:1}));for(var a,r,n=[],o=[],s=0;s<t.length;s++)(e=t[s])[2]&&3==e[0]&&(a=s),e[2]&&2==e[0]&&(r=s),e[2]&&e[0]>=4&&e[0]<=6&&(n.push(e),t.splice(s,1),s--),~e[3].indexOf("Wassaic")&&(o.push(e),t.splice(s,1),s--);return(t=t.slice(0,a+1).concat(n).concat(t.slice(a+1))).slice(0,r+1).concat(o).concat(t.slice(r+1))}C.buildServiceRoutes=function(e){return[m(e),M(e),p(e)]};let g='W/"eQd/f+XQWZRXX7CqaDxFAQ=="',S='var R;!function(E,B){for(E=R,R=[[["BXM1","00933C",1],["BXM2","00933C",1],["BXM3","00933C",1],["BXM4","00933C",1],["BXM6","00933C",1],["BXM7","00933C",1],["BXM8","00933C",1],["BXM9","00933C",1],["L90","EE352E"],["L92","EE352E"],["SIM33C","00933C"],["J90","EE352E"],["BXM10","00933C",1],["BXM11","00933C",1],["BXM18","00933C",1],["BX18A","6CBE45"],["BX18B","6CBE45"],["B12","6CBE45"],["B13","FAA61A"],["B11","006CB7"],["B16","FAA61A"],["B17","B933AD"],["B14","00AEEF"],["B15","B933AD"],["B20","6CBE45"],["M79+","EE352E"],["B24","FAA61A"],["B25","6CBE45"],["B26","006CB7"],["S40","B933AD"],["S44","FAA61A"],["S42","00AEEF"],["Q06","B933AD",1,"Q6"],["S48","EE352E"],["Q07","6CBE45",1,"Q7"],["S46","006CB7"],["Q08","B933AD",1,"Q8"],["Q09","B933AD",1,"Q9"],["B31","FAA61A"],["B35","EE352E"],["B32","006CB7"],["B38","00AEEF"],["B39","00AEEF"],["B36","FAA61A"],["B37","B933AD"],["S51","006CB7"],["S52","B933AD"],["Q10","FAA61A",1],["Q13","EE352E"],["S55","FAA61A"],["S56","6CBE45"],["S53","EE352E"],["Q11","6CBE45",1],["Q12","EE352E"],["S54","FAA61A"],["S59","EE352E"],["Q17","EE352E"],["Q18","00AEEF",1],["Q15","FAA61A"],["S57","6CBE45"],["Q16","EE352E"],["SIM8","00933C"],["SIM9","00933C"],["Q19","00AEEF",1],["B41","006CB7"],["B42","006CB7"],["B45","EE352E"],["SIM1","00933C"],["B46","6CBE45"],["SIM2","00933C"],["B43","EE352E"],["B44","B933AD"],["SIM3","00933C"],["B49","EE352E"],["SIM4","00933C"],["SIM5","00933C"],["B47","FAA61A"],["SIM6","00933C"],["SIM7","00933C"],["B48","6CBE45"],["BX12+","006CB7"],["S62","B933AD"],["Q21","006CB7",1],["S61","EE352E"],["S66","6CBE45"],["Q24","00AEEF"],["Q25","00AEEF",1],["Q22","EE352E",1],["Q23","FAA61A",1],["Q28","EE352E"],["Q29","00AEEF",1],["Q26","6CBE45"],["Q27","EE352E"],["D90","EE352E"],["B52","EE352E"],["B57","EE352E"],["B54","6CBE45"],["Q31","FAA61A"],["Q32","00AEEF"],["M106","6CBE45"],["S74","EE352E"],["Q30","FAA61A"],["Q35","006CB7",1],["S78","FAA61A"],["Q36","FAA61A"],["Q33","EE352E",1],["S76","B933AD"],["Q34","FAA61A",1],["Q39","B933AD",1],["Q37","00AEEF",1],["Q38","EE352E",1],["B60","B933AD"],["B63","006CB7"],["B64","6CBE45"],["B61","6CBE45"],["B103","FAA61A",1],["B62","00AEEF"],["B67","EE352E"],["B68","EE352E"],["B100","B933AD",1],["B65","00AEEF"],["B69","006CB7"],["S81","006CB7"],["S84","EE352E"],["Q42","00AEEF"],["Q43","EE352E"],["Q40","6CBE45",1],["Q41","B933AD",1],["Q46","EE352E"],["Q47","6CBE45",1],["S89","EE352E"],["S86","B933AD"],["Q48","006CB7"],["Q49","006CB7",1],["M34+","006CB7"],["B70","B933AD"],["B74","EE352E"],["M101","FAA61A"],["M102","FAA61A"],["M103","B933AD"],["M104","B933AD"],["Q70+","EE352E",1],["M100","00AEEF"],["S91","EE352E"],["S92","B933AD"],["Q50","FAA61A",1],["S90","B933AD"],["Q54","B933AD"],["S96","006CB7"],["S93","EE352E"],["S94","FAA61A"],["Q58","6CBE45"],["Q55","EE352E"],["S98","EE352E"],["Q56","B933AD"],["Q59","FAA61A"],["B82","6CBE45"],["B83","EE352E"],["B84","006CB7"],["Q60","EE352E",1],["Q64","EE352E",1],["M116","6CBE45"],["Q65","00AEEF",1],["Q69","00AEEF",1],["Q66","EE352E",1],["Q67","FAA61A",1],["B90","EE352E"],["B96","6CBE45"],["M125","B933AD"],["B98","6CBE45"],["Q72","B933AD",1],["Q76","6CBE45"],["Q77","FAA61A"],["M15+","006CB7"],["Q83","6CBE45"],["Q84","B933AD"],["Q85","EE352E"],["Q88","FAA61A"],["Q93","6CBE45"],["M10","006CB7"],["Q92","00933C"],["M11","FAA61A"],["Q96","6CBE45"],["M12","006CB7"],["M15","006CB7"],["Q53+","FAA61A",1],["M20","EE352E"],["M21","FAA61A"],["M22","00AEEF"],["Q52+","FAA61A",1],["M14D+","6CBE45"],["M31","B933AD"],["M35","FAA61A"],["M14A+","6CBE45"],["M42","EE352E"],["M50","6CBE45"],["M57","00AEEF"],["M55","6CBE45"],["M34A+","006CB7"],["M66","FAA61A"],["M72","6CBE45"],["Q110","006CB7",1],["Q111","EE352E",1],["Q114","FAA61A",1],["Q112","EE352E",1],["Q113","EE352E",1],["Q100","FAA61A",1],["Q103","EE352E",1],["Q104","B933AD",1],["Q101","6CBE45",1],["Q102","006CB7",1],["M98","EE352E"],["M96","6CBE45"],["B2","006CB7"],["B1","00AEEF"],["B4","6CBE45"],["B3","EE352E"],["S79+","006CB7"],["B6","EE352E"],["B8","FAA61A"],["B7","EE352E"],["B9","EE352E"],["SIM15","00933C"],["SIM10","00933C"],["SIM11","00933C"],["X27","00933C"],["X28","00933C"],["X37","00933C"],["X38","00933C"],["Q15A","FAA61A"],["BX20","00AEEF"],["BX21","6CBE45"],["BX22","EE352E"],["BX23","B933AD",1],["BX24","6CBE45"],["BX25","FAA61A"],["BX26","FAA61A"],["BX27","00AEEF"],["BX28","00AEEF"],["BX29","00AEEF"],["B82+","6CBE45"],["BX10","006CB7"],["BX11","FAA61A"],["X63","00933C"],["BX12","006CB7"],["BX13","006CB7"],["X64","00933C"],["BX15","FAA61A"],["BX16","00AEEF"],["X68","00933C"],["BX17","006CB7"],["BX19","B933AD"],["BX40","006CB7"],["BX41","EE352E"],["BX42","EE352E"],["BX46","EE352E"],["QM25","00933C",1],["QM24","00933C",1],["QM21","00933C",1],["QM20","00933C",1],["BX4A","FAA61A"],["BM2","00933C",1],["BM3","00933C",1],["BM1","00933C",1],["BM4","00933C",1],["BM5","00933C",1],["BX30","EE352E"],["BX31","EE352E"],["BX32","6CBE45"],["BX33","6CBE45"],["BX34","B933AD"],["BX35","00AEEF"],["BX36","B933AD"],["QM15","00933C",1],["BX38","FAA61A"],["BX39","FAA61A"],["QM12","00933C",1],["QM11","00933C",1],["QM10","00933C",1],["QM18","00933C",1],["QM17","00933C",1],["QM16","00933C",1],["M60+","EE352E"],["BX6+","EE352E"],["QM40","00933C",1],["QM44","00933C",1],["QM42","00933C",1],["M1","EE352E"],["SIM8X","00933C"],["M3","B933AD"],["M2","B933AD"],["M5","EE352E"],["M4","00AEEF"],["M7","00AEEF"],["M9","B933AD"],["M8","00AEEF"],["QM3","00933C",1],["QM4","00933C",1],["QM1","00933C",1],["QM2","00933C",1],["QM7","00933C",1],["QM8","00933C",1],["QM36","00933C",1],["QM35","00933C",1],["QM5","00933C",1],["M86+","FAA61A"],["QM6","00933C",1],["QM34","00933C",1],["QM32","00933C",1],["QM31","00933C",1],["SIM35","00933C"],["SIM3C","00933C"],["SIM32","00933C"],["SIM31","00933C"],["SIM34","00933C"],["SIM33","00933C"],["SIM30","00933C"],["SIM25","00933C"],["SIM24","00933C"],["SIM26","00933C"],["SIM1C","00933C"],["SIM23","00933C"],["SIM22","00933C"],["SIM4X","00933C"],["Q1","FAA61A"],["Q3","00AEEF"],["Q2","6CBE45"],["Q5","EE352E"],["Q4","EE352E"],["SIM4C","00933C"],["B44+","B933AD"],["B46+","6CBE45"],["M23+","B933AD"],["BX1","00AEEF"],["BX2","FAA61A"],["BX5","EE352E"],["BX6","EE352E"],["BX3","EE352E"],["BX4","FAA61A"],["BX9","FAA61A"],["BX7","EE352E"],["BX8","FAA61A"],["BX41+","EE352E"],["Q20B","006CB7"],["Q20A","006CB7"],["Q44+","EE352E"]],[[1,"00985F",,"Babylon"],[12,"4D5357",,"City Terminal Zone"],[7,"6E3219",,"Far Rockaway"],[2,"066AFE",1,"Harlem"],["Wassaic","066AFE",1,"Wassaic"],[2,"CE8E00",,"Hempstead"],[1,"009B3A",1,"Hudson"],[6,"FF6319",,"Long Beach"],[5,"00B2A9",,"Montauk"],[3,"EE0034",1,"New Haven"],[5,"EE0034",1,"Danbury"],[4,"EE0034",1,"New Canaan"],[6,"EE0034",1,"Waterbury"],[3,"00AF3F",,"Oyster Bay"],[50,"94219A",1,"Pascack Valley"],[10,"006EC7",,"Port Jefferson"],[51,"FFD411",1,"Port Jervis"],[9,"C60C30",,"Port Washington"],[4,"A626AA",,"Ronkonkoma"],[8,"00A1DE",,"West Hempstead"]],[[1,1],[3,3],[2,2],[5,5],[4,4],[7,9],[6,7],["H",28],["J",19],["M",17],["L",21],["N",22],["Q",23],["R",24],["W",25],["A",11],["C",12],["B",14],["E",13],["D",15],["G",18],["F",16],["Z",20],["FS",26],["GS",27],["SI",29]]],E=document.documentElement.firstChild.lastChild;E;E=E.previousSibling)if((B=E.src)&&B.lastIndexOf("routes.js")===B.length-9){E.parentNode.removeChild(E);break}}();';