var o;onhashchange=function(e){var n,a,t,i=window.location.hash.substring(1);console.log("saw "+i),-1!=i.indexOf("$")&&(o?(n=o.split("$"),a=i.split("$"),t=new Date,t='http://tripplanner.mta.info/MyTrip/handler/CustomPlannerHandler.ashx?jsonpacket={"RequestDevicename":"IPHONEAPP","OriginInput":"'+escape(n[2])+'","DestinationInput":"'+escape(a[2])+'","Arrdep":"D","InputTime":"'+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+'","InputDate":"'+t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+'","Minimize":"T","Walkdist":"0.50","Mode":"F12RBC","LineStart":"","LineEnd":"","Accessible":"N","OriginCoordinates":"'+escape(o)+'","DestinationCoordinates":"'+escape(i)+'","LocationType":"","StartServiceType":"train","StartTrainType":"subway","StartBorough":"MN","EndServiceType":"train","EndTrainType":"subway","EndBorough":"MN","Walkincrease":"","Maxinitialwait":"","Maxtriptime":"","Maxtransfers":""}',location.replace(t)):o=i)},function(){var e=window.location.hash.substring(1);-1!=e.indexOf("$")&&(o=e),window.onload=function(){window.navigator.userAgent.indexOf("MSIE ");for(var e=0<=document.location.pathname.indexOf("plan2.htm"),n=0,a=document.getElementsByTagName("a"),n=0;n<a.length;n++){var t=a[n];4<t.hash.length&&(e?(t.pathname=t.pathname.replace("/plan.htm","/planIE.htm"),t.hash=document.location.hash.substring(1)+":::"+t.hash.substring(1)):t.pathname=t.pathname.replace("/plan.htm","/plan2.htm"))}}}();